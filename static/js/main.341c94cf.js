/*! For license information please see main.341c94cf.js.LICENSE.txt */
!function(){var e={163:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=163,e.exports=t},472:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case I:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Ie(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==_e||null!==Ee)&&(Ce(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,Et,It,St=!1,Tt=[],At=null,Ct=null,Nt=null,Dt=new Map,Ot=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==At&&Ut(At)&&(At=null),null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),Dt.forEach(jt),Ot.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),Dt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return Ct=Mt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function In(){return En}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),An=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Dn),Rn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Ir(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Ir("animationend"),Tr=Ir("animationiteration"),Ar=Ir("animationstart"),Cr=Ir("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Pr=Dr[Rr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(Sr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Sr:case Tr:case Ar:s=mn;break;case Cr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Hr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(Kn(u))if($n)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Hn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(m=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Hr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Hr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ei(e){return{current:e}}function Ii(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ai=Ei(Ti),Ci=Ei(!1),Ni=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ii(Ci),Ii(Ai)}function Pi(e,t,n){if(Ai.current!==Ti)throw Error(a(168));Si(Ai,t),Si(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ai.current,Si(Ai,e),Si(Ci,Ci.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ci),Ii(Ai),Si(Ai,e)):Ii(Ci),Si(Ci,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Hi=null,Wi=0,Gi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Ki++]=Wi,qi[Ki++]=Hi,Hi=e,Wi=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Hi;)Hi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ma.current;Ii(ma),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Aa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Oi(t)?Ni:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Oi(t)?Ni:Ai.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Ji(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),$a=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Si(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Ao(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Po.bind(null,n,r,i,t),void 0,null),null===Cs)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Ca(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Ho(e,t){return zo(4,2,e,t)}function Wo(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Aa(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Aa(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Cs)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Cs.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:Xo,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:$o,useReducer:Co,useRef:Vo,useState:function(){return Co(Ao)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[Co(Ao)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:Xo,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(Ao)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[No(Ao)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=Io(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Rs,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Rs,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Rs,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Rs,Os),Os|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Oi(n)?Ni:Ai.current;return a=Di(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=Io(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Au(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Di(t,c=Oi(n)?Ni:Ai.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Di(t,s=Oi(n)?Ni:Ai.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Ru,Pu,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Cs)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),nc(r,e,i,-1))}return vc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Wu(t),null;case 3:return r=t.stateNode,io(),Ii(Ci),Ii(Ai),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":X(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Pu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ps&&(Ps=3):vc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*$e()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ci),Ii(Ai),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Pu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,$u="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Xu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,hs(e,t,n),Xu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ec(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ec(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=$e())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,vs(t,e),Xu=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ec(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Ju=s):xs(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,Yu=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&is(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function xs(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var _s,Es=Math.ceil,Is=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,As=0,Cs=null,Ns=null,Ds=0,Os=0,Rs=Ei(0),Ps=0,Ls=null,Ms=0,Fs=0,Us=0,js=null,Vs=null,Bs=0,zs=1/0,qs=null,Ks=!1,Hs=null,Ws=null,Gs=!1,Qs=null,Ys=0,Xs=0,$s=null,Js=-1,Zs=0;function ec(){return 0!==(6&As)?$e():-1!==Js?Js:Js=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xs)throw Xs=0,$s=null,Error(a(185));mt(e,n,r),0!==(2&As)&&e===Cs||(e===Cs&&(0===(2&As)&&(Fs|=n),4===Ps&&uc(e,Ds)),rc(e,r),1===n&&0===As&&0===(1&t.mode)&&(zs=$e()+500,ji&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Cs?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cs?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=pc();for(Cs===e&&Ds===t||(qs=null,zs=$e()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Is.current=o,As=i,null!==Ns?t=0:(Cs=null,Ds=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vs,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vs,qs),t);break}wc(e,Vs,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vs,qs),r);break}wc(e,Vs,qs);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&As))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vs,qs),rc(e,$e()),null}function cc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(zs=$e()+500,ji&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&As)&&xc();var t=As;As|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(As=t))&&zi()}}function fc(){Os=Rs.current,Ii(Rs)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ii(Ci),Ii(Ai),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Cs=e,Ns=e=Rc(e.current,null),Ds=Os=t,Ps=0,Ls=null,Us=Fs=Ms=0,Vs=js=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Ss.current=null,null===n||null===n.return){Ps=1,Ls=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ps&&(Ps=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function vc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Cs||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Cs,Ds)}function yc(e,t){var n=As;As|=2;var r=pc();for(Cs===e&&Ds===t||(qs=null,hc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(wa(),As=n,Is.current=r,null!==Ns)throw Error(a(261));return Cs=null,Ds=0,Ps}function mc(){for(;null!==Ns;)kc(Ns)}function gc(){for(;null!==Ns&&!Ye();)kc(Ns)}function kc(e){var t=_s(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?bc(e):Ns=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Os)))return void(Ns=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Ps=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ps&&(Ps=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Cs&&(Ns=Cs=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Cc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=As;As|=4,Ss.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Xe(),As=s,kt=u,Ts.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Hs,Hs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===$s?Xs++:(Xs=0,$s=e):Xs=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ec(s,s.return,x)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Pa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Pa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cs===e&&(Ds&n)===n&&(4===Ps||3===Ps&&(130023424&Ds)===Ds&&500>$e()-Bs?hc(e,0):Us|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ca(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Nc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case E:u=8,i|=8;break;case I:return(e=Dc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case C:return(e=Dc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case A:u=11;break e;case D:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Di(t,Ai.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Au(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Ia(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),_u(e,t,r,i=ya(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),qu(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ha(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Hc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Hc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Hc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,$e()),0===(6&As)&&(zs=$e()+500,zi()))}break;case 13:lc((function(){var t=Ca(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ca(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},Et=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ce=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+A(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+A(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+A(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,I=null,S=-1,T=5,A=-1;function C(){return!(t.unstable_now()-A<T)}function N(){if(null!==I){var e=t.unstable_now();A=e;var n=!0;try{n=I(!0,e)}finally{n?_():(E=!1,I=null)}}else E=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,O=D.port2;D.port1.onmessage=N,_=function(){O.postMessage(null)}}else _=function(){m(N,0)};function R(e){I=e,E||(E=!0,_())}function P(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".f4195f39.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netflix-build:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunknetflix_build=self.webpackChunknetflix_build||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Na},SDK_VERSION:function(){return Uo},_DEFAULT_ENTRY_NAME:function(){return Io},_addComponent:function(){return Co},_addOrOverwriteComponent:function(){return No},_apps:function(){return To},_clearComponents:function(){return Po},_components:function(){return Ao},_getProvider:function(){return Oo},_registerComponent:function(){return Do},_removeServiceInstance:function(){return Ro},deleteApp:function(){return zo},getApp:function(){return Vo},getApps:function(){return Bo},initializeApp:function(){return jo},onLog:function(){return Ho},registerVersion:function(){return Ko},setLogLevel:function(){return Wo}});var t=n(791),r=n.t(t,2),i=n(250),a=n(248),o=n(327),u=n(164);var s=function(e){e()},c=function(){return s},l=(0,t.createContext)(null);function f(){return(0,t.useContext)(l)}var h=function(){throw new Error("uSES not initialized!")},d=h,p=function(e,t){return e===t};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=e===l?f:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=d(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var y=v();n(110),n(900);var m={notify:function(){},get:function(){return[]}};function g(e,t){var n,r=m;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=c(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=m)},getListeners:function(){return r}};return o}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var b=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=g(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);k((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||l;return t.createElement(s.Provider,{value:o},i)};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=e===l?f:function(){return(0,t.useContext)(e)};return function(){return n().store}}var x=w();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=e===l?x:w(e);return function(){return t().dispatch}}var E,I=_();function S(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function T(e){return!!e&&!!e[ye]}function A(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===me}(e)||Array.isArray(e)||!!e[ve]||!!e.constructor[ve]||L(e)||M(e))}function C(e,t,n){void 0===n&&(n=!1),0===N(e)?(n?Object.keys:ge)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function N(e){var t=e[ye];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:L(e)?2:M(e)?3:0}function D(e,t){return 2===N(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function O(e,t){return 2===N(e)?e.get(t):e[t]}function R(e,t,n){var r=N(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function P(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function L(e){return fe&&e instanceof Map}function M(e){return he&&e instanceof Set}function F(e){return e.o||e.t}function U(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ke(e);delete t[ye];for(var n=ge(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function j(e,t){return void 0===t&&(t=!1),B(e)||T(e)||!A(e)||(N(e)>1&&(e.set=e.add=e.clear=e.delete=V),Object.freeze(e),t&&C(e,(function(e,t){return j(t,!0)}),!0)),e}function V(){S(2)}function B(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function z(e){var t=be[e];return t||S(18,e),t}function q(e,t){be[e]||(be[e]=t)}function K(){return ce}function H(e,t){t&&(z("Patches"),e.u=[],e.s=[],e.v=t)}function W(e){G(e),e.p.forEach(Y),e.p=null}function G(e){e===ce&&(ce=e.l)}function Q(e){return ce={p:[],l:ce,h:e,m:!0,_:0}}function Y(e){var t=e[ye];0===t.i||1===t.i?t.j():t.O=!0}function X(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||z("ES5").S(t,e,r),r?(n[ye].P&&(W(t),S(4)),A(e)&&(e=$(t,e),t.l||Z(t,e)),t.u&&z("Patches").M(n[ye].t,e,t.u,t.s)):e=$(t,n,[]),W(t),t.u&&t.v(t.u,t.s),e!==pe?e:void 0}function $(e,t,n){if(B(t))return t;var r=t[ye];if(!r)return C(t,(function(i,a){return J(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Z(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=U(r.k):r.o;C(3===r.i?new Set(i):i,(function(t,a){return J(e,r,i,t,a,n)})),Z(e,i,!1),n&&e.u&&z("Patches").R(r,n,e.u,e.s)}return r.o}function J(e,t,n,r,i,a){if(T(i)){var o=$(e,i,a&&t&&3!==t.i&&!D(t.D,r)?a.concat(r):void 0);if(R(n,r,o),!T(o))return;e.m=!1}if(A(i)&&!B(i)){if(!e.h.F&&e._<1)return;$(e,i),t&&t.A.l||Z(e,i)}}function Z(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&j(t,n)}function ee(e,t){var n=e[ye];return(n?F(n):e)[t]}function te(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ne(e){e.P||(e.P=!0,e.l&&ne(e.l))}function re(e){e.o||(e.o=U(e.t))}function ie(e,t,n){var r=L(t)?z("MapSet").N(t,n):M(t)?z("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:K(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=we;n&&(i=[r],a=xe);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):z("ES5").J(t,n);return(n?n.A:K()).p.push(r),r}function ae(e){return T(e)||S(22,e),function e(t){if(!A(t))return t;var n,r=t[ye],i=N(t);if(r){if(!r.P&&(r.i<4||!z("ES5").K(r)))return r.t;r.I=!0,n=oe(t,i),r.I=!1}else n=oe(t,i);return C(n,(function(t,i){r&&O(r.t,t)===i||R(n,t,e(i))})),3===i?new Set(n):n}(e)}function oe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return U(e)}function ue(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[ye];return we.get(t,e)},set:function(t){var n=this[ye];we.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][ye];if(!i.P)switch(i.i){case 5:r(i)&&ne(i);break;case 4:n(i)&&ne(i)}}}function n(e){for(var t=e.t,n=e.k,r=ge(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==ye){var o=t[a];if(void 0===o&&!D(t,a))return!0;var u=n[a],s=u&&u[ye];if(s?s.t!==o:!P(u,o))return!0}}var c=!!t[ye];return r.length!==ge(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};q("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=ke(n);delete a[ye];for(var o=ge(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:K(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,ye,{value:a,writable:!0}),i},S:function(e,n,i){i?T(n)&&n[ye].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[ye];if(n){var i=n.t,a=n.k,o=n.D,u=n.i;if(4===u)C(a,(function(t){t!==ye&&(void 0!==i[t]||D(i,t)?o[t]||e(a[t]):(o[t]=!0,ne(n)))})),C(i,(function(e){void 0!==a[e]||D(a,e)||(o[e]=!1,ne(n))}));else if(5===u){if(r(n)&&(ne(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){d=e}(o.useSyncExternalStoreWithSelector),function(e){e}(a.useSyncExternalStore),E=u.unstable_batchedUpdates,s=E;var se,ce,le="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),fe="undefined"!=typeof Map,he="undefined"!=typeof Set,de="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,pe=le?Symbol.for("immer-nothing"):((se={})["immer-nothing"]=!0,se),ve=le?Symbol.for("immer-draftable"):"__$immer_draftable",ye=le?Symbol.for("immer-state"):"__$immer_state",me=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ge="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ke=Object.getOwnPropertyDescriptors||function(e){var t={};return ge(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},be={},we={get:function(e,t){if(t===ye)return e;var n=F(e);if(!D(n,t))return function(e,t,n){var r,i=te(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!A(r)?r:r===ee(e.t,t)?(re(e),e.o[t]=ie(e.A.h,r,e)):r},has:function(e,t){return t in F(e)},ownKeys:function(e){return Reflect.ownKeys(F(e))},set:function(e,t,n){var r=te(F(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=ee(F(e),t),a=null==i?void 0:i[ye];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(P(n,i)&&(void 0!==n||D(e.t,t)))return!0;re(e),ne(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==ee(e.t,t)||t in e.t?(e.D[t]=!1,re(e),ne(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=F(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){S(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){S(12)}},xe={};C(we,(function(e,t){xe[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),xe.deleteProperty=function(e,t){return xe.set.call(this,e,t,void 0)},xe.set=function(e,t,n){return we.set.call(this,e[0],t,n,e[0])};var _e=function(){function e(e){var t=this;this.g=de,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&S(6),void 0!==r&&"function"!=typeof r&&S(7),A(e)){var u=Q(t),s=ie(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?W(u):G(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return H(u,r),X(e,u)}),(function(e){throw W(u),e})):(H(u,r),X(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===pe&&(o=void 0),t.F&&j(o,!0),r){var l=[],f=[];z("Patches").M(e,o,l,f),r(l,f)}return o}S(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){A(e)||S(8),T(e)&&(e=ae(e));var t=Q(this),n=ie(this,e,void 0);return n[ye].C=!0,G(t),n},t.finishDraft=function(e,t){var n=(e&&e[ye]).A;return H(n,t),X(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!de&&S(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=z("Patches").$;return T(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ee=new _e,Ie=Ee.produce,Se=(Ee.produceWithPatches.bind(Ee),Ee.setAutoFreeze.bind(Ee),Ee.setUseProxies.bind(Ee),Ee.applyPatches.bind(Ee),Ee.createDraft.bind(Ee),Ee.finishDraft.bind(Ee),Ie);function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var De="function"===typeof Symbol&&Symbol.observable||"@@observable",Oe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Re={INIT:"@@redux/INIT"+Oe(),REPLACE:"@@redux/REPLACE"+Oe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Oe()}};function Pe(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Le(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Ne(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Ne(1));return n(Le)(e,t)}if("function"!==typeof e)throw new Error(Ne(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(Ne(3));return a}function f(e){if("function"!==typeof e)throw new Error(Ne(4));if(s)throw new Error(Ne(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(Ne(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!Pe(e))throw new Error(Ne(7));if("undefined"===typeof e.type)throw new Error(Ne(8));if(s)throw new Error(Ne(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(Ne(10));i=e,h({type:Re.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Ne(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[De]=function(){return this},e}return h({type:Re.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[De]=p,r}function Me(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Re.INIT}))throw new Error(Ne(12));if("undefined"===typeof n(void 0,{type:Re.PROBE_UNKNOWN_ACTION()}))throw new Error(Ne(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(Ne(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Fe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Ne(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Fe.apply(void 0,a)(n.dispatch),Ce(Ce({},n),{},{dispatch:r})}}}function je(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Ve=je();Ve.withExtraArgument=je;var Be=Ve,ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qe=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Ke=Object.defineProperty,He=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),We=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,Qe=function(e,t,n){return t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ye=function(e,t){for(var n in t||(t={}))We.call(t,n)&&Qe(e,n,t[n]);if(He)for(var r=0,i=He(t);r<i.length;r++){n=i[r];Ge.call(t,n)&&Qe(e,n,t[n])}return e},Xe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Fe:Fe.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function $e(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var Je=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return ze(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,qe([void 0],e[0].concat(this)))):new(t.bind.apply(t,qe([void 0],e.concat(this))))},t}(Array);function Ze(e){return A(e)?Se(e,(function(){})):e}function et(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Je);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Be.withExtraArgument(n.extraArgument)):r.push(Be));0;return r}(e)}}function tt(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Ye(Ye({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function nt(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}Object.assign;var rt="listenerMiddleware";tt(rt+"/add"),tt(rt+"/removeAll"),tt(rt+"/remove");ue();var it,at=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Ze(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?nt(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=Ye(Ye({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?nt(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return Ze(e())};else{var c=Ze(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=qe([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(T(e))return void 0===(r=n(e,t))?e:r;if(A(e))return Se(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,l,o,c)}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?tt(c,r):tt(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),ot=at.actions,ut=ot.login,st=ot.logout,ct=function(e){return e.user.user},lt=function(e){var t,n=et(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!$e(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Me(a)}var p=u;"function"===typeof p&&(p=p(n));var v=Ue.apply(void 0,p),y=Fe;c&&(y=Xe(Ye({trace:!1},"object"===typeof c&&c)));var m=[v];return Array.isArray(d)?m=qe([v],d):"function"===typeof d&&(m=d(m)),Le(t,f,y.apply(void 0,m))}({reducer:{user:at.reducer}});function ft(e){if(Array.isArray(e))return e}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dt(e,t){if(e){if("string"===typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}function pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vt(e,t){return ft(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||dt(e,t)||pt()}function yt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function mt(e){return function(e){if(Array.isArray(e))return ht(e)}(e)||yt(e)||dt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t,n){return t&&kt(e.prototype,t),n&&kt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function xt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}function Et(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e,t){if(t&&("object"===It(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return St(e)}function At(e){var t=Et();return function(){var n,r=_t(e);if(t){var i=_t(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tt(this,n)}}function Ct(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Nt(){Nt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==It(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(m,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Dt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ot(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Dt(a,r,i,o,u,"next",e)}function u(e){Dt(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Rt(e,t,n){return Rt=Et()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&wt(i,n.prototype),i},Rt.apply(null,arguments)}function Pt(e){var t="function"===typeof Map?new Map:void 0;return Pt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Rt(e,arguments,_t(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wt(n,e)},Pt(e)}function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lt.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(it||(it={}));var Mt,Ft="popstate";function Ut(e){return{usr:e.state,key:e.key}}function jt(e,t,n,r){return void 0===n&&(n=null),Lt({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Bt(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Vt(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Bt(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function zt(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=it.Pop,f=null;function h(){l=it.Pop,f&&f({action:l,location:d.location})}var d={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Ft,h),f=e,function(){o.removeEventListener(Ft,h),f=null}},createHref:function(e){return t(o,e)},push:function(e,t){l=it.Push;var r=jt(d.location,e,t);n&&n(r,e);var i=Ut(r),a=d.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&f&&f({action:l,location:r})},replace:function(e,t){l=it.Replace;var r=jt(d.location,e,t);n&&n(r,e);var i=Ut(r),a=d.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:r})},go:function(e){return c.go(e)}};return d}function qt(e,t,n){return void 0===t&&(t=[]),void 0===n&&(n=new Set),e.map((function(e,r){var i=[].concat(mt(t),[r]),a="string"===typeof e.id?e.id:i.join("-");return Jt(!0!==e.index||!e.children,"Cannot specify children on an index route"),Jt(!n.has(a),'Found a route id collision on id "'+a+"\".  Route id's must be globally unique within Data Router usages"),n.add(a),function(e){return!0===e.index}(e)?Lt({},e,{id:a}):Lt({},e,{id:a,children:e.children?qt(e.children,i,n):void 0})}))}function Kt(e,t,n){void 0===n&&(n="/");var r=$t(("string"===typeof t?Bt(t):t).pathname||"/",n);if(null==r)return null;var i=Ht(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Yt(i[o],r);return a}function Ht(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(Jt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=nn([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(Jt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),Ht(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:Qt(o,e.index),routesMeta:u})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Mt||(Mt={}));var Wt=/^:\w+$/,Gt=function(e){return"*"===e};function Qt(e,t){var n=e.split("/"),r=n.length;return n.some(Gt)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Gt(e)})).reduce((function(e,t){return e+(Wt.test(t)?3:""===t?1:10)}),r)}function Yt(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Xt({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:nn([i,l.pathname]),pathnameBase:rn(nn([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=nn([i,l.pathnameBase]))}return a}function Xt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Zt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=vt(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Zt(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function $t(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Jt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Zt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function en(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function tn(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=Bt(e):(Jt(!(i=Lt({},e)).pathname||!i.pathname.includes("?"),en("?","pathname","search",i)),Jt(!i.pathname||!i.pathname.includes("#"),en("#","pathname","hash",i)),Jt(!i.search||!i.search.includes("#"),en("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Bt(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:an(a),hash:on(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var nn=function(e){return e.join("/").replace(/\/\/+/g,"/")},rn=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},an=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},on=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},un=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n)}(Pt(Error)),sn=function(){function e(t){var n,r=this;gt(this,e),this.pendingKeys=new Set,this.subscriber=void 0,Jt(t&&"object"===typeof t&&!Array.isArray(t),"defer() only accepts plain objects"),this.abortPromise=new Promise((function(e,t){return n=t})),this.controller=new AbortController;var i=function(){return n(new un("Deferred data aborted"))};this.unlistenAbortSignal=function(){return r.controller.signal.removeEventListener("abort",i)},this.controller.signal.addEventListener("abort",i),this.data=Object.entries(t).reduce((function(e,t){var n=vt(t,2),i=n[0],a=n[1];return Object.assign(e,Te({},i,r.trackPromise(i,a)))}),{})}return bt(e,[{key:"trackPromise",value:function(e,t){var n=this;if(!(t instanceof Promise))return t;this.pendingKeys.add(e);var r=Promise.race([t,this.abortPromise]).then((function(t){return n.onSettle(r,e,null,t)}),(function(t){return n.onSettle(r,e,t)}));return r.catch((function(){})),Object.defineProperty(r,"_tracked",{get:function(){return!0}}),r}},{key:"onSettle",value:function(e,t,n,r){if(this.controller.signal.aborted&&n instanceof un)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:function(){return n}}),Promise.reject(n);this.pendingKeys.delete(t),this.done&&this.unlistenAbortSignal();var i=this.subscriber;return n?(Object.defineProperty(e,"_error",{get:function(){return n}}),i&&i(!1),Promise.reject(n)):(Object.defineProperty(e,"_data",{get:function(){return r}}),i&&i(!1),r)}},{key:"subscribe",value:function(e){this.subscriber=e}},{key:"cancel",value:function(){var e=this;this.controller.abort(),this.pendingKeys.forEach((function(t,n){return e.pendingKeys.delete(n)}));var t=this.subscriber;t&&t(!0)}},{key:"resolveData",value:function(){var e=Ot(Nt().mark((function e(t){var n,r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,this.done){e.next=7;break}return r=function(){return i.cancel()},t.addEventListener("abort",r),e.next=6,new Promise((function(e){i.subscribe((function(n){t.removeEventListener("abort",r),(n||i.done)&&e(n)}))}));case 6:n=e.sent;case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"done",get:function(){return 0===this.pendingKeys.size}},{key:"unwrappedData",get:function(){return Jt(null!==this.data&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((function(e,t){var n=vt(t,2),r=n[0],i=n[1];return Object.assign(e,Te({},r,function(e){if(!function(e){return e instanceof Promise&&!0===e._tracked}(e))return e;if(e._error)throw e._error;return e._data}(i)))}),{})}}]),e}();var cn=bt((function e(t,n,r){gt(this,e),this.status=t,this.statusText=n||"",this.data=r}));function ln(e){return e instanceof cn}var fn={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},hn={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function dn(e){Jt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");var t=qt(e.routes),n=null,r=new Set,i=null,a=null,o=null,u=!1,s=Kt(t,e.history.location,e.basename),c=null;if(null==s){var l=An(t),f=l.matches,h=l.route,d=l.error;s=f,c=Te({},h.id,d)}var p,v,y=!s.some((function(e){return e.route.loader}))||null!=e.hydrationData,m={historyAction:e.history.action,location:e.history.location,matches:s,initialized:y,navigation:fn,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||c,fetchers:new Map},g=it.Pop,k=!1,b=!1,w=!1,x=[],_=[],E=new Map,I=0,S=-1,T=new Map,A=new Set,C=new Map,N=new Map;function D(e){m=Lt({},m,e),r.forEach((function(e){return e(m)}))}function O(t,n){var r;D(Lt({},null!=m.actionData&&null!=m.navigation.formMethod&&"loading"===m.navigation.state&&(null==(r=m.navigation.formAction)?void 0:r.split("?")[0])===t.pathname?{}:{actionData:null},n,n.loaderData?{loaderData:Sn(m.loaderData,n.loaderData,n.matches||[])}:{},{historyAction:g,location:t,initialized:!0,navigation:fn,revalidation:"idle",restoreScrollPosition:!m.navigation.formData&&ne(t,n.matches||m.matches),preventScrollReset:k})),b||g===it.Pop||(g===it.Push?e.history.push(t,t.state):g===it.Replace&&e.history.replace(t,t.state)),g=it.Pop,k=!1,b=!1,w=!1,x=[],_=[]}function R(){return R=Ot(Nt().mark((function t(n,r){var i,a,o,u,s,c,l;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("number"!==typeof n){t.next=3;break}return e.history.go(n),t.abrupt("return");case 3:return i=pn(n,r),a=i.path,o=i.submission,u=i.error,s=jt(m.location,a,r&&r.state),c=!0===(r&&r.replace)||null!=o?it.Replace:it.Push,l=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,t.next=9,P(c,s,{submission:o,pendingError:u,preventScrollReset:l,replace:r&&r.replace});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}function P(e,t,n){return L.apply(this,arguments)}function L(){return L=Ot(Nt().mark((function n(r,i,a){var o,u,s,c,l,f,h,d,p,y,w,x,_,E,I;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v&&v.abort(),v=null,g=r,b=!0===(a&&a.startUninterruptedRevalidation),te(m.location,m.matches),k=!0===(a&&a.preventScrollReset),o=a&&a.overrideNavigation,u=Kt(t,i,e.basename)){n.next=13;break}return s=An(t),c=s.matches,l=s.route,f=s.error,ee(),O(i,{matches:c,loaderData:{},errors:Te({},l.id,f)}),n.abrupt("return");case 13:if(!On(m.location,i)){n.next=16;break}return O(i,{matches:u}),n.abrupt("return");case 16:if(v=new AbortController,h=xn(i,v.signal,a&&a.submission),!a||!a.pendingError){n.next=22;break}p=Te({},Tn(u).route.id,a.pendingError),n.next=32;break;case 22:if(!a||!a.submission){n.next=32;break}return n.next=25,M(h,i,a.submission,u,{replace:a.replace});case 25:if(!(y=n.sent).shortCircuited){n.next=28;break}return n.abrupt("return");case 28:d=y.pendingActionData,p=y.pendingActionError,w=Lt({state:"loading",location:i},a.submission),o=w;case 32:return n.next=34,U(h,i,u,o,a&&a.submission,a&&a.replace,d,p);case 34:if(x=n.sent,_=x.shortCircuited,E=x.loaderData,I=x.errors,!_){n.next=40;break}return n.abrupt("return");case 40:v=null,O(i,{matches:u,loaderData:E,errors:I});case 42:case"end":return n.stop()}}),n)}))),L.apply(this,arguments)}function M(e,t,n,r,i){return F.apply(this,arguments)}function F(){return F=Ot(Nt().mark((function e(t,n,r,i,a){var o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(),D({navigation:Lt({state:"submitting",location:n},r)}),(u=zn(i,n)).route.action){e.next=8;break}o=Cn(n),e.next=13;break;case 8:return e.next=10,bn("action",t,u);case 10:if(o=e.sent,!t.signal.aborted){e.next=13;break}return e.abrupt("return",{shortCircuited:!0});case 13:if(!Ln(o)){e.next=18;break}return s=Lt({state:"loading",location:jt(m.location,o.location)},r),e.next=17,q(o,s,a&&a.replace);case 17:return e.abrupt("return",{shortCircuited:!0});case 18:if(!Pn(o)){e.next=22;break}return c=Tn(i,u.route.id),!0!==(a&&a.replace)&&(g=it.Push),e.abrupt("return",{pendingActionError:Te({},c.route.id,o.error)});case 22:if(!Rn(o)){e.next=24;break}throw new Error("defer() is not supported in actions");case 24:return e.abrupt("return",{pendingActionData:Te({},u.route.id,o.data)});case 25:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function U(e,t,n,r,i,a,o,u){return j.apply(this,arguments)}function j(){return j=Ot(Nt().mark((function e(t,n,r,i,a,o,u,s){var c,l,f,h,d,p,y,g,k,T,A,R,P,L,M;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=i)||(c={state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0}),l=mn(m,r,a,n,w,x,_,u,s,C),f=vt(l,2),h=f[0],d=f[1],ee((function(e){return!(r&&r.some((function(t){return t.route.id===e})))||h&&h.some((function(t){return t.route.id===e}))})),0!==h.length||0!==d.length){e.next=7;break}return O(n,{matches:r,loaderData:Sn(m.loaderData,{},r),errors:s||null,actionData:u||null}),e.abrupt("return",{shortCircuited:!0});case 7:return b||(d.forEach((function(e){var t=vt(e,1)[0],n=m.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};m.fetchers.set(t,r)})),D(Lt({navigation:c,actionData:u||m.actionData||null},d.length>0?{fetchers:new Map(m.fetchers)}:{}))),S=++I,d.forEach((function(e){var t=vt(e,1)[0];return E.set(t,v)})),e.next=12,H(m.matches,h,d,t);case 12:if(p=e.sent,y=p.results,g=p.loaderResults,k=p.fetcherResults,!t.signal.aborted){e.next=18;break}return e.abrupt("return",{shortCircuited:!0});case 18:if(d.forEach((function(e){var t=vt(e,1)[0];return E.delete(t)})),!(T=Nn(y))){e.next=25;break}return A=vn(m,T),e.next=24,q(T,A,o);case 24:return e.abrupt("return",{shortCircuited:!0});case 25:return R=In(m,r,h,g,s,d,k,N),P=R.loaderData,L=R.errors,N.forEach((function(e,t){e.subscribe((function(n){(n||e.done)&&N.delete(t)}))})),J(),M=Z(S),e.abrupt("return",Lt({loaderData:P,errors:L},M||d.length>0?{fetchers:new Map(m.fetchers)}:{}));case 30:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function V(e){return m.fetchers.get(e)||hn}function B(){return B=Ot(Nt().mark((function n(r,i,a,o,u){var s,c,l,f,h,d,p,y,k,b,R,P,L,M,F,U,j,V,B,z,K,W,Y,X,$,J,ee,te;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(G(),C.delete(r),o.route.action){n.next=6;break}return s=Cn(a),c=s.error,Q(r,i,c),n.abrupt("return");case 6:return l=m.fetchers.get(r),f=Lt({state:"submitting"},u,{data:l&&l.data}),m.fetchers.set(r,f),D({fetchers:new Map(m.fetchers)}),h=new AbortController,d=xn(a,h.signal,u),E.set(r,h),n.next=15,bn("action",d,o);case 15:if(p=n.sent,!d.signal.aborted){n.next=19;break}return E.get(r)===h&&E.delete(r),n.abrupt("return");case 19:if(!Ln(p)){n.next=29;break}return E.delete(r),A.add(r),y=Lt({state:"loading"},u,{data:void 0}),m.fetchers.set(r,y),D({fetchers:new Map(m.fetchers)}),k=Lt({state:"loading",location:jt(m.location,p.location)},u),n.next=28,q(p,k);case 28:return n.abrupt("return");case 29:if(!Pn(p)){n.next=32;break}return Q(r,i,p.error),n.abrupt("return");case 32:return Rn(p)&&Jt(!1,"defer() is not supported in actions"),b=m.navigation.location||m.location,R=xn(b,h.signal),Jt(P="idle"!==m.navigation.state?Kt(t,m.navigation.location,e.basename):m.matches,"Didn't find any matches after fetcher action"),L=++I,T.set(r,L),M=Lt({state:"loading",data:p.data},u),m.fetchers.set(r,M),F=mn(m,P,u,b,w,x,_,Te({},o.route.id,p.data),void 0,C),U=vt(F,2),j=U[0],(V=U[1]).filter((function(e){return vt(e,1)[0]!==r})).forEach((function(e){var t=vt(e,1)[0],n=m.fetchers.get(t),r={state:"loading",data:n&&n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};m.fetchers.set(t,r),E.set(t,h)})),D({fetchers:new Map(m.fetchers)}),n.next=46,H(m.matches,j,V,R);case 46:if(B=n.sent,z=B.results,K=B.loaderResults,W=B.fetcherResults,!h.signal.aborted){n.next=52;break}return n.abrupt("return");case 52:if(T.delete(r),E.delete(r),V.forEach((function(e){var t=vt(e,1)[0];return E.delete(t)})),!(Y=Nn(z))){n.next=61;break}return k=vn(m,Y),n.next=60,q(Y,k);case 60:return n.abrupt("return");case 61:X=In(m,m.matches,j,K,void 0,V,W,N),$=X.loaderData,J=X.errors,ee={state:"idle",data:p.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},m.fetchers.set(r,ee),te=Z(L),"loading"===m.navigation.state&&L>S?(Jt(g,"Expected pending action"),v&&v.abort(),O(m.navigation.location,{matches:P,loaderData:$,errors:J,fetchers:new Map(m.fetchers)})):(D(Lt({errors:J,loaderData:Sn(m.loaderData,$,P)},te?{fetchers:new Map(m.fetchers)}:{})),w=!1);case 66:case"end":return n.stop()}}),n)}))),B.apply(this,arguments)}function z(){return(z=Ot(Nt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.fetchers.get(t),o={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:a&&a.data},m.fetchers.set(t,o),D({fetchers:new Map(m.fetchers)}),u=new AbortController,s=xn(r,u.signal),E.set(t,u),e.next=9,bn("loader",s,i);case 9:if(!Rn(c=e.sent)){e.next=17;break}return e.next=13,Un(c,s.signal,!0);case 13:if(e.t0=e.sent,e.t0){e.next=16;break}e.t0=c;case 16:c=e.t0;case 17:if(E.get(t)===u&&E.delete(t),!s.signal.aborted){e.next=20;break}return e.abrupt("return");case 20:if(!Ln(c)){e.next=25;break}return l=vn(m,c),e.next=24,q(c,l);case 24:return e.abrupt("return");case 25:if(!Pn(c)){e.next=30;break}return f=Tn(m.matches,n),m.fetchers.delete(t),D({fetchers:new Map(m.fetchers),errors:Te({},f.route.id,c.error)}),e.abrupt("return");case 30:Jt(!Rn(c),"Unhandled fetcher deferred data"),h={state:"idle",data:c.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},m.fetchers.set(t,h),D({fetchers:new Map(m.fetchers)});case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n){return K.apply(this,arguments)}function K(){return K=Ot(Nt().mark((function e(t,n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.revalidate&&(w=!0),Jt(n.location,"Expected a location on the redirect navigation"),v=null,i=!0===r?it.Replace:it.Push,e.next=6,P(i,n.location,{overrideNavigation:n});case 6:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function H(e,t,n,r){return W.apply(this,arguments)}function W(){return W=Ot(Nt().mark((function e(t,n,r,i){var a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([].concat(mt(n.map((function(e){return bn("loader",i,e)}))),mt(r.map((function(e){var t=vt(e,3),n=t[1],r=t[2];return bn("loader",xn(n,i.signal),r)})))));case 2:return a=e.sent,o=a.slice(0,n.length),u=a.slice(n.length),e.next=7,Promise.all([Mn(t,n,o,i.signal,!1,m.loaderData),Mn(t,r.map((function(e){return vt(e,3)[2]})),u,i.signal,!0)]);case 7:return e.abrupt("return",{results:a,loaderResults:o,fetcherResults:u});case 8:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function G(){var e;w=!0,(e=x).push.apply(e,mt(ee())),C.forEach((function(e,t){E.has(t)&&(_.push(t),X(t))}))}function Q(e,t,n){var r=Tn(m.matches,t);Y(e),D({errors:Te({},r.route.id,n),fetchers:new Map(m.fetchers)})}function Y(e){E.has(e)&&X(e),C.delete(e),T.delete(e),A.delete(e),m.fetchers.delete(e)}function X(e){var t=E.get(e);Jt(t,"Expected fetch controller: "+e),t.abort(),E.delete(e)}function $(e){var t,n=Ct(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i={state:"idle",data:V(r).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};m.fetchers.set(r,i)}}catch(a){n.e(a)}finally{n.f()}}function J(){var e,t=[],n=Ct(A);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=m.fetchers.get(r);Jt(i,"Expected fetcher: "+r),"loading"===i.state&&(A.delete(r),t.push(r))}}catch(a){n.e(a)}finally{n.f()}$(t)}function Z(e){var t,n=[],r=Ct(T);try{for(r.s();!(t=r.n()).done;){var i=vt(t.value,2),a=i[0];if(i[1]<e){var o=m.fetchers.get(a);Jt(o,"Expected fetcher: "+a),"loading"===o.state&&(X(a),T.delete(a),n.push(a))}}}catch(u){r.e(u)}finally{r.f()}return $(n),n.length>0}function ee(e){var t=[];return N.forEach((function(n,r){e&&!e(r)||(n.cancel(),t.push(r),N.delete(r))})),t}function te(e,t){if(i&&a&&o){var n=t.map((function(e){return Bn(e,m.loaderData)})),r=a(e,n)||e.key;i[r]=o()}}function ne(e,t){if(i&&a&&o){var n=t.map((function(e){return Bn(e,m.loaderData)})),r=a(e,n)||e.key,u=i[r];if("number"===typeof u)return u}return null}return p={get basename(){return e.basename},get state(){return m},get routes(){return t},initialize:function(){return n=e.history.listen((function(e){return P(e.action,e.location)})),m.initialized||P(it.Pop,m.location),p},subscribe:function(e){return r.add(e),function(){return r.delete(e)}},enableScrollRestoration:function(e,t,n){if(i=e,o=t,a=n||function(e){return e.key},!u&&m.navigation===fn){u=!0;var r=ne(m.location,m.matches);null!=r&&D({restoreScrollPosition:r})}return function(){i=null,o=null,a=null}},navigate:function(e,t){return R.apply(this,arguments)},fetch:function(n,r,i,a){if("undefined"===typeof AbortController)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");E.has(n)&&X(n);var o=Kt(t,i,e.basename);if(o){var u=pn(i,a,!0),s=u.path,c=u.submission,l=zn(o,s);c?function(e,t,n,r,i){B.apply(this,arguments)}(n,r,s,l,c):(C.set(n,[s,l]),function(e,t,n,r){z.apply(this,arguments)}(n,r,s,l))}else Q(n,r,new cn(404,"Not Found",null))},revalidate:function(){G(),D({revalidation:"loading"}),"submitting"!==m.navigation.state&&("idle"!==m.navigation.state?P(g||m.historyAction,m.navigation.location,{overrideNavigation:m.navigation}):P(m.historyAction,m.location,{startUninterruptedRevalidation:!0}))},createHref:Dn,getFetcher:V,deleteFetcher:Y,dispose:function(){n&&n(),r.clear(),v&&v.abort(),m.fetchers.forEach((function(e,t){return Y(t)}))},_internalFetchControllers:E,_internalActiveDeferreds:N},p}function pn(e,t,n){void 0===n&&(n=!1);var r="string"===typeof e?e:Vt(e);if(!t||!("formMethod"in t)&&!("formData"in t))return{path:r};if(null!=t.formMethod&&"get"!==t.formMethod)return{path:r,submission:{formMethod:t.formMethod,formAction:Dn(Bt(r)),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};if(!t.formData)return{path:r};var i=Bt(r);try{var a=_n(t.formData);n&&i.search&&Vn(i.search)&&a.append("index",""),i.search="?"+a}catch(o){return{path:r,error:new cn(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Vt(i)}}function vn(e,t){var n=e.navigation,r=n.formMethod,i=n.formAction,a=n.formEncType,o=n.formData;return{state:"loading",location:jt(e.location,t.location),formMethod:r||void 0,formAction:i||void 0,formEncType:a||void 0,formData:o||void 0}}function yn(e,t){var n=e;if(t){var r=e.findIndex((function(e){return e.route.id===t}));r>=0&&(n=e.slice(0,r))}return n}function mn(e,t,n,r,i,a,o,u,s,c){var l=s?Object.values(s)[0]:u?Object.values(u)[0]:null,f=yn(t,s?Object.keys(s)[0]:void 0).filter((function(t,o){return null!=t.route.loader&&(function(e,t,n){var r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(e.loaderData,e.matches[o],t)||a.some((function(e){return e===t.route.id}))||kn(e.location,e.matches[o],n,r,t,i,l))})),h=[];return c&&c.forEach((function(e,t){var r=vt(e,2),a=r[0],u=r[1];if(o.includes(t))h.push([t,a,u]);else if(i){kn(a,u,n,a,u,i,l)&&h.push([t,a,u])}})),[f,h]}function gn(e,t){var n=e.route.path;return e.pathname!==t.pathname||n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function kn(e,t,n,r,i,a,o){var u=qn(e),s=t.params,c=qn(r),l=i.params,f=gn(t,i)||u.toString()===c.toString()||u.search!==c.search||a;if(i.route.shouldRevalidate){var h=i.route.shouldRevalidate(Lt({currentUrl:u,currentParams:s,nextUrl:c,nextParams:l},n,{actionResult:o,defaultShouldRevalidate:f}));if("boolean"===typeof h)return h}return f}function bn(e,t,n,r,i){return wn.apply(this,arguments)}function wn(){return wn=Ot(Nt().mark((function e(t,n,r,i,a){var o,u,s,c,l,f,h,d,p,v;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i=!1),void 0===a&&(a=!1),c=new Promise((function(e,t){return s=t})),l=function(){return s()},n.signal.addEventListener("abort",l),e.prev=5,Jt(f=r.route[t],"Could not find the "+t+' to run on the "'+r.route.id+'" route'),e.next=10,Promise.race([f({request:n,params:r.params}),c]);case 10:u=e.sent,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),o=Mt.error,u=e.t0;case 17:return e.prev=17,n.signal.removeEventListener("abort",l),e.finish(17);case 20:if(!(u instanceof Response)){e.next=42;break}if(h=u.status,d=u.headers.get("Location"),!a){e.next=25;break}throw u;case 25:if(!(h>=300&&h<=399&&null!=d)){e.next=29;break}if(!i){e.next=28;break}throw u;case 28:return e.abrupt("return",{type:Mt.redirect,status:h,location:d,revalidate:null!==u.headers.get("X-Remix-Revalidate")});case 29:if(!(v=u.headers.get("Content-Type"))||!v.startsWith("application/json")){e.next=36;break}return e.next=33,u.json();case 33:p=e.sent,e.next=39;break;case 36:return e.next=38,u.text();case 38:p=e.sent;case 39:if(o!==Mt.error){e.next=41;break}return e.abrupt("return",{type:o,error:new cn(h,u.statusText,p),headers:u.headers});case 41:return e.abrupt("return",{type:Mt.data,data:p,statusCode:u.status,headers:u.headers});case 42:if(o!==Mt.error){e.next=44;break}return e.abrupt("return",{type:o,error:u});case 44:if(!(u instanceof sn)){e.next=46;break}return e.abrupt("return",{type:Mt.deferred,deferredData:u});case 46:return e.abrupt("return",{type:Mt.data,data:u});case 47:case"end":return e.stop()}}),e,null,[[5,13,17,20]])}))),wn.apply(this,arguments)}function xn(e,t,n){var r=qn(e).toString(),i={signal:t};if(n){var a=n.formMethod,o=n.formEncType,u=n.formData;i.method=a.toUpperCase(),i.body="application/x-www-form-urlencoded"===o?_n(u):u}return new Request(r,i)}function _n(e){var t,n=new URLSearchParams,r=Ct(e.entries());try{for(r.s();!(t=r.n()).done;){var i=vt(t.value,2),a=i[0],o=i[1];Jt("string"===typeof o,'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),n.append(a,o)}}catch(u){r.e(u)}finally{r.f()}return n}function En(e,t,n,r,i){var a,o={},u=null,s=!1,c={};return n.forEach((function(n,l){var f=t[l].route.id;if(Jt(!Ln(n),"Cannot handle redirect results in processLoaderData"),Pn(n)){var h=Tn(e,f),d=n.error;r&&(d=Object.values(r)[0],r=void 0),u=Object.assign(u||{},Te({},h.route.id,d)),s||(s=!0,a=ln(n.error)?n.error.status:500),n.headers&&(c[f]=n.headers)}else Rn(n)?(i&&i.set(f,n.deferredData),o[f]=n.deferredData.data):(o[f]=n.data,null==n.statusCode||200===n.statusCode||s||(a=n.statusCode),n.headers&&(c[f]=n.headers))})),r&&(u=r),{loaderData:o,errors:u,statusCode:a||200,loaderHeaders:c}}function In(e,t,n,r,i,a,o,u){for(var s=En(t,n,r,i,u),c=s.loaderData,l=s.errors,f=0;f<a.length;f++){var h=vt(a[f],3),d=h[0],p=h[2];Jt(void 0!==o&&void 0!==o[f],"Did not find corresponding fetcher result");var v=o[f];if(Pn(v)){var y=Tn(e.matches,p.route.id);l&&l[y.route.id]||(l=Lt({},l,Te({},y.route.id,v.error))),e.fetchers.delete(d)}else{if(Ln(v))throw new Error("Unhandled fetcher revalidation redirect");if(Rn(v))throw new Error("Unhandled fetcher deferred data");var m={state:"idle",data:v.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(d,m)}}return{loaderData:c,errors:l}}function Sn(e,t,n){var r=Lt({},t);return n.forEach((function(n){var i=n.route.id;void 0===t[i]&&void 0!==e[i]&&(r[i]=e[i])})),r}function Tn(e,t){var n=t?e.slice(0,e.findIndex((function(e){return e.route.id===t}))+1):mt(e);return n.reverse().find((function(e){return!0===e.route.hasErrorBoundary}))||e[0]}function An(e){var t=e.find((function(e){return e.index||""===e.path||"/"===e.path}))||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t,error:new cn(404,"Not Found",null)}}function Cn(e){var t="string"===typeof e?e:Dn(e);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for ["+t+"]"),{type:Mt.error,error:new cn(405,"Method Not Allowed","No action found for ["+t+"]")}}function Nn(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(Ln(n))return n}}function Dn(e){return(e.pathname||"")+(e.search||"")}function On(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function Rn(e){return e.type===Mt.deferred}function Pn(e){return e.type===Mt.error}function Ln(e){return(e&&e.type)===Mt.redirect}function Mn(e,t,n,r,i,a){return Fn.apply(this,arguments)}function Fn(){return Fn=Ot(Nt().mark((function e(t,n,r,i,a,o){var u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=Nt().mark((function e(u){var s,c,l,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r[u],c=n[u],l=t.find((function(e){return e.route.id===c.route.id})),f=null!=l&&!gn(l,c)&&void 0!==(o&&o[c.route.id]),!Rn(s)||!a&&!f){e.next=7;break}return e.next=7,Un(s,i,a).then((function(e){e&&(r[u]=e||r[u])}));case 7:case"end":return e.stop()}}),e)})),s=0;case 2:if(!(s<r.length)){e.next=7;break}return e.delegateYield(u(s),"t0",4);case 4:s++,e.next=2;break;case 7:case"end":return e.stop()}}),e)}))),Fn.apply(this,arguments)}function Un(e,t,n){return jn.apply(this,arguments)}function jn(){return jn=Ot(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),e.next=3,t.deferredData.resolveData(n);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!r){e.next=14;break}return e.prev=7,e.abrupt("return",{type:Mt.data,data:t.deferredData.unwrappedData});case 11:return e.prev=11,e.t0=e.catch(7),e.abrupt("return",{type:Mt.error,error:e.t0});case 14:return e.abrupt("return",{type:Mt.data,data:t.deferredData.data});case 15:case"end":return e.stop()}}),e,null,[[7,11]])}))),jn.apply(this,arguments)}function Vn(e){return new URLSearchParams(e).getAll("index").some((function(e){return""===e}))}function Bn(e,t){var n=e.route,r=e.pathname,i=e.params;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function zn(e,t){var n="string"===typeof t?Bt(t).search:t.search;return e[e.length-1].route.index&&!Vn(n||"")?e.slice(-2)[0]:e.slice(-1)[0]}function qn(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location?window.location.origin:"unknown://unknown",n="string"===typeof e?e:Dn(e);return new URL(n,t)}function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kn.apply(this,arguments)}var Hn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Wn=t.useState,Gn=t.useEffect,Qn=t.useLayoutEffect,Yn=t.useDebugValue;function Xn(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Hn(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var $n=r.useSyncExternalStore,Jn=t.createContext(null);var Zn=t.createContext(null);var er=t.createContext(null);var tr=t.createContext(null);var nr=t.createContext(null);var rr=t.createContext(null);var ir=t.createContext({outlet:null,matches:[]});var ar=t.createContext(null);function or(){return null!=t.useContext(rr)}function ur(){return or()||Jt(!1),t.useContext(rr).location}function sr(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function cr(){or()||Jt(!1);var e=t.useContext(nr),n=e.basename,r=e.navigator,i=t.useContext(ir).matches,a=ur().pathname,o=JSON.stringify(sr(i).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);t.useEffect((function(){u.current=!0}));var s=t.useCallback((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=tn(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:nn([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return s}function lr(){var e=function(){var e,n=t.useContext(ar),r=yr(hr.UseRouteError),i=t.useContext(ir),a=i.matches[i.matches.length-1];if(n)return n;return i||Jt(!1),!a.route.id&&Jt(!1),null==(e=r.errors)?void 0:e[a.route.id]}(),n=ln(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",t.createElement("code",{style:o},"errorElement")," props on\xa0",t.createElement("code",{style:o},"<Route>")))}var fr,hr,dr=function(e){xt(r,e);var n=At(r);function r(e){var t;return gt(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return bt(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(ar.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function pr(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(Jn);return a&&r.route.errorElement&&(a._deepestRenderedBoundaryId=r.route.id),t.createElement(ir.Provider,{value:n},i)}function vr(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||Jt(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||t.createElement(lr,null):null,l=function(){return t.createElement(pr,{match:o,routeContext:{outlet:e,matches:n.concat(i.slice(0,u+1))}},s?c:void 0!==o.route.element?o.route.element:e)};return r&&(o.route.errorElement||0===u)?t.createElement(dr,{location:r.location,component:c,error:s,children:l()}):l()}),null)}function yr(e){var n=t.useContext(er);return n||Jt(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(fr||(fr={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(hr||(hr={}));var mr;function gr(e){var n=e.fallbackElement,r=e.router,i=$n(r.subscribe,(function(){return r.state}),(function(){return r.state})),a=t.useMemo((function(){return{createHref:r.createHref,go:function(e){return r.navigate(e)},push:function(e,t,n){return r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})},replace:function(e,t,n){return r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})}}}),[r]),o=r.basename||"/";return t.createElement(Zn.Provider,{value:{router:r,navigator:a,static:!1,basename:o}},t.createElement(er.Provider,{value:i},t.createElement(br,{basename:r.basename,location:r.state.location,navigationType:r.state.historyAction,navigator:a},r.state.initialized?t.createElement(wr,null):n)))}function kr(e){Jt(!1)}function br(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?it.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;or()&&Jt(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=Bt(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,E=void 0===_?"default":_,I=t.useMemo((function(){var e=$t(y,h);return null==e?null:{pathname:e,search:g,hash:b,state:x,key:E}}),[h,y,g,b,x,E]);return null==I?null:t.createElement(nr.Provider,{value:d},t.createElement(rr.Provider,{children:a,value:{location:I,navigationType:s}}))}function wr(e){var n=e.children,r=e.location,i=t.useContext(Zn);return function(e,n){or()||Jt(!1);var r,i=t.useContext(er),a=t.useContext(ir).matches,o=a[a.length-1],u=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,ur());if(n){var l,f="string"===typeof n?Bt(n):n;"/"===s||(null==(l=f.pathname)?void 0:l.startsWith(s))||Jt(!1),r=f}else r=c;var h=r.pathname||"/",d=Kt(e,{pathname:"/"===s?h:h.slice(s.length)||"/"}),p=vr(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:nn([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:nn([s,e.pathnameBase])})})),a,i||void 0);return n?t.createElement(rr.Provider,{value:{location:Kn({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:it.Pop}},p):p}(i&&!n?i.router.routes:_r(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(mr||(mr={}));var xr=new Promise((function(){}));t.Component;function _r(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e))if(e.type!==t.Fragment){e.type!==kr&&Jt(!1),e.props.index&&e.props.children&&Jt(!1);var a=[].concat(mt(n),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=_r(e.props.children,a)),r.push(o)}else r.push.apply(r,_r(e.props.children,n))})),r}function Er(e){return e.map((function(e){var t=Kn({},e);return null==t.hasErrorBoundary&&(t.hasErrorBoundary=null!=t.errorElement),t.children&&(t.children=Er(t.children)),t}))}var Ir=n(184);var Sr=function(){var e=vt((0,t.useState)(!1),2),n=e[0],r=e[1],i=cr(),a=function(){window.scrollY>100?r(!0):r(!1)};return(0,t.useEffect)((function(){return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}}),[]),(0,Ir.jsx)("div",{className:"nav ".concat(n&&"nav__black"),children:(0,Ir.jsxs)("div",{className:"nav__contents",children:[(0,Ir.jsx)("img",{onClick:function(){return i("/")},className:"nav__logo",src:"https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png",alt:""}),(0,Ir.jsx)("img",{onClick:function(){return i("/profile")},className:"nav__avatar",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEUNfoD///8Ae30AeHoAdXcAdnl6q6z2+/vo8vLx+Ph1sbIAdHfu9PQHfH8AgYPl8vI7kJKRvr+hx8jO4+PJ3d4eioxppqja6eni7OxdoqRSnqC42dqXxsaw09Ntra8ph4l/uLmGtrdapqeozc02lZdMmZuuzM3A2NnU4+SRvL2fy8xSmZpEkZO+1NV1qaqNxlfBAAAEIElEQVR4nO3bXXeiOhQGYNgJg6AiiIiggtbP0U7//8+beJzjoCYtSAQ7630uetVmvZuEEOnWMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAvjNi3Ii8rkWtpuiLGCyKxA/dOchIZ3FPmGc5tVckGf4iPMUIA9/QGYNoEZr/c4Y+0zh2FSydX2KY00RfDDJ2ZlEnbadEa+EUYziBrlkkPzav2W4rJc5vYphzTQPTbYGixBZmkc/uYphDPTG29yObHb/p7YYSSQxzqSEGJbZs6FX9kavJQ1mMQV6/RDaVjWzaDU8i/ZDGMBf116knH1nH0FUoLrQ5qR2D3hQVhl0dwUvjihh2VHctsZVqaC3By6K1IoaZ1a2Qj5QXr68leznKpWQu6y5Tfv8wbKXC7HkV7hQjN1xh+rQKmeQkca6w0acFRaoKa9+HyosXci3Ry7Kk5w4de6lhKCps+nl4d+w+q/88VD0uHA3HpSpoLJ/ErH6FdHRkIw+b3GdOPOljK841DE2yvWaiYflXjLGWTKLtaolB9w8Me938uxq+uC8x0LMZUHRboqNh9T+QY3lb4ErXrUL92dXli6N23tPwt04xRsfV+MCi5O+Hl8Gy4W20EMMvXOrhRut1Jsrd+WQy2c82Wt9TVo7hpatY5FhlhvbXtsQsLmh/11w9x0vEAAAAAAAAAAAAAAAAgH8KMc/4l/8HRXyz3e2GLf07uqD/nO+fkLHZ2eeWgnZnkVi0ifSvJOLJpUXKTtoskfxdp9fZb7TWSETprtA50XCD3RWW/Qky19dUQCx3b7r2PV1jV+dd+sU6M88iDc0v1I2Cu5bextuzLqyrdrGgdhOHmL6xrGM/0hP3EfurIM42YY/fkMRYOpR2ZDvt3Yfe/iaLPVn4j7TBiL0l9xexooe24UbXIkvWL7n7uSGryh1JjEfjofQrQefV/7T8X2OuNFIvnq3FmisxlyR+zYoWo4Fi9oRB1kAhapbyytvT4OM9OpUpr1PUZhnR8SOYqosT4sxq99AmHvifxBuEo2G2iXiXc1bEeddYp8vtaN/55K9P9bntH0qJZV+kFHrh9HAI3P8sDodVqL7nCuzwrc0Wwr9YFEjbxGuy5+MWv1F+jcgPPr2XHtAL3l9j/v4Qny+CUguvHGfnvt7n3r44LSu+IFnVIDgarW8vUsSjmepQUnr24iB65dZZYt54NXi8vtEw9V64vDOx/fmHuPre6vSmWa6/r/s5xDls7W7D8lU64fZn6vFvUt4ZMcrfk2D69VnAmQbj95xefm3KiHMn73prN/g1CuO441zm1HacQRyHo19Btva6vMz5/JWd6jQ83z8mx48fZ8kx2fi5R9++tiKiPl1rOxEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALy43/ipMgzSotaqAAAAAElFTkSuQmCC",alt:""})]})})};function Tr(e,t){return function(){return e.apply(t,arguments)}}var Ar,Cr=Object.prototype.toString,Nr=Object.getPrototypeOf,Dr=(Ar=Object.create(null),function(e){var t=Cr.call(e);return Ar[t]||(Ar[t]=t.slice(8,-1).toLowerCase())}),Or=function(e){return e=e.toLowerCase(),function(t){return Dr(t)===e}},Rr=function(e){return function(t){return typeof t===e}},Pr=Array.isArray,Lr=Rr("undefined");var Mr=Or("ArrayBuffer");var Fr=Rr("string"),Ur=Rr("function"),jr=Rr("number"),Vr=function(e){return null!==e&&"object"===typeof e},Br=function(e){if("object"!==Dr(e))return!1;var t=Nr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zr=Or("Date"),qr=Or("File"),Kr=Or("Blob"),Hr=Or("FileList"),Wr=Or("URLSearchParams");function Gr(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Pr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var u,s=o?Object.getOwnPropertyNames(e):Object.keys(e),c=s.length;for(n=0;n<c;n++)u=s[n],t.call(null,e[u],u,e)}}var Qr,Yr=(Qr="undefined"!==typeof Uint8Array&&Nr(Uint8Array),function(e){return Qr&&e instanceof Qr}),Xr=Or("HTMLFormElement"),$r=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),Jr=Or("RegExp"),Zr=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};Gr(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},ei={isArray:Pr,isArrayBuffer:Mr,isBuffer:function(e){return null!==e&&!Lr(e)&&null!==e.constructor&&!Lr(e.constructor)&&Ur(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||Cr.call(e)===t||Ur(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Mr(e.buffer)},isString:Fr,isNumber:jr,isBoolean:function(e){return!0===e||!1===e},isObject:Vr,isPlainObject:Br,isUndefined:Lr,isDate:zr,isFile:qr,isBlob:Kr,isRegExp:Jr,isFunction:Ur,isStream:function(e){return Vr(e)&&Ur(e.pipe)},isURLSearchParams:Wr,isTypedArray:Yr,isFileList:Hr,forEach:Gr,merge:function e(){for(var t={},n=function(n,r){Br(t[r])&&Br(n)?t[r]=e(t[r],n):Br(n)?t[r]=e({},n):Pr(n)?t[r]=n.slice():t[r]=n},r=0,i=arguments.length;r<i;r++)arguments[r]&&Gr(arguments[r],n);return t},extend:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.allOwnKeys;return Gr(t,(function(t,r){n&&Ur(t)?e[r]=Tr(t,n):e[r]=t}),{allOwnKeys:i}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&Nr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Dr,kindOfTest:Or,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(Pr(e))return e;var t=e.length;if(!jr(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Xr,hasOwnProperty:$r,hasOwnProp:$r,reduceDescriptors:Zr,freezeMethods:function(e){Zr(e,(function(t,n){var r=e[n];Ur(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return Pr(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t}};function ti(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}ei.inherits(ti,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var ni=ti.prototype,ri={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){ri[e]={value:e}})),Object.defineProperties(ti,ri),Object.defineProperty(ni,"isAxiosError",{value:!0}),ti.from=function(e,t,n,r,i,a){var o=Object.create(ni);return ei.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),ti.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var ii=ti,ai=n(472);function oi(e){return ei.isPlainObject(e)||ei.isArray(e)}function ui(e){return ei.endsWith(e,"[]")?e.slice(0,-2):e}function si(e,t,n){return e?e.concat(t).map((function(e,t){return e=ui(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var ci=ei.toFlatObject(ei,{},null,(function(e){return/^is[A-Z]/.test(e)}));var li=function(e,t,n){if(!ei.isObject(e))throw new TypeError("target must be an object");t=t||new(ai||FormData);var r,i=(n=ei.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ei.isUndefined(t[e])}))).metaTokens,a=n.visitor||l,o=n.dots,u=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&((r=t)&&ei.isFunction(r.append)&&"FormData"===r[Symbol.toStringTag]&&r[Symbol.iterator]);if(!ei.isFunction(a))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(ei.isDate(e))return e.toISOString();if(!s&&ei.isBlob(e))throw new ii("Blob is not supported. Use a Buffer instead.");return ei.isArrayBuffer(e)||ei.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){var a=e;if(e&&!r&&"object"===typeof e)if(ei.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(ei.isArray(e)&&function(e){return ei.isArray(e)&&!e.some(oi)}(e)||ei.isFileList(e)||ei.endsWith(n,"[]")&&(a=ei.toArray(e)))return n=ui(n),a.forEach((function(e,r){!ei.isUndefined(e)&&t.append(!0===u?si([n],r,o):null===u?n:n+"[]",c(e))})),!1;return!!oi(e)||(t.append(si(r,n,o),c(e)),!1)}var f=[],h=Object.assign(ci,{defaultVisitor:l,convertValue:c,isVisitable:oi});if(!ei.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!ei.isUndefined(n)){if(-1!==f.indexOf(n))throw Error("Circular reference detected in "+r.join("."));f.push(n),ei.forEach(n,(function(n,i){!0===(!ei.isUndefined(n)&&a.call(t,n,ei.isString(i)?i.trim():i,r,h))&&e(n,r?r.concat(i):[i])})),f.pop()}}(e),t};function fi(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function hi(e,t){this._pairs=[],e&&li(e,this,t)}var di=hi.prototype;di.append=function(e,t){this._pairs.push([e,t])},di.toString=function(e){var t=e?function(t){return e.call(this,t,fi)}:fi;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var pi=hi;function vi(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yi(e,t,n){if(!t)return e;var r=e.indexOf("#");-1!==r&&(e=e.slice(0,r));var i=n&&n.encode||vi,a=ei.isURLSearchParams(t)?t.toString():new pi(t,n).toString(i);return a&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}var mi=function(){function e(){gt(this,e),this.handlers=[]}return bt(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){ei.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),gi=mi,ki={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bi="undefined"!==typeof URLSearchParams?URLSearchParams:pi,wi=FormData,xi=function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),_i={isBrowser:!0,classes:{URLSearchParams:bi,FormData:wi,Blob:Blob},isStandardBrowserEnv:xi,protocols:["http","https","file","blob","url","data"]};var Ei=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&ei.isArray(r)?r.length:a,u?(ei.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&ei.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&ei.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(ei.isFormData(e)&&ei.isFunction(e.entries)){var n={};return ei.forEachEntry(e,(function(e,r){t(function(e){return ei.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var Ii=_i.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),ei.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ei.isString(r)&&o.push("path="+r),ei.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Si(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ti=_i.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=ei.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function Ai(e,t,n){ii.call(this,null==e?"canceled":e,ii.ERR_CANCELED,t,n),this.name="CanceledError"}ei.inherits(Ai,ii,{__CANCEL__:!0});var Ci=Ai;var Ni=ei.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Di=Symbol("internals"),Oi=Symbol("defaults");function Ri(e){return e&&String(e).trim().toLowerCase()}function Pi(e){return!1===e||null==e?e:String(e)}function Li(e,t,n,r){return ei.isFunction(r)?r.call(this,t,n):ei.isString(t)?ei.isString(r)?-1!==t.indexOf(r):ei.isRegExp(r)?r.test(t):void 0:void 0}function Mi(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}function Fi(e,t){e&&this.set(e),this[Oi]=t||null}Object.assign(Fi.prototype,{set:function(e,t,n){var r=this;function i(e,t,n){var i=Ri(t);if(!i)throw new Error("header name must be a non-empty string");var a=Mi(r,i);(!a||!0===n||!1!==r[a]&&!1!==n)&&(e=ei.isArray(e)?e.map(Pi):Pi(e),r[a||t]=e)}return ei.isPlainObject(e)?ei.forEach(e,(function(e,n){i(e,n,t)})):i(t,e,n),this},get:function(e,t){if(e=Ri(e)){var n=Mi(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(ei.isFunction(t))return t.call(this,r,n);if(ei.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}},has:function(e,t){if(e=Ri(e)){var n=Mi(this,e);return!(!n||t&&!Li(0,this[n],n,t))}return!1},delete:function(e,t){var n=this,r=!1;function i(e){if(e=Ri(e)){var i=Mi(n,e);!i||t&&!Li(0,n[i],i,t)||(delete n[i],r=!0)}}return ei.isArray(e)?e.forEach(i):i(e),r},clear:function(){return Object.keys(this).forEach(this.delete.bind(this))},normalize:function(e){var t=this,n={};return ei.forEach(this,(function(r,i){var a=Mi(n,i);if(a)return t[a]=Pi(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Pi(r),n[o]=!0})),this},toJSON:function(){var e=Object.create(null);return ei.forEach(Object.assign({},this[Oi]||null,this),(function(t,n){null!=t&&!1!==t&&(e[n]=ei.isArray(t)?t.join(", "):t)})),e}}),Object.assign(Fi,{from:function(e){return ei.isString(e)?new this(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Ni[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e)):e instanceof this?e:new this(e)},accessor:function(e){var t=(this[Di]=this[Di]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Ri(e);t[r]||(!function(e,t){var n=ei.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return ei.isArray(e)?e.forEach(r):r(e),this}}),Fi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),ei.freezeMethods(Fi.prototype),ei.freezeMethods(Fi);var Ui=Fi;var ji=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function Vi(e,t){var n=0,r=ji(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0};c[t?"download":"upload"]=!0,e(c)}}function Bi(e){return new Promise((function(t,n){var r,i=e.data,a=Ui.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}ei.isFormData(i)&&_i.isStandardBrowserEnv&&a.setContentType(!1);var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var f=Si(e.baseURL,e.url);function h(){if(s){var r=Ui.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ii("Request failed with status code "+n.status,[ii.ERR_BAD_REQUEST,ii.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),yi(f,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=h:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(h)},s.onabort=function(){s&&(n(new ii("Request aborted",ii.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new ii("Network Error",ii.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||ki;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ii(t,r.clarifyTimeoutError?ii.ETIMEDOUT:ii.ECONNABORTED,e,s)),s=null},_i.isStandardBrowserEnv){var d=(e.withCredentials||Ti(f))&&e.xsrfCookieName&&Ii.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&ei.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),ei.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",Vi(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",Vi(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new Ci(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===_i.protocols.indexOf(p)?n(new ii("Unsupported protocol "+p+":",ii.ERR_BAD_REQUEST,e)):s.send(i||null)}))}var zi={http:Bi,xhr:Bi},qi=function(e){if(ei.isString(e)){var t=zi[e];if(!e)throw Error(ei.hasOwnProp(e)?"Adapter '".concat(e,"' is not available in the build"):"Can not resolve adapter '".concat(e,"'"));return t}if(!ei.isFunction(e))throw new TypeError("adapter is not a function");return e},Ki={"Content-Type":"application/x-www-form-urlencoded"};var Hi={transitional:ki,adapter:function(){var e;return"undefined"!==typeof XMLHttpRequest?e=qi("xhr"):"undefined"!==typeof process&&"process"===ei.kindOf(process)&&(e=qi("http")),e}(),transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=ei.isObject(e);if(a&&ei.isHTMLForm(e)&&(e=new FormData(e)),ei.isFormData(e))return i&&i?JSON.stringify(Ei(e)):e;if(ei.isArrayBuffer(e)||ei.isBuffer(e)||ei.isStream(e)||ei.isFile(e)||ei.isBlob(e))return e;if(ei.isArrayBufferView(e))return e.buffer;if(ei.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return li(e,new _i.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return _i.isNode&&ei.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=ei.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return li(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(ei.isString(e))try{return(t||JSON.parse)(e),ei.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Hi.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&ei.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw ii.from(a,ii.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_i.classes.FormData,Blob:_i.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ei.forEach(["delete","get","head"],(function(e){Hi.headers[e]={}})),ei.forEach(["post","put","patch"],(function(e){Hi.headers[e]=ei.merge(Ki)}));var Wi=Hi;function Gi(e,t){var n=this||Wi,r=t||n,i=Ui.from(r.headers),a=r.data;return ei.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Qi(e){return!(!e||!e.__CANCEL__)}function Yi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ci}function Xi(e){return Yi(e),e.headers=Ui.from(e.headers),e.data=Gi.call(e,e.transformRequest),(e.adapter||Wi.adapter)(e).then((function(t){return Yi(e),t.data=Gi.call(e,e.transformResponse,t),t.headers=Ui.from(t.headers),t}),(function(t){return Qi(t)||(Yi(e),t&&t.response&&(t.response.data=Gi.call(e,e.transformResponse,t.response),t.response.headers=Ui.from(t.response.headers))),Promise.reject(t)}))}function $i(e,t){t=t||{};var n={};function r(e,t){return ei.isPlainObject(e)&&ei.isPlainObject(t)?ei.merge(e,t):ei.isPlainObject(t)?ei.merge({},t):ei.isArray(t)?t.slice():t}function i(n){return ei.isUndefined(t[n])?ei.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function a(e){if(!ei.isUndefined(t[e]))return r(void 0,t[e])}function o(n){return ei.isUndefined(t[n])?ei.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function u(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u};return ei.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=s[e]||i,r=t(e);ei.isUndefined(r)&&t!==u||(n[e]=r)})),n}var Ji="1.1.2",Zi={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Zi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var ea={};Zi.transitional=function(e,t,n){function r(e,t){return"[Axios v1.1.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new ii(r(i," has been removed"+(t?" in "+t:"")),ii.ERR_DEPRECATED);return t&&!ea[i]&&(ea[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var ta={assertOptions:function(e,t,n){if("object"!==typeof e)throw new ii("options must be an object",ii.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new ii("option "+a+" must be "+s,ii.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ii("Unknown option "+a,ii.ERR_BAD_OPTION)}},validators:Zi},na=ta.validators,ra=function(){function e(t){gt(this,e),this.defaults=t,this.interceptors={request:new gi,response:new gi}}return bt(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=(t=$i(this.defaults,t)).transitional;void 0!==n&&ta.assertOptions(n,{silentJSONParsing:na.transitional(na.boolean),forcedJSONParsing:na.transitional(na.boolean),clarifyTimeoutError:na.transitional(na.boolean)},!1),t.method=(t.method||this.defaults.method||"get").toLowerCase();var r=t.headers&&ei.merge(t.headers.common,t.headers[t.method]);r&&ei.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),t.headers=new Ui(t.headers,r);var i=[],a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var o,u=[];this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));var s,c=0;if(!a){var l=[Xi.bind(this),void 0];for(l.unshift.apply(l,i),l.push.apply(l,u),s=l.length,o=Promise.resolve(t);c<s;)o=o.then(l[c++],l[c++]);return o}s=i.length;var f=t;for(c=0;c<s;){var h=i[c++],d=i[c++];try{f=h(f)}catch(p){d.call(this,p);break}}try{o=Xi.call(this,f)}catch(p){return Promise.reject(p)}for(c=0,s=u.length;c<s;)o=o.then(u[c++],u[c++]);return o}},{key:"getUri",value:function(e){return yi(Si((e=$i(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();ei.forEach(["delete","get","head","options"],(function(e){ra.prototype[e]=function(t,n){return this.request($i(n||{},{method:e,url:t,data:(n||{}).data}))}})),ei.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request($i(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ra.prototype[e]=t(),ra.prototype[e+"Form"]=t(!0)}));var ia=ra,aa=function(){function e(t){if(gt(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new Ci(e,t,i),n(r.reason))}))}return bt(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),oa=aa;var ua=function e(t){var n=new ia(t),r=Tr(ia.prototype.request,n);return ei.extend(r,ia.prototype,n,{allOwnKeys:!0}),ei.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e($i(t,n))},r}(Wi);ua.Axios=ia,ua.CanceledError=Ci,ua.CancelToken=oa,ua.isCancel=Qi,ua.VERSION=Ji,ua.toFormData=li,ua.AxiosError=ii,ua.Cancel=ua.CanceledError,ua.all=function(e){return Promise.all(e)},ua.spread=function(e){return function(t){return e.apply(null,t)}},ua.isAxiosError=function(e){return ei.isObject(e)&&!0===e.isAxiosError},ua.formToJSON=function(e){return Ei(ei.isHTMLForm(e)?new FormData(e):e)};var sa=ua.create({baseURL:"https://api.themoviedb.org/3"}),ca="f81980ff410e46f422d64ddf3a56dddd",la={fetchTrending:"/trending/all/week?api_key=".concat(ca,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(ca,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(ca,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat(ca,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(ca,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(ca,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(ca,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(ca,"&with_genres=99")};var fa=function(){var e=vt((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){function e(){return(e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa.get(la.fetchNetflixOriginals);case 2:return t=e.sent,r(t.data.results[Math.floor(Math.random()*t.data.results.length-1)]),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(n),(0,Ir.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(null===n||void 0===n?void 0:n.backdrop_path,'")'),backgroundPosition:"center center"},children:[(0,Ir.jsxs)("div",{className:"banner__contents",children:[(0,Ir.jsx)("h1",{className:"banner__title",children:(null===n||void 0===n?void 0:n.title)||(null===n||void 0===n?void 0:n.original_name)||(null===n||void 0===n?void 0:n.name)}),(0,Ir.jsxs)("div",{className:"banner__buttons",children:[(0,Ir.jsx)("button",{className:"banner_button",children:"Play"}),(0,Ir.jsx)("button",{className:"banner_button",children:"My List"})]}),(0,Ir.jsx)("h1",{className:"banner__description",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e}("".concat(null===n||void 0===n?void 0:n.overview),200)})]}),(0,Ir.jsx)("div",{className:"banner--fadeBottom"})]})};var ha=function(e){var n=e.title,r=e.fetchUrl,i=e.isLargeRow,a=void 0!==i&&i,o=vt((0,t.useState)([]),2),u=o[0],s=o[1];return(0,t.useEffect)((function(){function e(){return(e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa.get(r);case 2:return t=e.sent,s(t.data.results),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),console.log(u),(0,Ir.jsxs)("div",{className:"row",children:[(0,Ir.jsx)("h2",{children:n}),(0,Ir.jsx)("div",{className:"row__posters",children:u.map((function(e){return(0,Ir.jsx)("img",{className:"row__poster ".concat(a&&"row__posterLarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(a?e.poster_path:e.backdrop_path),alt:e.name},e.id)}))})]})};var da=function(){return(0,Ir.jsxs)("div",{className:"homeScreen",children:[(0,Ir.jsx)(Sr,{}),(0,Ir.jsx)(fa,{}),(0,Ir.jsx)(ha,{title:"NETFLIX ORIGINALS",fetchUrl:la.fetchNetflixOriginals,isLargeRow:!0}),(0,Ir.jsx)(ha,{title:"Trending Now",fetchUrl:la.fetchTrending}),(0,Ir.jsx)(ha,{title:"Top Rated",fetchUrl:la.fetchTopRated}),(0,Ir.jsx)(ha,{title:"Action Movies",fetchUrl:la.fetchActionMovies}),(0,Ir.jsx)(ha,{title:"Comedy Movies",fetchUrl:la.fetchComedyMovies}),(0,Ir.jsx)(ha,{title:"Horror Movies",fetchUrl:la.fetchHorrorMovies}),(0,Ir.jsx)(ha,{title:"Romance Movies",fetchUrl:la.fetchRomanceMovies}),(0,Ir.jsx)(ha,{title:"Documentaries",fetchUrl:la.fetchDocumentaries})]})},pa=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},va={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pa(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ya=function(e){return function(e){var t=pa(e);return va.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ma=function(e){try{return va.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ga(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ga(e[n],t[n]));return e}function ka(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ba(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function wa(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function xa(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function _a(){var e=ka();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ea(){return"object"===typeof indexedDB}var Ia=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Sa=function(){return Ia()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__,t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS_PATH__;if(e)return t&&console.warn("Values were provided for both __FIREBASE_DEFAULTS__ and __FIREBASE_DEFAULTS_PATH__. __FIREBASE_DEFAULTS_PATH__ will be ignored."),JSON.parse(e);if(t)try{return n(163)(t)}catch(r){console.warn("Unable to read defaults from file provided to "+"__FIREBASE_DEFAULTS_PATH__: ".concat(t))}}}()||function(){if("undefined"!==typeof document){var e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),t=e&&ma(e[1]);return t&&JSON.parse(t)}}()},Ta=function(){var e;return null===(e=Sa())||void 0===e?void 0:e.config},Aa=function(){function e(){var t=this;gt(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return bt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ca(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ya(JSON.stringify({alg:"none",type:"JWT"})),ya(JSON.stringify(a)),""].join(".")}var Na=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(St(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(St(a),Da.prototype.create),a}return bt(n)}(Pt(Error)),Da=function(){function e(t,n,r){gt(this,e),this.service=t,this.serviceName=n,this.errors=r}return bt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Oa(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Na(n,a,t);return o}}]),e}();function Oa(e,t){return e.replace(Ra,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ra=/\{\$([^}]+)}/g;function Pa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function La(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ma(u)&&Ma(s)){if(!La(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ma(e){return null!==e&&"object"===typeof e}function Fa(e){for(var t=[],n=function(){var e=vt(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ua(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=vt(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ja(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Va(e,t){var n=new Ba(e,t);return n.subscribe.bind(n)}var Ba=function(){function e(t,n){var r=this;gt(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return bt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Ct(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=za),void 0===r.error&&(r.error=za),void 0===r.complete&&(r.complete=za);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function za(){}function qa(e){return e&&e._delegate?e._delegate:e}var Ka=function(){function e(t,n,r){gt(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return bt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ha="[DEFAULT]",Wa=function(){function e(t,n){gt(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return bt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Aa;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch(s){}var t,n=Ct(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=vt(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(mt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),mt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Ct(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=vt(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(qA){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ha?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(qA){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha;return this.component?this.component.multipleInstances?e:Ha:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ga,Qa,Ya=function(){function e(t){gt(this,e),this.name=t,this.providers=new Map}return bt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Wa(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Xa=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Qa||(Qa={}));var $a={debug:Qa.DEBUG,verbose:Qa.VERBOSE,info:Qa.INFO,warn:Qa.WARN,error:Qa.ERROR,silent:Qa.SILENT},Ja=Qa.INFO,Za=(Te(Ga={},Qa.DEBUG,"log"),Te(Ga,Qa.VERBOSE,"log"),Te(Ga,Qa.INFO,"info"),Te(Ga,Qa.WARN,"warn"),Te(Ga,Qa.ERROR,"error"),Ga),eo=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Za[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},to=function(){function e(t){gt(this,e),this.name=t,this._logLevel=Ja,this._logHandler=eo,this._userLogHandler=null,Xa.push(this)}return bt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Qa))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?$a[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qa.DEBUG].concat(t)),this._logHandler.apply(this,[this,Qa.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qa.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Qa.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qa.INFO].concat(t)),this._logHandler.apply(this,[this,Qa.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qa.WARN].concat(t)),this._logHandler.apply(this,[this,Qa.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qa.ERROR].concat(t)),this._logHandler.apply(this,[this,Qa.ERROR].concat(t))}}]),e}();var no,ro;var io=new WeakMap,ao=new WeakMap,oo=new WeakMap,uo=new WeakMap,so=new WeakMap;var co={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ao.get(e);if("objectStoreNames"===t)return e.objectStoreNames||oo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function lo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ro||(ro=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(po(this),n),ho(io.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ho(e.apply(po(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[po(this),t].concat(r));return oo.set(a,t.sort?t.sort():[t]),ho(a)}}function fo(e){return"function"===typeof e?lo(e):(e instanceof IDBTransaction&&function(e){if(!ao.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ao.set(e,t)}}(e),t=e,(no||(no=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,co):e);var t}function ho(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ho(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&io.set(t,e)})).catch((function(){})),so.set(t,e),t}(e);if(uo.has(e))return uo.get(e);var t=fo(e);return t!==e&&(uo.set(e,t),so.set(t,e)),t}var po=function(e){return so.get(e)};var vo,yo,mo=["get","getKey","getAll","getAllKeys","count"],go=["put","add","delete","clear"],ko=new Map;function bo(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ko.get(t))return ko.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=go.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||mo.includes(n))){var a=function(){var e=Ot(Nt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ko.set(t,a),a}}}co=function(e){return Ce(Ce({},e),{},{get:function(t,n,r){return bo(t,n)||e.get(t,n,r)},has:function(t,n){return!!bo(t,n)||e.has(t,n)}})}(co);var wo=function(){function e(t){gt(this,e),this.container=t}return bt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var xo="@firebase/app",_o="0.8.0",Eo=new to("@firebase/app"),Io="[DEFAULT]",So=(Te(vo={},xo,"fire-core"),Te(vo,"@firebase/app-compat","fire-core-compat"),Te(vo,"@firebase/analytics","fire-analytics"),Te(vo,"@firebase/analytics-compat","fire-analytics-compat"),Te(vo,"@firebase/app-check","fire-app-check"),Te(vo,"@firebase/app-check-compat","fire-app-check-compat"),Te(vo,"@firebase/auth","fire-auth"),Te(vo,"@firebase/auth-compat","fire-auth-compat"),Te(vo,"@firebase/database","fire-rtdb"),Te(vo,"@firebase/database-compat","fire-rtdb-compat"),Te(vo,"@firebase/functions","fire-fn"),Te(vo,"@firebase/functions-compat","fire-fn-compat"),Te(vo,"@firebase/installations","fire-iid"),Te(vo,"@firebase/installations-compat","fire-iid-compat"),Te(vo,"@firebase/messaging","fire-fcm"),Te(vo,"@firebase/messaging-compat","fire-fcm-compat"),Te(vo,"@firebase/performance","fire-perf"),Te(vo,"@firebase/performance-compat","fire-perf-compat"),Te(vo,"@firebase/remote-config","fire-rc"),Te(vo,"@firebase/remote-config-compat","fire-rc-compat"),Te(vo,"@firebase/storage","fire-gcs"),Te(vo,"@firebase/storage-compat","fire-gcs-compat"),Te(vo,"@firebase/firestore","fire-fst"),Te(vo,"@firebase/firestore-compat","fire-fst-compat"),Te(vo,"fire-js","fire-js"),Te(vo,"firebase","fire-js-all"),vo),To=new Map,Ao=new Map;function Co(e,t){try{e.container.addComponent(t)}catch(n){Eo.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function No(e,t){e.container.addOrOverwriteComponent(t)}function Do(e){var t=e.name;if(Ao.has(t))return Eo.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ao.set(t,e);var n,r=Ct(To.values());try{for(r.s();!(n=r.n()).done;){Co(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Oo(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ro(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Io;Oo(e,t).clearInstance(n)}function Po(){Ao.clear()}var Lo=(Te(yo={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Te(yo,"bad-app-name","Illegal App name: '{$appName}"),Te(yo,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Te(yo,"app-deleted","Firebase App named '{$appName}' already deleted"),Te(yo,"no-options","Need to provide options, when not being deployed to hosting via source."),Te(yo,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Te(yo,"invalid-log-argument","First argument to `onLog` must be null or a function."),Te(yo,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Te(yo,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Te(yo,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Te(yo,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),yo),Mo=new Da("app","Firebase",Lo),Fo=function(){function e(t,n,r){var i=this;gt(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ka("app",(function(){return i}),"PUBLIC"))}return bt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Mo.create("app-deleted",{appName:this._name})}}]),e}(),Uo="9.11.0";function jo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Io,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw Mo.create("bad-app-name",{appName:String(a)});if(n||(n=Ta()),!n)throw Mo.create("no-options");var o=To.get(a);if(o){if(La(n,o.options)&&La(i,o.config))return o;throw Mo.create("duplicate-app",{appName:a})}var u,s=new Ya(a),c=Ct(Ao.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Fo(n,i,s);return To.set(a,f),f}function Vo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Io,t=To.get(e);if(!t&&e===Io)return jo();if(!t)throw Mo.create("no-app",{appName:e});return t}function Bo(){return Array.from(To.values())}function zo(e){return qo.apply(this,arguments)}function qo(){return(qo=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!To.has(n)){e.next=6;break}return To.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(e,t,n){var r,i=null!==(r=So[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Eo.warn(u.join(" "))}Do(new Ka("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ho(e,t){if(null!==e&&"function"!==typeof e)throw Mo.create("invalid-log-argument");!function(e,t){var n,r=Ct(Xa);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=$a[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Qa[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Wo(e){var t;t=e,Xa.forEach((function(e){e.setLogLevel(t)}))}var Go="firebase-heartbeat-store",Qo=null;function Yo(){return Qo||(Qo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ho(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ho(u.result),e.oldVersion,e.newVersion,ho(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Go)}}).catch((function(e){throw Mo.create("idb-open",{originalErrorMessage:e.message})}))),Qo}function Xo(e){return $o.apply(this,arguments)}function $o(){return $o=Ot(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yo();case 3:return r=e.sent,e.abrupt("return",r.transaction(Go).objectStore(Go).get(eu(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Na?Eo.warn(e.t0.message):(i=Mo.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),Eo.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),$o.apply(this,arguments)}function Jo(e,t){return Zo.apply(this,arguments)}function Zo(){return Zo=Ot(Nt().mark((function e(t,n){var r,i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yo();case 3:return i=e.sent,a=i.transaction(Go,"readwrite"),o=a.objectStore(Go),e.next=8,o.put(n,eu(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Na?Eo.warn(e.t0.message):(u=Mo.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),Eo.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Zo.apply(this,arguments)}function eu(e){return"".concat(e.name,"!").concat(e.options.appId)}var tu=function(){function e(t){var n=this;gt(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ou(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return bt(e,[{key:"triggerHeartbeat",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=nu(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=nu(),n=ru(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=ya(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function nu(){return(new Date).toISOString().substring(0,10)}function ru(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Ct(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),uu(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),uu(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var iu,au,ou=function(){function e(t){gt(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return bt(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ea()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Xo(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Jo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Jo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(mt(r.heartbeats),mt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function uu(e){return ya(JSON.stringify({version:2,heartbeats:e})).length}iu="",Do(new Ka("platform-logger",(function(e){return new wo(e)}),"PRIVATE")),Do(new Ka("heartbeat",(function(e){return new tu(e)}),"PRIVATE")),Ko(xo,_o,iu),Ko(xo,_o,"esm2017"),Ko("fire-js","");var su=function(){function e(t,n){var r=this;gt(this,e),this._delegate=t,this.firebase=n,Co(t,new Ka("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return bt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),zo(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Io;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Io;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Co(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){No(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),cu=(Te(au={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Te(au,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),au),lu=new Da("app-compat","Firebase",cu);var fu=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=jo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Pa(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ko,setLogLevel:Wo,onLog:Ho,apps:null,SDK_VERSION:Uo,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Do(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw lu.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ga(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Pa(n,e=e||Io))throw lu.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(su);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ga(n,e)},createSubscribe:Va,ErrorFactory:Da,deepExtend:ga}),n}(),hu=new to("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){hu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var du=self.firebase.SDK_VERSION;du&&du.indexOf("LITE")>=0&&hu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var pu=fu;!function(e){Ko("@firebase/app-compat","0.1.35",e)}();function vu(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_t(e)););return e}function yu(){return yu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=vu(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},yu.apply(this,arguments)}pu.registerVersion("firebase","9.11.0","app-compat");function mu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var gu;Object.create;var ku="facebook.com",bu="github.com",wu="google.com",xu="password",_u="twitter.com",Eu="EMAIL_SIGNIN",Iu="PASSWORD_RESET",Su="RECOVER_EMAIL",Tu="REVERT_SECOND_FACTOR_ADDITION",Au="VERIFY_AND_CHANGE_EMAIL",Cu="VERIFY_EMAIL";function Nu(){return Te({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Du=function(){var e;return Te(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Te(e,"argument-error",""),Te(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Te(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Te(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Te(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Te(e,"cordova-not-ready","Cordova framework is not ready."),Te(e,"cors-unsupported","This browser is not supported."),Te(e,"credential-already-in-use","This credential is already associated with a different user account."),Te(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Te(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Te(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Te(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Te(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Te(e,"email-already-in-use","The email address is already in use by another account."),Te(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Te(e,"expired-action-code","The action code has expired."),Te(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Te(e,"internal-error","An internal AuthError has occurred."),Te(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Te(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Te(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Te(e,"invalid-auth-event","An internal AuthError has occurred."),Te(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Te(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Te(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Te(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Te(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Te(e,"invalid-email","The email address is badly formatted."),Te(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Te(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Te(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Te(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Te(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Te(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Te(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Te(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Te(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Te(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Te(e,"wrong-password","The password is invalid or the user does not have a password."),Te(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Te(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Te(e,"invalid-provider-id","The specified provider ID is invalid."),Te(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Te(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Te(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Te(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Te(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Te(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Te(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Te(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Te(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Te(e,"missing-continue-uri","A continue URL must be provided in the request."),Te(e,"missing-iframe-start","An internal AuthError has occurred."),Te(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Te(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Te(e,"missing-multi-factor-info","No second factor identifier is provided."),Te(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Te(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Te(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Te(e,"app-deleted","This instance of FirebaseApp has been deleted."),Te(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Te(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Te(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Te(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Te(e,"no-auth-event","An internal AuthError has occurred."),Te(e,"no-such-provider","User was not linked to an account with the given provider."),Te(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Te(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Te(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Te(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Te(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Te(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Te(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Te(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Te(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Te(e,"rejected-credential","The request contains malformed or mismatching credentials."),Te(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Te(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Te(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Te(e,"timeout","The operation has timed out."),Te(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Te(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Te(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Te(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Te(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Te(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Te(e,"unverified-email","The operation requires a verified email."),Te(e,"user-cancelled","The user did not grant your application the permissions it requested."),Te(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Te(e,"user-disabled","The user account has been disabled by an administrator."),Te(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Te(e,"user-signed-out",""),Te(e,"weak-password","The password must be 6 characters long or more."),Te(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Te(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Ou=Nu,Ru=new Da("auth","Firebase",Nu()),Pu=new to("@firebase/auth");function Lu(e){if(Pu.logLevel<=Qa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pu.error.apply(Pu,["Auth (".concat(Uo,"): ").concat(e)].concat(n))}}function Mu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Vu.apply(void 0,[e].concat(n))}function Fu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vu.apply(void 0,[e].concat(n))}function Uu(e,t,n){var r=Object.assign(Object.assign({},Ou()),Te({},t,n));return new Da("auth","Firebase",r).create(t,{appName:e.name})}function ju(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Mu(e,"argument-error"),Uu(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Vu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=mt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(mt(o)))}return Ru.create.apply(Ru,[e].concat(n))}function Bu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Vu.apply(void 0,[t].concat(r))}}function zu(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Lu(t),new Error(t)}function qu(e,t){e||zu(t)}var Ku=new Map;function Hu(e){qu(e instanceof Function,"Expected a class definition");var t=Ku.get(e);return t?(qu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ku.set(e,t),t)}function Wu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Gu(){return"http:"===Qu()||"https:"===Qu()}function Qu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Yu=function(){function e(t,n){gt(this,e),this.shortDelay=t,this.longDelay=n,qu(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ka())||xa()}return bt(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Gu()||wa()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Xu(e,t){qu(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var $u=function(){function e(){gt(this,e)}return bt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void zu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void zu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void zu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ju=(Te(gu={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Te(gu,"MISSING_CUSTOM_TOKEN","internal-error"),Te(gu,"INVALID_IDENTIFIER","invalid-email"),Te(gu,"MISSING_CONTINUE_URI","internal-error"),Te(gu,"INVALID_PASSWORD","wrong-password"),Te(gu,"MISSING_PASSWORD","internal-error"),Te(gu,"EMAIL_EXISTS","email-already-in-use"),Te(gu,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Te(gu,"INVALID_IDP_RESPONSE","invalid-credential"),Te(gu,"INVALID_PENDING_TOKEN","invalid-credential"),Te(gu,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Te(gu,"MISSING_REQ_TYPE","internal-error"),Te(gu,"EMAIL_NOT_FOUND","user-not-found"),Te(gu,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Te(gu,"EXPIRED_OOB_CODE","expired-action-code"),Te(gu,"INVALID_OOB_CODE","invalid-action-code"),Te(gu,"MISSING_OOB_CODE","internal-error"),Te(gu,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Te(gu,"INVALID_ID_TOKEN","invalid-user-token"),Te(gu,"TOKEN_EXPIRED","user-token-expired"),Te(gu,"USER_NOT_FOUND","user-token-expired"),Te(gu,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Te(gu,"INVALID_CODE","invalid-verification-code"),Te(gu,"INVALID_SESSION_INFO","invalid-verification-id"),Te(gu,"INVALID_TEMPORARY_PROOF","invalid-credential"),Te(gu,"MISSING_SESSION_INFO","missing-verification-id"),Te(gu,"SESSION_EXPIRED","code-expired"),Te(gu,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Te(gu,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Te(gu,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Te(gu,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Te(gu,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Te(gu,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Te(gu,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Te(gu,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Te(gu,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Te(gu,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Te(gu,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),gu),Zu=new Yu(3e4,6e4);function es(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function ts(e,t,n,r){return ns.apply(this,arguments)}function ns(){return ns=Ot(Nt().mark((function e(t,n,r,i){var a,o=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",rs(t,a,Ot(Nt().mark((function e(){var a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Fa(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",$u.fetch()(us(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t,n){return is.apply(this,arguments)}function is(){return is=Ot(Nt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ju),n),e.prev=2,a=new ss(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw cs(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=vt(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw cs(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw cs(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw cs(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Uu(t,d,h);case 34:Mu(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Na)){e.next=41;break}throw e.t0;case 41:Mu(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),is.apply(this,arguments)}function as(e,t,n,r){return os.apply(this,arguments)}function os(){return os=Ot(Nt().mark((function e(t,n,r,i){var a,o,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,ts(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Mu(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),os.apply(this,arguments)}function us(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Xu(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ss=function(){function e(t){var n=this;gt(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Fu(n.auth,"network-request-failed"))}),Zu.get())}))}return bt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function cs(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Fu(e,t,r);return i.customData._tokenResponse=n,i}function ls(e,t){return fs.apply(this,arguments)}function fs(){return fs=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}function hs(e,t){return ds.apply(this,arguments)}function ds(){return ds=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ds.apply(this,arguments)}function ps(e,t){return vs.apply(this,arguments)}function vs(){return vs=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),vs.apply(this,arguments)}function ys(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ms(){return ms=Ot(Nt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=qa(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Bu((a=ks(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ys(gs(a.auth_time)),issuedAtTime:ys(gs(a.iat)),expirationTime:ys(gs(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ms.apply(this,arguments)}function gs(e){return 1e3*Number(e)}function ks(e){var t,n=vt(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{var o=ma(i);return o?JSON.parse(o):(Lu("Failed to decode base64 JWT payload"),null)}catch(u){return Lu("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function bs(e,t){return ws.apply(this,arguments)}function ws(){return ws=Ot(Nt().mark((function e(t,n){var r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Na&&xs(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ws.apply(this,arguments)}function xs(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var _s=function(){function e(t){gt(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return bt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ot(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Es=function(){function e(t,n){gt(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return bt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ys(this.lastLoginAt),this.creationTime=ys(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Is(e){return Ss.apply(this,arguments)}function Ss(){return Ss=Ot(Nt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,bs(t,ps(r,{idToken:i}));case 6:Bu(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Cs(o.providerUserInfo):[],s=As(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Es(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}function Ts(){return(Ts=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qa(t),e.next=3,Is(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function As(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(mt(n),mt(t))}function Cs(e){return e.map((function(e){var t=e.providerId,n=mu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ns(e,t){return Ds.apply(this,arguments)}function Ds(){return Ds=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rs(t,{},Ot(Nt().mark((function e(){var r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fa({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=us(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",$u.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ds.apply(this,arguments)}var Os=function(){function e(){gt(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return bt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Bu(e.idToken,"internal-error"),Bu("undefined"!==typeof e.idToken,"internal-error"),Bu("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ks(e);return Bu(t,"internal-error"),Bu("undefined"!==typeof t.exp,"internal-error"),Bu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ot(Nt().mark((function e(t){var n,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Bu(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ot(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ns(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return zu("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Bu("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Bu("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Bu("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Rs(e,t){Bu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ps=function(){function e(t){gt(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=mu(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _s(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?mt(a.providerData):[],this.metadata=new Es(a.createdAt||void 0,a.lastLoginAt||void 0)}return bt(e,[{key:"getIdToken",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bs(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Bu(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ms.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ts.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Bu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Bu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ot(Nt().mark((function e(t){var n,r,i=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Is(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,bs(this,ls(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Bu(k&&_,t,"internal-error");var E=Os.fromJSON(this.name,_);Bu("string"===typeof k,t,"internal-error"),Rs(f,t.name),Rs(h,t.name),Bu("boolean"===typeof b,t,"internal-error"),Bu("boolean"===typeof w,t,"internal-error"),Rs(d,t.name),Rs(p,t.name),Rs(v,t.name),Rs(y,t.name),Rs(m,t.name),Rs(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=Ot(Nt().mark((function t(n,r){var i,a,o,u=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Os).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Is(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ls=function(){function e(){gt(this,e),this.type="NONE",this.storage={}}return bt(e,[{key:"_isAvailable",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ls.type="NONE";var Ms=Ls;function Fs(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Us=function(){function e(t,n,r){gt(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Fs(this.userKey,a.apiKey,o),this.fullPersistenceKey=Fs("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return bt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ps._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ot(Nt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Hu(Ms),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Hu(Ms),u=Fs(i,n.config.apiKey,n.name),s=null,c=Ct(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ps._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function js(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qs(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Vs(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Hs(t))return"Blackberry";if(Ws(t))return"Webos";if(Bs(t))return"Safari";if((t.includes("chrome/")||zs(t))&&!t.includes("edge/"))return"Chrome";if(Ks(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Vs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/firefox\//i.test(e)}function Bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/crios\//i.test(e)}function qs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/iemobile/i.test(e)}function Ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/android/i.test(e)}function Hs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/blackberry/i.test(e)}function Ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/webos/i.test(e)}function Gs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Qs(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return Gs(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Ys(){return _a()&&10===document.documentMode}function Xs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return Gs(e)||Ks(e)||Ws(e)||Hs(e)||/windows phone/i.test(e)||qs(e)}function $s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=js(ka());break;case"Worker":t="".concat(js(ka()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Uo,"/").concat(r)}var Js=function(){function e(t){gt(this,e),this.auth=t,this.queue=[]}return bt(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Ot(Nt().mark((function e(t){var n,r,i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Ct(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Ct(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(K){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zs=function(){function e(t,n,r){gt(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tc(this),this.idTokenSubscription=new tc(this),this.beforeStateQueue=new Js(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ru,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return bt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Hu(t)),this._initializationPromise=this.queue(Ot(Nt().mark((function r(){var i,a;return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Us.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ot(Nt().mark((function e(t){var n,r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Bu(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Is(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?qa(t):null)&&Bu(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ot(Nt().mark((function e(t){var n,r=this,i=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Bu(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ot(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Hu(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Da("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Bu(n=t&&Hu(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Us.create(this,[Hu(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ot(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Bu(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Bu(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$s(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Te({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ec(e){return qa(e)}var tc=function(){function e(t){var n=this;gt(this,e),this.auth=t,this.observer=null,this.addObserver=Va((function(e){return n.observer=e}))}return bt(e,[{key:"next",get:function(){return Bu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function nc(e,t,n){var r=ec(e);Bu(r._canInitEmulator,r,"emulator-config-failed"),Bu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=rc(t),o=function(e){var t=rc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ic(r.substr(a.length+1))}}var o=vt(r.split(":"),2);return{host:o[0],port:ic(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function rc(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ic(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ac=function(){function e(t,n){gt(this,e),this.providerId=t,this.signInMethod=n}return bt(e,[{key:"toJSON",value:function(){return zu("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return zu("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return zu("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return zu("not implemented")}}]),e}();function oc(e,t){return uc.apply(this,arguments)}function uc(){return uc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:resetPassword",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function sc(e,t){return cc.apply(this,arguments)}function cc(){return cc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),cc.apply(this,arguments)}function lc(e,t){return fc.apply(this,arguments)}function fc(){return fc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:update",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}function hc(e,t){return dc.apply(this,arguments)}function dc(){return dc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(t,"POST","/v1/accounts:signInWithPassword",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function pc(e,t){return vc.apply(this,arguments)}function vc(){return vc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:sendOobCode",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function yc(e,t){return mc.apply(this,arguments)}function mc(){return mc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(t,n));case 1:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function gc(e,t){return kc.apply(this,arguments)}function kc(){return kc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(t,n));case 1:case"end":return e.stop()}}),e)}))),kc.apply(this,arguments)}function bc(e,t){return wc.apply(this,arguments)}function wc(){return wc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(t,n));case 1:case"end":return e.stop()}}),e)}))),wc.apply(this,arguments)}function xc(e,t){return _c.apply(this,arguments)}function _c(){return _c=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(t,n));case 1:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function Ec(e,t){return Ic.apply(this,arguments)}function Ic(){return Ic=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(t,"POST","/v1/accounts:signInWithEmailLink",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ic.apply(this,arguments)}function Sc(e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(t,"POST","/v1/accounts:signInWithEmailLink",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}var Ac=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return gt(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return bt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",hc(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ec(t,{email:this._email,oobCode:this._password}));case 5:Mu(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",sc(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Sc(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Mu(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ac);function Cc(e,t){return Nc.apply(this,arguments)}function Nc(){return Nc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(t,"POST","/v1/accounts:signInWithIdp",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),Nc.apply(this,arguments)}var Dc=function(e){xt(n,e);var t=At(n);function n(){var e;return gt(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return bt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Cc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Cc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Cc(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fa(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mu("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=mu(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ac);function Oc(e,t){return Rc.apply(this,arguments)}function Rc(){return Rc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:sendVerificationCode",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rc.apply(this,arguments)}function Pc(){return Pc=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(t,"POST","/v1/accounts:signInWithPhoneNumber",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pc.apply(this,arguments)}function Lc(){return Lc=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,as(t,"POST","/v1/accounts:signInWithPhoneNumber",es(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw cs(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Lc.apply(this,arguments)}var Mc=Te({},"USER_NOT_FOUND","user-not-found");function Fc(){return Fc=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",as(t,"POST","/v1/accounts:signInWithPhoneNumber",es(t,r),Mc));case 2:case"end":return e.stop()}}),e)}))),Fc.apply(this,arguments)}var Uc=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this,"phone","phone")).params=e,r}return bt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Pc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Lc.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Fc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ac);var jc=function(){function e(t){var n,r,i,a,o,u;gt(this,e);var s=Ua(ja(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Bu(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return bt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ua(ja(e)).link,n=t?Ua(ja(t)).deep_link_id:null,r=Ua(ja(e)).deep_link_id;return(r?Ua(ja(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(qA){return null}}}]),e}();var Vc=function(){function e(){gt(this,e),this.providerId=e.PROVIDER_ID}return bt(e,null,[{key:"credential",value:function(e,t){return Ac._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=jc.parseLink(t);return Bu(n,"argument-error"),Ac._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Vc.PROVIDER_ID="password",Vc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Vc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Bc=function(){function e(t){gt(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return bt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),zc=function(e){xt(n,e);var t=At(n);function n(){var e;return gt(this,n),(e=t.apply(this,arguments)).scopes=[],e}return bt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return mt(this.scopes)}}]),n}(Bc),qc=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Bu(e.idToken||e.accessToken,"argument-error"),Dc._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Bu("providerId"in t&&"signInMethod"in t,"argument-error"),Dc._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(zc),Kc=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.call(this,"facebook.com")}return bt(n,null,[{key:"credential",value:function(e){return Dc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(qA){return null}}}]),n}(zc);Kc.FACEBOOK_SIGN_IN_METHOD="facebook.com",Kc.PROVIDER_ID="facebook.com";var Hc=function(e){xt(n,e);var t=At(n);function n(){var e;return gt(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return bt(n,null,[{key:"credential",value:function(e,t){return Dc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(qA){return null}}}]),n}(zc);Hc.GOOGLE_SIGN_IN_METHOD="google.com",Hc.PROVIDER_ID="google.com";var Wc=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.call(this,"github.com")}return bt(n,null,[{key:"credential",value:function(e){return Dc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(qA){return null}}}]),n}(zc);Wc.GITHUB_SIGN_IN_METHOD="github.com",Wc.PROVIDER_ID="github.com";var Gc=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return bt(n,[{key:"_getIdTokenResponse",value:function(e){return Cc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Cc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Cc(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ac),Qc=function(e){xt(n,e);var t=At(n);function n(e){return gt(this,n),Bu(e.startsWith("saml."),"argument-error"),t.call(this,e)}return bt(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Gc.fromJSON(e);return Bu(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Gc._create(r,n)}catch(i){return null}}}]),n}(Bc),Yc=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.call(this,"twitter.com")}return bt(n,null,[{key:"credential",value:function(e,t){return Dc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(qA){return null}}}]),n}(zc);function Xc(e,t){return $c.apply(this,arguments)}function $c(){return $c=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(t,"POST","/v1/accounts:signUp",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),$c.apply(this,arguments)}Yc.TWITTER_SIGN_IN_METHOD="twitter.com",Yc.PROVIDER_ID="twitter.com";var Jc=function(){function e(t){gt(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return bt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ot(Nt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ps._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Zc(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ot(Nt().mark((function t(n,r,i){var a;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Zc(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Zc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function el(){return el=Ot(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ec(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Jc({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Xc(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Jc._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),el.apply(this,arguments)}var tl=function(e){xt(n,e);var t=At(n);function n(e,r,i,a){var o,u;return gt(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(St(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return bt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Na);function nl(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw tl._fromErrorAndOperation(e,n,t,r);throw n}))}function rl(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function il(e,t){return al.apply(this,arguments)}function al(){return al=Ot(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),e.next=3,sl(!0,r,n);case 3:return e.t0=hs,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=rl(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),al.apply(this,arguments)}function ol(e,t){return ul.apply(this,arguments)}function ul(){return ul=Ot(Nt().mark((function e(t,n){var r,i,a=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=bs,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Jc._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ul.apply(this,arguments)}function sl(e,t,n){return cl.apply(this,arguments)}function cl(){return(cl=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Is(n);case 2:i=rl(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Bu(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ll(e,t){return fl.apply(this,arguments)}function fl(){return fl=Ot(Nt().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,bs(t,nl(a,o,n,t),r);case 6:return Bu((u=e.sent).idToken,a,"internal-error"),Bu(s=ks(u.idToken),a,"internal-error"),c=s.sub,Bu(t.uid===c,a,"user-mismatch"),e.abrupt("return",Jc._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Mu(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),fl.apply(this,arguments)}function hl(e,t){return dl.apply(this,arguments)}function dl(){return dl=Ot(Nt().mark((function e(t,n){var r,i,a,o,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,nl(t,i,n);case 4:return a=e.sent,e.next=7,Jc._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),dl.apply(this,arguments)}function pl(e,t){return vl.apply(this,arguments)}function vl(){return vl=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hl(ec(t),n));case 1:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}function yl(e,t){return ml.apply(this,arguments)}function ml(){return(ml=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),e.next=3,sl(!1,r,n.providerId);case 3:return e.abrupt("return",ol(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gl(e,t){return kl.apply(this,arguments)}function kl(){return(kl=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ll(qa(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bl(e,t){return wl.apply(this,arguments)}function wl(){return wl=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",as(t,"POST","/v1/accounts:signInWithCustomToken",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),wl.apply(this,arguments)}function xl(){return xl=Ot(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ec(t),e.next=3,bl(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Jc._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),xl.apply(this,arguments)}var _l=function(){function e(t,n){gt(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return bt(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?El._fromServerResponse(e,t):Mu(e,"internal-error")}}]),e}(),El=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return bt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(_l);function Il(e,t,n){var r;Bu((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Bu("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Bu(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Bu(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Sl(){return Sl=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qa(t),a={requestType:"PASSWORD_RESET",email:n},r&&Il(i,a,r),e.next=5,gc(i,a);case 5:case"end":return e.stop()}}),e)}))),Sl.apply(this,arguments)}function Tl(){return Tl=Ot(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oc(qa(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Tl.apply(this,arguments)}function Al(){return Al=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc(qa(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}function Cl(e,t){return Nl.apply(this,arguments)}function Nl(){return Nl=Ot(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),e.next=3,oc(r,{oobCode:n});case 3:i=e.sent,Bu(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Bu(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Bu(i.mfaInfo,r,"internal-error");case 13:Bu(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=_l._fromServerResponse(ec(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Nl.apply(this,arguments)}function Dl(){return Dl=Ot(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cl(qa(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Dl.apply(this,arguments)}function Ol(e,t,n){return Rl.apply(this,arguments)}function Rl(){return Rl=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ec(t),e.next=3,Xc(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Jc._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Rl.apply(this,arguments)}function Pl(){return Pl=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qa(t),a={requestType:"EMAIL_SIGNIN",email:n},Bu(r.handleCodeInApp,i,"argument-error"),r&&Il(i,a,r),e.next=6,bc(i,a);case 6:case"end":return e.stop()}}),e)}))),Pl.apply(this,arguments)}function Ll(){return Ll=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qa(t),Bu((a=Vc.credentialWithLink(n,r||Wu()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",pl(i,a));case 4:case"end":return e.stop()}}),e)}))),Ll.apply(this,arguments)}function Ml(e,t){return Fl.apply(this,arguments)}function Fl(){return Fl=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:createAuthUri",es(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fl.apply(this,arguments)}function Ul(){return Ul=Ot(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gu()?Wu():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ml(qa(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Ul.apply(this,arguments)}function jl(){return(jl=Ot(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Il(r.auth,a,n),e.next=8,yc(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vl(){return(Vl=Ot(Nt().mark((function e(t,n,r){var i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qa(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Il(i.auth,o,r),e.next=8,xc(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bl(e,t){return zl.apply(this,arguments)}function zl(){return zl=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ts(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}function ql(){return(ql=Ot(Nt().mark((function e(t,n){var r,i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=qa(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,bs(a,Bl(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kl(e,t,n){return Hl.apply(this,arguments)}function Hl(){return Hl=Ot(Nt().mark((function e(t,n,r){var i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,bs(t,sc(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Hl.apply(this,arguments)}var Wl=bt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gt(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Gl=function(e){xt(n,e);var t=At(n);function n(e,r,i,a){var o;return gt(this,n),(o=t.call(this,e,r,i)).username=a,o}return bt(n)}(Wl),Ql=function(e){xt(n,e);var t=At(n);function n(e,r){return gt(this,n),t.call(this,e,"facebook.com",r)}return bt(n)}(Wl),Yl=function(e){xt(n,e);var t=At(n);function n(e,r){return gt(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return bt(n)}(Gl),Xl=function(e){xt(n,e);var t=At(n);function n(e,r){return gt(this,n),t.call(this,e,"google.com",r)}return bt(n)}(Wl),$l=function(e){xt(n,e);var t=At(n);function n(e,r,i){return gt(this,n),t.call(this,e,"twitter.com",r,i)}return bt(n)}(Gl);function Jl(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ks(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Wl(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ql(a,i);case"github.com":return new Yl(a,i);case"google.com":return new Xl(a,i);case"twitter.com":return new $l(a,i,e.screenName||null);case"custom":case"anonymous":return new Wl(a,null);default:return new Wl(a,r,i)}}(n)}var Zl=function(){function e(t,n,r){gt(this,e),this.type=t,this.credential=n,this.auth=r}return bt(e,[{key:"toJSON",value:function(){return{multiFactorSession:Te({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ef=function(){function e(t,n,r){gt(this,e),this.session=t,this.hints=n,this.signInResolver=r}return bt(e,[{key:"resolveSignIn",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ec(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return _l._fromServerResponse(r,e)}));Bu(i.mfaPendingCredential,r,"internal-error");var o=Zl._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ot(Nt().mark((function e(t){var a,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Jc._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Bu(n.user,r,"internal-error"),e.abrupt("return",Jc._forOperation(n.user,n.operationType,u));case 17:Mu(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function tf(e,t){return ts(e,"POST","/v2/accounts/mfaEnrollment:start",es(e,t))}function nf(e,t){return ts(e,"POST","/v2/accounts/mfaEnrollment:withdraw",es(e,t))}var rf=function(){function e(t){var n=this;gt(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return _l._fromServerResponse(t.auth,e)})))}))}return bt(e,[{key:"getSession",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Zl,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ot(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,bs(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ot(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,bs(this.user,nf(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),af=new WeakMap;var of="__sak",uf=function(){function e(t,n){gt(this,e),this.storageRetriever=t,this.type=n}return bt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch(qA){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var sf=function(e){xt(n,e);var t=At(n);function n(){var e;return gt(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ka();return Bs(e)||Gs(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Xs(),e._shouldAllowMigration=!0,e}return bt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Ys()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ot(Nt().mark((function e(t,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(_t(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ot(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(_t(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(_t(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(uf);sf.type="LOCAL";var cf=sf,lf=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return bt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(uf);lf.type="SESSION";var ff=lf;function hf(e){return Promise.all(e.map(function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var df=function(){function e(t){gt(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return bt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ot(Nt().mark((function e(t){var n,r,i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,hf(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function pf(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}df.receivers=[];var vf=function(){function e(t){gt(this,e),this.target=t,this.handlers=new Set}return bt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ot(Nt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=pf("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function yf(){return window}function mf(){return"undefined"!==typeof yf().WorkerGlobalScope&&"function"===typeof yf().importScripts}function gf(){return kf.apply(this,arguments)}function kf(){return(kf=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function bf(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var wf="firebaseLocalStorageDb",xf="firebaseLocalStorage",_f="fbase_key",Ef=function(){function e(t){gt(this,e),this.request=t}return bt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function If(e,t){return e.transaction([xf],t?"readwrite":"readonly").objectStore(xf)}function Sf(){var e=indexedDB.deleteDatabase(wf);return new Ef(e).toPromise()}function Tf(){var e=indexedDB.open(wf,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(xf,{keyPath:_f})}catch(r){n(r)}})),e.addEventListener("success",Ot(Nt().mark((function n(){var r;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(xf)){n.next=12;break}return r.close(),n.next=5,Sf();case 5:return n.t0=t,n.next=8,Tf();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Af(e,t,n){return Cf.apply(this,arguments)}function Cf(){return Cf=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=If(t,!0).put((Te(i={},_f,n),Te(i,"value",r),i)),e.abrupt("return",new Ef(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Nf(e,t){return Df.apply(this,arguments)}function Df(){return Df=Ot(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=If(t,!1).get(n),e.next=3,new Ef(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Df.apply(this,arguments)}function Of(e,t){var n=If(e,!0).delete(t);return new Ef(n).toPromise()}var Rf=function(){function e(){gt(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return bt(e,[{key:"_openDb",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Tf();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mf()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ot(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=df._getInstance(mf()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ot(Nt().mark((function e(n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gf();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new vf(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&bf()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Tf();case 5:return t=e.sent,e.next=8,Af(t,of,"1");case 8:return e.next=10,Of(t,of);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ot(Nt().mark((function e(t,n){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Af(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Nf(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ot(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Of(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=If(e,!1).getAll();return new Ef(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Ct(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ot(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Rf.type="LOCAL";var Pf=Rf;function Lf(e,t){return ts(e,"POST","/v2/accounts/mfaSignIn:start",es(e,t))}function Mf(e){return Ff.apply(this,arguments)}function Ff(){return Ff=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ts(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Ff.apply(this,arguments)}function Uf(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Fu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function jf(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Vf=1e12,Bf=function(){function e(t){gt(this,e),this.auth=t,this.counter=Vf,this._widgets=new Map}return bt(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new zf(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Vf;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Vf;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Vf,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),zf=function(){function e(t,n,r){var i=this;gt(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Bu(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return bt(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var qf=jf("rcb"),Kf=new Yu(3e4,6e4),Hf="https://www.google.com/recaptcha/api.js?",Wf=function(){function e(){var t;gt(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=yf().grecaptcha)||void 0===t?void 0:t.render)}return bt(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Bu(Gf(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(yf().grecaptcha):new Promise((function(r,i){var a=yf().setTimeout((function(){i(Fu(e,"network-request-failed"))}),Kf.get());yf()[qf]=function(){yf().clearTimeout(a),delete yf()[qf];var o=yf().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Fu(e,"internal-error"))},Uf("".concat(Hf,"?").concat(Fa({onload:qf,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Fu(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=yf().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Gf(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Qf=function(){function e(){gt(this,e)}return bt(e,[{key:"load",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Bf(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Yf="recaptcha",Xf={theme:"light",type:"image"},$f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Xf),r=arguments.length>2?arguments[2]:void 0;gt(this,e),this.parameters=n,this.type=Yf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ec(r),this.isInvisible="invisible"===this.parameters.size,Bu("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Bu(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qf:new Wf,this.validateStartingState()}return bt(e,[{key:"verify",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Bu(!this.parameters.sitekey,this.auth,"argument-error"),Bu(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Bu("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=yf()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Bu(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ot(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bu(Gu()&&!mf(),this.auth,"internal-error"),e.next=3,Jf();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Mf(this.auth);case 8:Bu(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Bu(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Jf(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Zf=function(){function e(t,n){gt(this,e),this.verificationId=t,this.onConfirmation=n}return bt(e,[{key:"confirm",value:function(e){var t=Uc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function eh(){return eh=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ec(t),e.next=3,ih(i,n,qa(r));case 3:return a=e.sent,e.abrupt("return",new Zf(a,(function(e){return pl(i,e)})));case 5:case"end":return e.stop()}}),e)}))),eh.apply(this,arguments)}function th(e,t,n){return nh.apply(this,arguments)}function nh(){return(nh=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qa(t),e.next=3,sl(!1,i,"phone");case 3:return e.next=5,ih(i.auth,n,qa(r));case 5:return a=e.sent,e.abrupt("return",new Zf(a,(function(e){return yl(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rh(){return(rh=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qa(t),e.next=3,ih(i.auth,n,qa(r));case 3:return a=e.sent,e.abrupt("return",new Zf(a,(function(e){return gl(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ih(e,t,n){return ah.apply(this,arguments)}function ah(){return ah=Ot(Nt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Bu("string"===typeof a,t,"argument-error"),Bu(r.type===Yf,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Bu("enroll"===u.type,t,"internal-error"),e.next=13,tf(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Bu("signin"===u.type,t,"internal-error"),Bu(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Lf(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Oc(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ah.apply(this,arguments)}function oh(){return(oh=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ol(qa(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uh=function(){function e(t){gt(this,e),this.providerId=e.PROVIDER_ID,this.auth=ec(t)}return bt(e,[{key:"verifyPhoneNumber",value:function(e,t){return ih(this.auth,e,qa(t))}}],[{key:"credential",value:function(e,t){return Uc._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Uc._fromTokenResponse(n,r):null}}]),e}();function sh(e,t){return t?Hu(t):(Bu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}uh.PROVIDER_ID="phone",uh.PHONE_SIGN_IN_METHOD="phone";var ch=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this,"custom","custom")).params=e,r}return bt(n,[{key:"_getIdTokenResponse",value:function(e){return Cc(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Cc(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Cc(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ac);function lh(e){return hl(e.auth,new ch(e),e.bypassAuthState)}function fh(e){var t=e.auth,n=e.user;return Bu(n,t,"internal-error"),ll(n,new ch(e),e.bypassAuthState)}function hh(e){return dh.apply(this,arguments)}function dh(){return dh=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Bu(r=t.user,n,"internal-error"),e.abrupt("return",ol(r,new ch(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),dh.apply(this,arguments)}var ph=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];gt(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return bt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ot(Nt().mark((function t(n,r){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ot(Nt().mark((function e(t){var n,r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lh;case"linkViaPopup":case"linkViaRedirect":return hh;case"reauthViaPopup":case"reauthViaRedirect":return fh;default:Mu(this.auth,"internal-error")}}},{key:"resolve",value:function(e){qu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){qu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),vh=new Yu(2e3,1e4);function yh(e,t,n){return mh.apply(this,arguments)}function mh(){return mh=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ec(t),ju(t,n,Bc),a=sh(i,r),o=new wh(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),mh.apply(this,arguments)}function gh(){return(gh=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ju((i=qa(t)).auth,n,Bc),a=sh(i.auth,r),o=new wh(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kh(e,t,n){return bh.apply(this,arguments)}function bh(){return(bh=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ju((i=qa(t)).auth,n,Bc),a=sh(i.auth,r),o=new wh(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wh=function(e){xt(n,e);var t=At(n);function n(e,r,i,a,o){var u;return gt(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=St(u),u}return bt(n,[{key:"executeNotNull",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Bu(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ot(Nt().mark((function e(){var t,n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qu(1===this.filter.length,"Popup operations only handle one event"),t=pf(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Fu(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Fu(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Fu(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,vh.get())}()}}]),n}(ph);wh.currentPopupAction=null;var xh=new Map,_h=function(e){xt(n,e);var t=At(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return gt(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return bt(n,[{key:"execute",value:function(){var e=Ot(Nt().mark((function e(){var t,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xh.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Eh(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,yu(_t(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:xh.set(this.auth._key(),t);case 21:return this.bypassAuthState||xh.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ot(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",yu(_t(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",yu(_t(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ph);function Eh(e,t){return Ih.apply(this,arguments)}function Ih(){return Ih=Ot(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nh(n),i=Ch(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ih.apply(this,arguments)}function Sh(e,t){return Th.apply(this,arguments)}function Th(){return Th=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ch(t)._set(Nh(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Th.apply(this,arguments)}function Ah(e,t){xh.set(e._key(),t)}function Ch(e){return Hu(e._redirectPersistence)}function Nh(e){return Fs("pendingRedirect",e.config.apiKey,e.name)}function Dh(e,t,n){return function(e,t,n){return Oh.apply(this,arguments)}(e,t,n)}function Oh(){return Oh=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ec(t),ju(t,n,Bc),a=sh(i,r),e.next=5,Sh(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Oh.apply(this,arguments)}function Rh(e,t,n){return function(e,t,n){return Ph.apply(this,arguments)}(e,t,n)}function Ph(){return(Ph=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ju((i=qa(t)).auth,n,Bc),a=sh(i.auth,r),e.next=5,Sh(a,i.auth);case 5:return e.next=7,Bh(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lh(e,t,n){return function(e,t,n){return Mh.apply(this,arguments)}(e,t,n)}function Mh(){return(Mh=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ju((i=qa(t)).auth,n,Bc),a=sh(i.auth,r),e.next=5,sl(!1,i,n.providerId);case 5:return e.next=7,Sh(a,i.auth);case 7:return e.next=9,Bh(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fh(e,t){return Uh.apply(this,arguments)}function Uh(){return Uh=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ec(t)._initializationPromise;case 2:return e.abrupt("return",jh(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Uh.apply(this,arguments)}function jh(e,t){return Vh.apply(this,arguments)}function Vh(){return Vh=Ot(Nt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ec(t),a=sh(i,n),o=new _h(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Vh.apply(this,arguments)}function Bh(e){return zh.apply(this,arguments)}function zh(){return(zh=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pf("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qh=function(){function e(t){gt(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return bt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Hh(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fu(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kh(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Kh(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Kh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Hh(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Wh(e){return Gh.apply(this,arguments)}function Gh(){return Gh=Ot(Nt().mark((function e(t){var n,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",ts(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Gh.apply(this,arguments)}var Qh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yh=/^https?/;function Xh(){return Xh=Ot(Nt().mark((function e(t){var n,r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Wh(t);case 4:n=e.sent,r=n.authorizedDomains,i=Ct(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!$h(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Mu(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Xh.apply(this,arguments)}function $h(e){var t=Wu(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Yh.test(r))return!1;if(Qh.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Jh=new Yu(3e4,6e4);function Zh(){var e=yf().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=mt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ed=null;function td(e){return ed=ed||function(e){return new Promise((function(t,n){var r,i,a;function o(){Zh(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Zh(),n(Fu(e,"network-request-failed"))},timeout:Jh.get()})}if(null===(i=null===(r=yf().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=yf().gapi)||void 0===a?void 0:a.load)){var u=jf("iframefcb");return yf()[u]=function(){gapi.load?o():n(Fu(e,"network-request-failed"))},Uf("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ed=null,e}))}(e),ed}var nd=new Yu(5e3,15e3),rd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},id=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ad(e){var t=e.config;Bu(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Xu(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Uo},i=id.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Fa(r).slice(1))}function od(e){return ud.apply(this,arguments)}function ud(){return ud=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,td(t);case 2:return n=e.sent,Bu(r=yf().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ad(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rd,dontclear:!0},(function(e){return new Promise(function(){var n=Ot(Nt().mark((function n(r,i){var a,o,u;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){yf().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Fu(t,"network-request-failed"),o=yf().setTimeout((function(){i(a)}),nd.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ud.apply(this,arguments)}var sd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cd="_blank",ld="http://localhost",fd=function(){function e(t){gt(this,e),this.window=t,this.associatedEvent=null}return bt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function hd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},sd),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ka().toLowerCase();n&&(u=zs(c)?cd:n),Vs(c)&&(t=t||ld,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=vt(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Qs(c)&&"_self"!==u)return dd(t||"",u),new fd(null);var f=window.open(t||"",u,l);Bu(f,e,"popup-blocked");try{f.focus()}catch(h){}return new fd(f)}function dd(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var pd="__/auth/handler",vd="emulator/auth/handler";function yd(e,t,n,r,i,a){Bu(e.config.authDomain,e,"auth-domain-config-required"),Bu(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Uo,eventId:i};if(t instanceof Bc){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=vt(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof zc){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(pd);return Xu(t,vd)}(e),"?").concat(Fa(d).slice(1))}var md="webStorageSupport",gd=function(){function e(){gt(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ff,this._completeRedirectFn=jh,this._overrideRedirectResult=Ah}return bt(e,[{key:"_openPopup",value:function(){var e=Ot(Nt().mark((function e(t,n,r,i){var a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qu(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=yd(t,n,r,Wu(),i),e.abrupt("return",hd(t,o,pf()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ot(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=yd(t,n,r,Wu(),i),yf().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(qu(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,od(t);case 2:return n=e.sent,r=new qh(t),n.register("authEvent",(function(e){return Bu(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(md,{type:md},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Mu(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Xh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Xs()||Bs()||Gs()}}]),e}(),kd=gd,bd=function(){function e(t){gt(this,e),this.factorId=t}return bt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return zu("unexpected MultiFactorSessionType")}}}]),e}(),wd=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this,"phone")).credential=e,r}return bt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return ts(e,"POST","/v2/accounts/mfaEnrollment:finalize",es(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return ts(e,"POST","/v2/accounts/mfaSignIn:finalize",es(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(bd),xd=function(){function e(){gt(this,e)}return bt(e,null,[{key:"assertion",value:function(e){return wd._fromCredential(e)}}]),e}();xd.FACTOR_ID="phone";var _d="@firebase/auth",Ed="0.20.8",Id=function(){function e(t){gt(this,e),this.auth=t,this.internalListeners=new Map}return bt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Bu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Sd;!function(e){var t;null===(t=Sa())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Td(){return window}Sd="Browser",Do(new Ka("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Bu(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Bu(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Sd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$s(Sd)},i=new Zs(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hu);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Do(new Ka("auth-internal",(function(e){return function(e){return new Id(e)}(ec(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ko(_d,Ed,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Sd)),Ko(_d,Ed,"esm2017");function Ad(e,t,n){return Cd.apply(this,arguments)}function Cd(){return Cd=Ot(Nt().mark((function e(t,n,r){var i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Td(),o=a.BuildInfo,qu(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Ld(n.sessionId);case 4:return u=e.sent,s={},Gs()?s.ibi=o.packageName:Ks()?s.apn=o.packageName:Mu(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",yd(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Cd.apply(this,arguments)}function Nd(){return Nd=Ot(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Td(),r=n.BuildInfo,i={},Gs()?i.iosBundleId=r.packageName:Ks()?i.androidPackageName=r.packageName:Mu(t,"operation-not-supported-in-this-environment"),e.next=5,Wh(t,i);case 5:case"end":return e.stop()}}),e)}))),Nd.apply(this,arguments)}function Dd(e){var t=Td().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Od(e,t,n){return Rd.apply(this,arguments)}function Rd(){return Rd=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Td(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Fu(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ks()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Rd.apply(this,arguments)}function Pd(e){var t,n,r,i,a,o,u,s,c,l,f=Td();Bu("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Bu("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Bu("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bu("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Bu("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Ld(e){return Md.apply(this,arguments)}function Md(){return(Md=Ot(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fd(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fd(e){if(qu(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ud=function(e){xt(n,e);var t=At(n);function n(){var e;return gt(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return bt(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),yu(_t(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(qh);function jd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Kd(),postBody:null,tenantId:e.tenantId,error:Fu(e,"no-auth-event")}}function Vd(e,t){return Hd()._set(Wd(e),t)}function Bd(e){return zd.apply(this,arguments)}function zd(){return zd=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hd()._get(Wd(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Hd()._remove(Wd(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),zd.apply(this,arguments)}function qd(e,t){var n,r,i=function(e){var t=Gd(e),n=t.link?decodeURIComponent(t.link):void 0,r=Gd(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Gd(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Gd(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Fu(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Kd(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Hd(){return Hu(cf)}function Wd(e){return Fs("authEvent",e.config.apiKey,e.name)}function Gd(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=ft(t=n)||yt(t)||dt(t)||pt();r[0];return Ua(r.slice(1).join("?"))}var Qd=function(){function e(){gt(this,e),this._redirectPersistence=ff,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=jh,this._overrideRedirectResult=Ah}return bt(e,[{key:"_initialize",value:function(){var e=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ud(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Mu(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ot(Nt().mark((function e(t,n,r,i){var a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pd(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),xh.clear(),e.next=10,this._originValidation(t);case 10:return o=jd(t,r,i),e.next=13,Vd(t,o);case 13:return e.next=15,Ad(t,o,n);case 15:return u=e.sent,e.next=18,Dd(u);case 18:return s=e.sent,e.abrupt("return",Od(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Nd.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Td(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ot(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Bd(e);case 2:t.onEvent(Xd());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ot(Nt().mark((function n(r){var i,a;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Bd(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=qd(i,r.url)),t.onEvent(a||Xd());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Td().handleOpenURL=function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Yd=Qd;function Xd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fu("no-auth-event")}}function $d(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Jd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return!("file:"!==$d()&&"ionic:"!==$d()&&"capacitor:"!==$d()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zd(){return _a()&&11===(null===document||void 0===document?void 0:document.documentMode)}function ep(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return/Edge\/\d+/.test(e)}function tp(){try{var e=self.localStorage,t=pf();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka();return Zd()||ep(e)}()||Ea()}catch(n){return np()&&Ea()}return!1}function np(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function rp(){return("http:"===$d()||"https:"===$d()||wa()||Jd())&&!(xa()||ba())&&tp()&&!np()}function ip(){return Jd()&&"undefined"!==typeof document}function ap(){return op.apply(this,arguments)}function op(){return(op=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ip()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var up={LOCAL:"local",NONE:"none",SESSION:"session"},sp=Bu,cp="persistence";function lp(e,t){sp(Object.values(up).includes(t),e,"invalid-persistence-type"),xa()?sp(t!==up.SESSION,e,"unsupported-persistence-type"):ba()?sp(t===up.NONE,e,"unsupported-persistence-type"):np()?sp(t===up.NONE||t===up.LOCAL&&Ea(),e,"unsupported-persistence-type"):sp(t===up.NONE||tp(),e,"unsupported-persistence-type")}function fp(e){return hp.apply(this,arguments)}function hp(){return hp=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=dp(),r=Fs(cp,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function dp(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var pp=Bu,vp=function(){function e(){gt(this,e),this.browserResolver=Hu(kd),this.cordovaResolver=Hu(Yd),this.underlyingResolver=null,this._redirectPersistence=ff,this._completeRedirectFn=jh,this._overrideRedirectResult=Ah}return bt(e,[{key:"_initialize",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ot(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ot(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return ip()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return pp(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ap();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function yp(e){return e.unwrap()}function mp(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new xp(e,function(e,t){var n,r=qa(e),i=t;return Bu(t.customData.operationType,r,"argument-error"),Bu(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ef._fromError(r,i)}(e,t));else if(i){var a=gp(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function gp(e){var t=(e instanceof Na?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Na)&&"temporaryProof"in t&&"phoneNumber"in t)return uh.credentialFromResult(e);var n,r=t.providerId;if(!r||r===xu)return null;switch(r){case wu:n=Hc;break;case ku:n=Kc;break;case bu:n=Wc;break;case _u:n=Yc;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Gc._create(r,u):Dc._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new qc(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Na?n.credentialFromError(e):n.credentialFromResult(e)}function kp(e,t){return t.catch((function(t){throw t instanceof Na&&mp(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,gp(t)),additionalUserInfo:Jl(e),user:_p.getOrCreate(r)}}))}function bp(e,t){return wp.apply(this,arguments)}function wp(){return wp=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return kp(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),wp.apply(this,arguments)}var xp=function(){function e(t,n){gt(this,e),this.resolver=n,this.auth=t.wrapped()}return bt(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return kp(yp(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),_p=function(){function e(t){gt(this,e),this._delegate=t,this.multiFactor=function(e){var t=qa(e);return af.has(t)||af.set(t,rf._fromUser(t)),af.get(t)}(t)}return bt(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp(this.auth,yl(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bp(this.auth,th(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp(this.auth,kh(this._delegate,t,vp)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fp(ec(this.auth));case 2:return e.abrupt("return",Lh(this._delegate,t,vp));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp(this.auth,gl(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return bp(this.auth,function(e,t,n){return rh.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return kp(this.auth,function(e,t,n){return gh.apply(this,arguments)}(this._delegate,e,vp))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fp(ec(this.auth));case 2:return e.abrupt("return",Rh(this._delegate,t,vp));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return jl.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,il(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Kl(qa(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Kl(qa(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return oh.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ql.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Vl.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();_p.USER_MAP=new WeakMap;var Ep=Bu,Ip=function(){function e(t,n){if(gt(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ep(r,"invalid-api-key",{appName:t.name}),Ep(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?vp:void 0;this._delegate=n.initialize({options:{persistence:Tp(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Du),this.linkUnderlyingAuth()}return bt(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?_p.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){nc(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Al.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Cl(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Tl.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kp(this._delegate,Ol(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ul.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=jc.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ep(rp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Fh(this._delegate,vp);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",kp(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ec(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Sp(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Sp(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Pl.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Sl.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lp(this._delegate,t),e.t0=t,e.next=e.t0===up.SESSION?4:e.t0===up.LOCAL?6:e.t0===up.NONE?11:13;break;case 4:return n=ff,e.abrupt("break",14);case 6:return e.next=8,Hu(Pf)._isAvailable();case 8:return r=e.sent,n=r?Pf:cf,e.abrupt("break",14);case 11:return n=Ms,e.abrupt("break",14);case 13:return e.abrupt("return",Mu("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return kp(this._delegate,function(e){return el.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return kp(this._delegate,pl(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return kp(this._delegate,function(e,t){return xl.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return kp(this._delegate,function(e,t,n){return pl(qa(e),Vc.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return kp(this._delegate,function(e,t,n){return Ll.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return bp(this._delegate,function(e,t,n){return eh.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ep(rp(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",kp(this._delegate,yh(this._delegate,t,vp)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ep(rp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,fp(this._delegate);case 3:return e.abrupt("return",Dh(this._delegate,t,vp));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Dl.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Sp(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&_p.getOrCreate(e))},error:t,complete:n}}function Tp(e,t){var n=function(e,t){var n=dp();if(!n)return[];var r=Fs(cp,e,t);switch(n.getItem(r)){case up.NONE:return[Ms];case up.LOCAL:return[Pf,ff];case up.SESSION:return[ff];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Pf)||n.push(Pf),"undefined"!==typeof window)for(var r=0,i=[cf,ff];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Ms)||n.push(Ms),n}Ip.Persistence=up;var Ap=function(){function e(){gt(this,e),this.providerId="phone",this._delegate=new uh(yp(pu.auth()))}return bt(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return uh.credential(e,t)}}]),e}();Ap.PHONE_SIGN_IN_METHOD=uh.PHONE_SIGN_IN_METHOD,Ap.PROVIDER_ID=uh.PROVIDER_ID;var Cp=Bu,Np=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pu.app();gt(this,e),Cp(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new $f(t,n,i.auth()),this.type=this._delegate.type}return bt(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Ka("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ip(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Eu,PASSWORD_RESET:Iu,RECOVER_EMAIL:Su,REVERT_SECOND_FACTOR_ADDITION:Tu,VERIFY_AND_CHANGE_EMAIL:Au,VERIFY_EMAIL:Cu}},EmailAuthProvider:Vc,FacebookAuthProvider:Kc,GithubAuthProvider:Wc,GoogleAuthProvider:Hc,OAuthProvider:qc,SAMLAuthProvider:Qc,PhoneAuthProvider:Ap,PhoneMultiFactorGenerator:xd,RecaptchaVerifier:Np,TwitterAuthProvider:Yc,Auth:Ip,AuthCredential:ac,Error:Na}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.21")}(pu);var Dp,Op="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Rp={},Pp=Pp||{},Lp=Op||self;function Mp(){}function Fp(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Up(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var jp="closure_uid_"+(1e9*Math.random()>>>0),Vp=0;function Bp(e,t,n){return e.call.apply(e.bind,arguments)}function zp(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function qp(e,t,n){return(qp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bp:zp).apply(null,arguments)}function Kp(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Hp(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Wp(){this.s=this.s,this.o=this.o}var Gp={};Wp.prototype.s=!1,Wp.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,jp)&&e[jp]||(e[jp]=++Vp)}(this);delete Gp[e]}},Wp.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Qp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Yp(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Xp(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Fp(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function $p(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}$p.prototype.h=function(){this.defaultPrevented=!0};var Jp=function(){if(!Lp.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Lp.addEventListener("test",Mp,t),Lp.removeEventListener("test",Mp,t)}catch(P){}return e}();function Zp(e){return/^[\s\xa0]*$/.test(e)}var ev=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function tv(e,t){return e<t?-1:e>t?1:0}function nv(){var e=Lp.navigator;return e&&(e=e.userAgent)?e:""}function rv(e){return-1!=nv().indexOf(e)}function iv(e){return iv[" "](e),e}iv[" "]=Mp;var av,ov=rv("Opera"),uv=rv("Trident")||rv("MSIE"),sv=rv("Edge"),cv=sv||uv,lv=rv("Gecko")&&!(-1!=nv().toLowerCase().indexOf("webkit")&&!rv("Edge"))&&!(rv("Trident")||rv("MSIE"))&&!rv("Edge"),fv=-1!=nv().toLowerCase().indexOf("webkit")&&!rv("Edge");function hv(){var e=Lp.document;return e?e.documentMode:void 0}e:{var dv="",pv=function(){var e=nv();return lv?/rv:([^\);]+)(\)|;)/.exec(e):sv?/Edge\/([\d\.]+)/.exec(e):uv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):fv?/WebKit\/(\S+)/.exec(e):ov?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(pv&&(dv=pv?pv[1]:""),uv){var vv=hv();if(null!=vv&&vv>parseFloat(dv)){av=String(vv);break e}}av=dv}var yv,mv={};function gv(){return function(e){var t=mv;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ev(String(av)).split("."),n=ev("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=tv(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||tv(0==a[2].length,0==o[2].length)||tv(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Lp.document&&uv){var kv=hv();yv=kv||(parseInt(av,10)||void 0)}else yv=void 0;var bv=yv;function wv(e,t){if($p.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(lv){e:{try{iv(t.nodeName);var i=!0;break e}catch(R){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:xv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&wv.X.h.call(this)}}Hp(wv,$p);var xv={2:"touch",3:"pen",4:"mouse"};wv.prototype.h=function(){wv.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _v="closure_listenable_"+(1e6*Math.random()|0),Ev=0;function Iv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Ev,this.ba=this.ea=!1}function Sv(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Tv(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Av(e){var t={};for(var n in e)t[n]=e[n];return t}var Cv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nv(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Cv.length;a++)n=Cv[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Dv(e){this.src=e,this.g={},this.h=0}function Ov(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Qp(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Sv(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Rv(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Dv.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Rv(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Iv(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Pv="closure_lm_"+(1e6*Math.random()|0),Lv={};function Mv(e,t,n,r,i){if(r&&r.once)return Uv(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Mv(e,t[a],n,r,i);return null}return n=Hv(n),e&&e[_v]?e.N(t,n,Up(r)?!!r.capture:!!r,i):Fv(e,t,n,!1,r,i)}function Fv(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Up(i)?!!i.capture:!!i,u=qv(e);if(u||(e[Pv]=u=new Dv(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=zv;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jp||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Bv(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Uv(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Uv(e,t[a],n,r,i);return null}return n=Hv(n),e&&e[_v]?e.O(t,n,Up(r)?!!r.capture:!!r,i):Fv(e,t,n,!0,r,i)}function jv(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)jv(e,t[a],n,r,i);else r=Up(r)?!!r.capture:!!r,n=Hv(n),e&&e[_v]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Rv(a=e.g[t],n,r,i))&&(Sv(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=qv(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Rv(t,n,r,i)),(n=-1<e?t[e]:null)&&Vv(n))}function Vv(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[_v])Ov(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Bv(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=qv(t))?(Ov(n,e),0==n.h&&(n.src=null,t[Pv]=null)):Sv(e)}}}function Bv(e){return e in Lv?Lv[e]:Lv[e]="on"+e}function zv(e,t){if(e.ba)e=!0;else{t=new wv(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Vv(e),e=n.call(r,t)}return e}function qv(e){return(e=e[Pv])instanceof Dv?e:null}var Kv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hv(e){return"function"===typeof e?e:(e[Kv]||(e[Kv]=function(t){return e.handleEvent(t)}),e[Kv])}function Wv(){Wp.call(this),this.i=new Dv(this),this.P=this,this.I=null}function Gv(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new $p(t,e);else if(t instanceof $p)t.target=t.target||e;else{var i=t;Nv(t=new $p(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Qv(o,r,!0,t)&&i}if(i=Qv(o=t.g=e,r,!0,t)&&i,i=Qv(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Qv(o=t.g=n[a],r,!1,t)&&i}function Qv(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Ov(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Hp(Wv,Wp),Wv.prototype[_v]=!0,Wv.prototype.removeEventListener=function(e,t,n,r){jv(this,e,t,n,r)},Wv.prototype.M=function(){if(Wv.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Sv(n[r]);delete t.g[e],t.h--}}this.I=null},Wv.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Wv.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Yv=Lp.JSON.stringify;function Xv(){var e=iy,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var $v,Jv=function(){function e(){gt(this,e),this.h=this.g=null}return bt(e,[{key:"add",value:function(e,t){var n=Zv.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Zv=new(function(){function e(t,n){gt(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return bt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ey}),(function(e){return e.reset()})),ey=function(){function e(){gt(this,e),this.next=this.g=this.h=null}return bt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ty(e){Lp.setTimeout((function(){throw e}),0)}function ny(e,t){$v||function(){var e=Lp.Promise.resolve(void 0);$v=function(){e.then(ay)}}(),ry||($v(),ry=!0),iy.add(e,t)}var ry=!1,iy=new Jv;function ay(){for(var e;e=Xv();){try{e.h.call(e.g)}catch(P){ty(P)}var t=Zv;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ry=!1}function oy(e,t){Wv.call(this),this.h=e||1,this.g=t||Lp,this.j=qp(this.kb,this),this.l=Date.now()}function uy(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function sy(e,t,n){if("function"===typeof e)n&&(e=qp(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=qp(e.handleEvent,e)}return 2147483647<Number(t)?-1:Lp.setTimeout(e,t||0)}function cy(e){e.g=sy((function(){e.g=null,e.i&&(e.i=!1,cy(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Hp(oy,Wv),(Dp=oy.prototype).ca=!1,Dp.R=null,Dp.kb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Gv(this,"tick"),this.ca&&(uy(this),this.start()))}},Dp.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dp.M=function(){oy.X.M.call(this),uy(this),delete this.g};var ly=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return bt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:cy(this)}},{key:"M",value:function(){yu(_t(n.prototype),"M",this).call(this),this.g&&(Lp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Wp);function fy(e){Wp.call(this),this.h=e,this.g={}}Hp(fy,Wp);var hy=[];function dy(e,t,n,r){Array.isArray(n)||(n&&(hy[0]=n.toString()),n=hy);for(var i=0;i<n.length;i++){var a=Mv(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function py(e){Tv(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Vv(e)}),e),e.g={}}function vy(){this.g=!0}function yy(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Yv(n)}catch(S){return t}}(e,n)+(r?" "+r:"")}))}fy.prototype.M=function(){fy.X.M.call(this),py(this)},fy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vy.prototype.Aa=function(){this.g=!1},vy.prototype.info=function(){};var my={},gy=null;function ky(){return gy=gy||new Wv}function by(e){$p.call(this,my.Oa,e)}function wy(e){var t=ky();Gv(t,new by(t,e))}function xy(e,t){$p.call(this,my.STAT_EVENT,e),this.stat=t}function _y(e){var t=ky();Gv(t,new xy(t,e))}function Ey(e,t){$p.call(this,my.Pa,e),this.size=t}function Iy(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Lp.setTimeout((function(){e()}),t)}my.Oa="serverreachability",Hp(by,$p),my.STAT_EVENT="statevent",Hp(xy,$p),my.Pa="timingevent",Hp(Ey,$p);var Sy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},Ty={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ay(){}function Cy(e){return e.h||(e.h=e.i())}function Ny(){}Ay.prototype.h=null;var Dy,Oy={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function Ry(){$p.call(this,"d")}function Py(){$p.call(this,"c")}function Ly(){}function My(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new fy(this),this.O=Uy,e=cv?125:void 0,this.T=new oy(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Fy}function Fy(){this.i=null,this.g="",this.h=!1}Hp(Ry,$p),Hp(Py,$p),Hp(Ly,Ay),Ly.prototype.g=function(){return new XMLHttpRequest},Ly.prototype.i=function(){return{}},Dy=new Ly;var Uy=45e3,jy={},Vy={};function By(e,t,n){e.K=1,e.v=om(tm(t)),e.s=n,e.P=!0,zy(e,null)}function zy(e,t){e.F=Date.now(),Wy(e),e.A=tm(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),km(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Fy,e.g=kg(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ly(qp(e.Ka,e,e.g),e.N)),dy(e.S,e.g,"readystatechange",e.hb),t=e.H?Av(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),wy(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function qy(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Ky(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Hy(e,n))==Vy){4==t&&(e.o=4,_y(14),i=!1),yy(e.j,e.m,null,"[Incomplete Response]");break}if(r==jy){e.o=4,_y(15),yy(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}yy(e.j,e.m,r,null),$y(e,r)}qy(e)&&r!=Vy&&r!=jy&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,_y(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),fg(t),t.K=!0,_y(11))):(yy(e.j,e.m,n,"[Invalid Chunked Response]"),Xy(e),Yy(e))}function Hy(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Vy:(n=Number(t.substring(n,r)),isNaN(n)?jy:(r+=1)+n>t.length?Vy:(t=t.substr(r,n),e.C=r+n,t))}function Wy(e){e.V=Date.now()+e.O,Gy(e,e.O)}function Gy(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Iy(qp(e.fb,e),t)}function Qy(e){e.B&&(Lp.clearTimeout(e.B),e.B=null)}function Yy(e){0==e.l.G||e.I||pg(e.l,e)}function Xy(e){Qy(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,uy(e.T),py(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function $y(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Sm(n.h,e)))if(!e.J&&Sm(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;dg(n),rg(n)}lg(n),_y(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Iy(qp(n.bb,n),6e3));if(1>=Im(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else yg(n,11)}else if((e.J||n.g==e)&&dg(n),!Zp(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Tm(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,am(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=gg(r,r.H?r.ka:null,r.V),d.J){Am(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Qy(p),Wy(p)),r.g=d}else cg(r);0<n.i.length&&ag(n)}else"stop"!=a[0]&&"close"!=a[0]||yg(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?yg(n,7):ng(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}wy(4)}catch(a){}}function Jy(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Fp(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Fp(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Fp(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Dp=My.prototype).setTimeout=function(e){this.O=e},Dp.hb=function(e){e=e.target;var t=this.L;t&&3==Xm(e)?t.l():this.Ka(e)},Dp.Ka=function(e){try{if(e==this.g)e:{var t=Xm(this.g),n=this.g.Ea(),r=this.g.aa();if(!(3>t)&&(3!=t||cv||this.g&&(this.h.h||this.g.fa()||$m(this.g)))){this.I||4!=t||7==n||wy(8==n||0>=r?3:2),Qy(this);var i=this.g.aa();this.Y=i;t:if(qy(this)){var a=$m(this.g);e="";var o=a.length,u=4==Xm(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xy(this),Yy(this);var s="";break t}this.h.i=new Lp.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,i),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zp(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,_y(12),Xy(this),Yy(this);break e}yy(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$y(this,i)}this.P?(Ky(this,t,s),cv&&this.i&&3==t&&(dy(this.S,this.T,"tick",this.gb),this.T.start())):(yy(this.j,this.m,s,null),$y(this,s)),4==t&&Xy(this),this.i&&!this.I&&(4==t?pg(this.l,this):(this.i=!1,Wy(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,_y(12)):(this.o=0,_y(13)),Xy(this),Yy(this)}}}catch(t){}},Dp.gb=function(){if(this.g){var e=Xm(this.g),t=this.g.fa();this.C<t.length&&(Qy(this),Ky(this,e,t),this.i&&4!=e&&Wy(this))}},Dp.cancel=function(){this.I=!0,Xy(this)},Dp.fb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(wy(3),_y(17)),Xy(this),this.o=2,Yy(this)):Gy(this,this.V-e)};var Zy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function em(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof em){this.h=void 0!==t?t:e.h,nm(this,e.j),this.s=e.s,this.g=e.g,rm(this,e.m),this.l=e.l,t=e.i;var n=new vm;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),im(this,n),this.o=e.o}else e&&(n=String(e).match(Zy))?(this.h=!!t,nm(this,n[1]||"",!0),this.s=um(n[2]||""),this.g=um(n[3]||"",!0),rm(this,n[4]),this.l=um(n[5]||"",!0),im(this,n[6]||"",!0),this.o=um(n[7]||"")):(this.h=!!t,this.i=new vm(null,this.h))}function tm(e){return new em(e)}function nm(e,t,n){e.j=n?um(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function rm(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function im(e,t,n){t instanceof vm?(e.i=t,function(e,t){t&&!e.j&&(ym(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(mm(this,t),km(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=sm(t,dm)),e.i=new vm(t,e.h))}function am(e,t,n){e.i.set(t,n)}function om(e){return am(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function um(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sm(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,cm),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cm(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}em.prototype.toString=function(){var e=[],t=this.j;t&&e.push(sm(t,lm,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(sm(t,lm,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(sm(n,"/"==n.charAt(0)?hm:fm,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",sm(n,pm)),e.join("")};var lm=/[#\/\?@]/g,fm=/[#\?:]/g,hm=/[#\?]/g,dm=/[#\?@]/g,pm=/#/g;function vm(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ym(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function mm(e,t){ym(e),t=bm(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function gm(e,t){return ym(e),t=bm(e,t),e.g.has(t)}function km(e,t,n){mm(e,t),0<n.length&&(e.i=null,e.g.set(bm(e,t),Yp(n)),e.h+=n.length)}function bm(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Dp=vm.prototype).add=function(e,t){ym(this),this.i=null,e=bm(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Dp.forEach=function(e,t){ym(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Dp.oa=function(){ym(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Dp.W=function(e){ym(this);var t=[];if("string"===typeof e)gm(this,e)&&(t=t.concat(this.g.get(bm(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Dp.set=function(e,t){return ym(this),this.i=null,gm(this,e=bm(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Dp.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Dp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var wm=bt((function e(t,n){gt(this,e),this.h=t,this.g=n}));function xm(e){this.l=e||_m,Lp.PerformanceNavigationTiming?e=0<(e=Lp.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Lp.g&&Lp.g.Ga&&Lp.g.Ga()&&Lp.g.Ga().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _m=10;function Em(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Im(e){return e.h?1:e.g?e.g.size:0}function Sm(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Tm(e,t){e.g?e.g.add(t):e.h=t}function Am(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Cm(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Ct(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Yp(e.i)}function Nm(){}function Dm(){this.g=new Nm}function Om(e,t,n){var r=n||"";try{Jy(e,(function(e,n){var i=e;Up(e)&&(i=Yv(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Rm(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(R){}}function Pm(e){this.l=e.$b||null,this.j=e.ib||!1}function Lm(e,t){Wv.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Mm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xm.prototype.cancel=function(){if(this.i=Cm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Ct(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Nm.prototype.stringify=function(e){return Lp.JSON.stringify(e,void 0)},Nm.prototype.parse=function(e){return Lp.JSON.parse(e,void 0)},Hp(Pm,Ay),Pm.prototype.g=function(){return new Lm(this.l,this.j)},Pm.prototype.i=function(e){return function(){return e}}({}),Hp(Lm,Wv);var Mm=0;function Fm(e){e.j.read().then(e.Sa.bind(e)).catch(e.ga.bind(e))}function Um(e){e.readyState=4,e.l=null,e.j=null,e.A=null,jm(e)}function jm(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Dp=Lm.prototype).open=function(e,t){if(this.readyState!=Mm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,jm(this)},Dp.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Lp).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ga.bind(this))},Dp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Um(this)),this.readyState=Mm},Dp.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jm(this)),this.g&&(this.readyState=3,jm(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if("undefined"!==typeof Lp.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fm(this)}else e.text().then(this.Ua.bind(this),this.ga.bind(this))},Dp.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Um(this):jm(this),3==this.readyState&&Fm(this)}},Dp.Ua=function(e){this.g&&(this.response=this.responseText=e,Um(this))},Dp.Ta=function(e){this.g&&(this.response=e,Um(this))},Dp.ga=function(){this.g&&Um(this)},Dp.setRequestHeader=function(e,t){this.v.append(e,t)},Dp.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Dp.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Vm=Lp.JSON.parse;function Bm(e){Wv.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zm,this.K=this.L=!1}Hp(Bm,Wv);var zm="",qm=/^https?$/i,Km=["POST","PUT"];function Hm(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Wm(e),Qm(e)}function Wm(e){e.D||(e.D=!0,Gv(e,"complete"),Gv(e,"error"))}function Gm(e){if(e.h&&"undefined"!=typeof Pp&&(!e.C[1]||4!=Xm(e)||2!=e.aa()))if(e.v&&4==Xm(e))sy(e.Ha,0,e);else if(Gv(e,"readystatechange"),4==Xm(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Zy)[1]||null;if(!a&&Lp.self&&Lp.self.location){var o=Lp.self.location.protocol;a=o.substr(0,o.length-1)}i=!qm.test(a?a.toLowerCase():"")}t=i}if(t)Gv(e,"complete"),Gv(e,"success");else{e.m=6;try{var u=2<Xm(e)?e.g.statusText:""}catch(D){u=""}e.j=u+" ["+e.aa()+"]",Wm(e)}}finally{Qm(e)}}}function Qm(e,t){if(e.g){Ym(e);var n=e.g,r=e.C[0]?Mp:null;e.g=null,e.C=null,t||Gv(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ym(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Lp.clearTimeout(e.A),e.A=null)}function Xm(e){return e.g?e.g.readyState:0}function $m(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case zm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(z){return null}}function Jm(e){var t="";return Tv(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Zm(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jm(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):am(e,t,n))}function eg(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function tg(e){this.Ca=0,this.i=[],this.j=new vy,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=eg("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=eg("baseRetryDelayMs",5e3,e),this.ab=eg("retryDelaySeedMs",1e4,e),this.Za=eg("forwardChannelMaxRetries",2,e),this.ta=eg("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Yb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new xm(e&&e.concurrentRequestLimit),this.Fa=new Dm,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=e&&e.Wb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ng(e){if(ig(e),3==e.G){var t=e.U++,n=tm(e.F);am(n,"SID",e.I),am(n,"RID",t),am(n,"TYPE","terminate"),ug(e,n),(t=new My(e,e.j,t,void 0)).K=2,t.v=om(tm(n)),n=!1,Lp.navigator&&Lp.navigator.sendBeacon&&(n=Lp.navigator.sendBeacon(t.v.toString(),"")),!n&&Lp.Image&&((new Image).src=t.v,n=!0),n||(t.g=kg(t.l,null),t.g.da(t.v)),t.F=Date.now(),Wy(t)}mg(e)}function rg(e){e.g&&(fg(e),e.g.cancel(),e.g=null)}function ig(e){rg(e),e.u&&(Lp.clearTimeout(e.u),e.u=null),dg(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Lp.clearTimeout(e.m),e.m=null)}function ag(e){Em(e.h)||e.m||(e.m=!0,ny(e.Ja,e),e.C=0)}function og(e,t){var n;n=t?t.m:e.U++;var r=tm(e.F);am(r,"SID",e.I),am(r,"RID",n),am(r,"AID",e.T),ug(e,r),e.o&&e.s&&Zm(r,e.o,e.s),n=new My(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=sg(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Tm(e.h,n),By(n,r,t)}function ug(e,t){e.ia&&Tv(e.ia,(function(e,n){am(t,n,e)})),e.l&&Jy({},(function(e,n){am(t,n,e)}))}function sg(e,t,n){n=Math.min(e.i.length,n);var r=e.l?qp(e.l.Qa,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Om(l,o,"req"+c+"_")}catch(oe){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function cg(e){e.g||e.u||(e.Z=1,ny(e.Ia,e),e.A=0)}function lg(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Iy(qp(e.Ia,e),vg(e,e.A)),e.A++,!0)}function fg(e){null!=e.B&&(Lp.clearTimeout(e.B),e.B=null)}function hg(e){e.g=new My(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=tm(e.sa);am(t,"RID","rpc"),am(t,"SID",e.I),am(t,"CI",e.L?"0":"1"),am(t,"AID",e.T),am(t,"TYPE","xmlhttp"),ug(e,t),e.o&&e.s&&Zm(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=om(tm(t)),n.s=null,n.P=!0,zy(n,e)}function dg(e){null!=e.v&&(Lp.clearTimeout(e.v),e.v=null)}function pg(e,t){var n=null;if(e.g==t){dg(e),fg(e),e.g=null;var r=2}else{if(!Sm(e.h,t))return;n=t.D,Am(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Gv(r=ky(),new Ey(r,n,t,i)),ag(e)}else cg(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Im(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Ya?0:e.Za))&&(e.m=Iy(qp(e.Ja,e,t),vg(e,e.C)),e.C++,!0))}(e,t)||2==r&&lg(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:yg(e,5);break;case 4:yg(e,10);break;case 3:yg(e,6);break;default:yg(e,2)}}function vg(e,t){var n=e.Wa+Math.floor(Math.random()*e.ab);return e.l||(n*=2),n*t}function yg(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=qp(e.jb,e);n||(n=new em("//www.google.com/images/cleardot.gif"),Lp.location&&"http"==Lp.location.protocol||nm(n,"https"),om(n)),function(e,t){var n=new vy;if(Lp.Image){var r=new Image;r.onload=Kp(Rm,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Kp(Rm,n,r,"TestLoadImage: error",!1,t),r.onabort=Kp(Rm,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Kp(Rm,n,r,"TestLoadImage: timeout",!1,t),Lp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else _y(2);e.G=0,e.l&&e.l.va(t),mg(e),ig(e)}function mg(e){if(e.G=0,e.la=[],e.l){var t=Cm(e.h);0==t.length&&0==e.i.length||(Xp(e.la,t),Xp(e.la,e.i),e.h.i.length=0,Yp(e.i),e.i.length=0),e.l.ua()}}function gg(e,t,n){var r=n instanceof em?tm(n):new em(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),rm(r,r.m);else{var i=Lp.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new em(null,void 0);r&&nm(a,r),t&&(a.g=t),i&&rm(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&am(r,n,t),am(r,"VER",e.ma),ug(e,r),r}function kg(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Bm(new Pm({ib:!0})):new Bm(e.ra)).L=e.H,t}function bg(){}function wg(){if(uv&&!(10<=Number(bv)))throw Error("Environmental error: no available transport.")}function xg(e,t){Wv.call(this),this.g=new tg(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Xb)&&!Zp(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Zp(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ig(this)}function _g(e){Ry.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Eg(){Py.call(this),this.status=1}function Ig(e){this.g=e}(Dp=Bm.prototype).da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dy.g(),this.C=this.u?Cy(this.u):Cy(Dy),this.g.onreadystatechange=qp(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Hm(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Ct(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Lp.FormData&&e instanceof Lp.FormData,!(0<=Qp(Km,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=Ct(n);try{for(c.s();!(s=c.n()).done;){var l=vt(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ym(this),0<this.B&&((this.K=function(e){return uv&&gv()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qp(this.qa,this)):this.A=sy(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Hm(this,u)}},Dp.qa=function(){"undefined"!=typeof Pp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gv(this,"timeout"),this.abort(8))},Dp.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Gv(this,"complete"),Gv(this,"abort"),Qm(this))},Dp.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qm(this,!0)),Bm.X.M.call(this)},Dp.Ha=function(){this.s||(this.F||this.v||this.l?Gm(this):this.eb())},Dp.eb=function(){Gm(this)},Dp.aa=function(){try{return 2<Xm(this)?this.g.status:-1}catch(O){return-1}},Dp.fa=function(){try{return this.g?this.g.responseText:""}catch(O){return""}},Dp.Ra=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Vm(t)}},Dp.Ea=function(){return this.m},Dp.Na=function(){return"string"===typeof this.j?this.j:String(this.j)},(Dp=tg.prototype).ma=8,Dp.G=1,Dp.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new My(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Nv(n=Av(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=sg(this,t,r),am(i=tm(this.F),"RID",e),am(i,"CVER",22),this.D&&am(i,"X-HTTP-Session-Id",this.D),ug(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Jm(n)))+"&"+r:this.o&&Zm(i,this.o,n)),Tm(this.h,t),this.Xa&&am(i,"TYPE","init"),this.O?(am(i,"$req",r),am(i,"SID","null"),t.Z=!0,By(t,i,null)):By(t,i,r),this.G=2}}else 3==this.G&&(e?og(this,e):0==this.i.length||Em(this.h)||og(this))},Dp.Ia=function(){if(this.u=null,hg(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Iy(qp(this.cb,this),e)}},Dp.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,_y(10),rg(this),hg(this))},Dp.bb=function(){null!=this.v&&(this.v=null,rg(this),lg(this),_y(19))},Dp.jb=function(e){e?(this.j.info("Successfully pinged google.com"),_y(2)):(this.j.info("Failed to ping google.com"),_y(1))},(Dp=bg.prototype).xa=function(){},Dp.wa=function(){},Dp.va=function(){},Dp.ua=function(){},Dp.Qa=function(){},wg.prototype.g=function(e,t){return new xg(e,t)},Hp(xg,Wv),xg.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;_y(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=gg(e,null,e.V),ag(e)},xg.prototype.close=function(){ng(this.g)},xg.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Yv(e),e=n);t.i.push(new wm(t.$a++,e)),3==t.G&&ag(t)},xg.prototype.M=function(){this.g.l=null,delete this.j,ng(this.g),delete this.g,xg.X.M.call(this)},Hp(_g,Ry),Hp(Eg,Py),Hp(Ig,bg),Ig.prototype.xa=function(){Gv(this.g,"a")},Ig.prototype.wa=function(e){Gv(this.g,new _g(e))},Ig.prototype.va=function(e){Gv(this.g,new Eg(e))},Ig.prototype.ua=function(){Gv(this.g,"b")},wg.prototype.createWebChannel=wg.prototype.g,xg.prototype.send=xg.prototype.u,xg.prototype.open=xg.prototype.m,xg.prototype.close=xg.prototype.close,Sy.NO_ERROR=0,Sy.TIMEOUT=8,Sy.HTTP_ERROR=6,Ty.COMPLETE="complete",Ny.EventType=Oy,Oy.OPEN="a",Oy.CLOSE="b",Oy.ERROR="c",Oy.MESSAGE="d",Wv.prototype.listen=Wv.prototype.N,Bm.prototype.listenOnce=Bm.prototype.O,Bm.prototype.getLastError=Bm.prototype.Na,Bm.prototype.getLastErrorCode=Bm.prototype.Ea,Bm.prototype.getStatus=Bm.prototype.aa,Bm.prototype.getResponseJson=Bm.prototype.Ra,Bm.prototype.getResponseText=Bm.prototype.fa,Bm.prototype.send=Bm.prototype.da;var Sg=Rp.createWebChannelTransport=function(){return new wg},Tg=Rp.getStatEventTarget=function(){return ky()},Ag=Rp.ErrorCode=Sy,Cg=Rp.EventType=Ty,Ng=Rp.Event=my,Dg=Rp.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Og=Rp.FetchXmlHttpFactory=Pm,Rg=Rp.WebChannel=Ny,Pg=Rp.XhrIo=Bm,Lg="@firebase/firestore",Mg=function(){function e(t){gt(this,e),this.uid=t}return bt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Mg.UNAUTHENTICATED=new Mg(null),Mg.GOOGLE_CREDENTIALS=new Mg("google-credentials-uid"),Mg.FIRST_PARTY=new Mg("first-party-uid"),Mg.MOCK_USER=new Mg("mock-user");var Fg="9.11.0",Ug=new to("@firebase/firestore");function jg(){return Ug.logLevel}function Vg(e){if(Ug.logLevel<=Qa.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(qg);Ug.debug.apply(Ug,["Firestore (".concat(Fg,"): ").concat(e)].concat(mt(i)))}}function Bg(e){if(Ug.logLevel<=Qa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(qg);Ug.error.apply(Ug,["Firestore (".concat(Fg,"): ").concat(e)].concat(mt(i)))}}function zg(e){if(Ug.logLevel<=Qa.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(qg);Ug.warn.apply(Ug,["Firestore (".concat(Fg,"): ").concat(e)].concat(mt(i)))}}function qg(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Kg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Fg,") INTERNAL ASSERTION FAILED: ")+e;throw Bg(t),new Error(t)}function Hg(e,t){e||Kg()}function Wg(e,t){return e}var Gg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Qg=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return bt(n)}(Na),Yg=bt((function e(){var t=this;gt(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Xg=bt((function e(t,n){gt(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),$g=function(){function e(){gt(this,e)}return bt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Mg.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Jg=function(){function e(t){gt(this,e),this.token=t,this.changeListener=null}return bt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Zg=function(){function e(t){gt(this,e),this.t=t,this.currentUser=Mg.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return bt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Yg;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Yg,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Vg("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Vg("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Yg)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Vg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Hg("string"==typeof n.accessToken),new Xg(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Hg(null===e||"string"==typeof e),new Mg(e)}}]),e}(),ek=function(){function e(t,n,r,i){gt(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Mg.FIRST_PARTY,this.p=new Map}return bt(e,[{key:"I",value:function(){return this.g?this.g():(Hg(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),tk=function(){function e(t,n,r,i){gt(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return bt(e,[{key:"getToken",value:function(){return Promise.resolve(new ek(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Mg.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),nk=bt((function e(t){gt(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),rk=function(){function e(t){gt(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return bt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Vg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Vg("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Vg("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Vg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Hg("string"==typeof t.token),e.A=t.token,new nk(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ik(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ak=function(){function e(){gt(this,e)}return bt(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ik(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function ok(e,t){return e<t?-1:e>t?1:0}function uk(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function sk(e){return e+"\0"}var ck=function(){function e(t,n){if(gt(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Qg(Gg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qg(Gg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Qg(Gg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qg(Gg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return bt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ok(this.nanoseconds,e.nanoseconds):ok(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),lk=function(){function e(t){gt(this,e),this.timestamp=t}return bt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ck(0,0))}},{key:"max",value:function(){return new e(new ck(253402300799,999999999))}}]),e}(),fk=function(){function e(t,n,r){gt(this,e),void 0===n?n=0:n>t.length&&Kg(),void 0===r?r=t.length-n:r>t.length-n&&Kg(),this.segments=t,this.offset=n,this.len=r}return bt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),hk=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,mt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(fk),dk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pk=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return dk.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Qg(Gg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Qg(Gg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Qg(Gg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(fk),vk=function(){function e(t){gt(this,e),this.path=t}return bt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===hk.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(hk.fromString(t))}},{key:"fromName",value:function(t){return new e(hk.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(hk.emptyPath())}},{key:"comparator",value:function(e,t){return hk.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new hk(t.slice()))}}]),e}(),yk=bt((function e(t,n,r,i){gt(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function mk(e){return e.fields.find((function(e){return 2===e.kind}))}function gk(e){return e.fields.filter((function(e){return 2!==e.kind}))}yk.UNKNOWN_ID=-1;var kk=bt((function e(t,n){gt(this,e),this.fieldPath=t,this.kind=n}));var bk=function(){function e(t,n){gt(this,e),this.sequenceNumber=t,this.offset=n}return bt(e,null,[{key:"empty",value:function(){return new e(0,_k.min())}}]),e}();function wk(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=lk.fromTimestamp(1e9===r?new ck(n+1,0):new ck(n,r));return new _k(i,vk.empty(),t)}function xk(e){return new _k(e.readTime,e.key,-1)}var _k=function(){function e(t,n,r){gt(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return bt(e,null,[{key:"min",value:function(){return new e(lk.min(),vk.empty(),-1)}},{key:"max",value:function(){return new e(lk.max(),vk.empty(),-1)}}]),e}();function Ek(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=vk.comparator(e.documentKey,t.documentKey))?n:ok(e.largestBatchId,t.largestBatchId)}var Ik="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sk=function(){function e(){gt(this,e),this.onCommittedListeners=[]}return bt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Tk(e){return Ak.apply(this,arguments)}function Ak(){return Ak=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Gg.FAILED_PRECONDITION&&t.message===Ik){e.next=2;break}throw t;case 2:Vg("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Ak.apply(this,arguments)}var Ck=function(){function e(t){var n=this;gt(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return bt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Kg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Ct(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Nk=function(){function e(t,n){var r=this;gt(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Yg,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new Rk(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Uk(e.target.error);r.P.reject(new Rk(t,n))}}return bt(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Vg("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Lk(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Rk(n,t)}}}]),e}(),Dk=function(){function e(t,n,r){gt(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(ka())&&Bg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return bt(e,[{key:"F",value:function(){var e=Ot(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Vg("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Rk(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Qg(Gg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Qg(Gg.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Rk(t,n))},i.onupgradeneeded=function(e){Vg("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Vg("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ot(Nt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Nt().mark((function e(){var n,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=Nk.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Ck.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Vg("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Vg("SimpleDb","Removing database:",e),Mk(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Ea())return!1;if(e.N())return!0;var t=ka(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ok=function(){function e(t){gt(this,e),this.U=t,this.q=!1,this.K=null}return bt(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return Mk(this.U.delete())}}]),e}(),Rk=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,Gg.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return bt(n)}(Qg);function Pk(e){return"IndexedDbTransactionError"===e.name}var Lk=function(){function e(t){gt(this,e),this.store=t}return bt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Vg("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Vg("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Mk(n)}},{key:"add",value:function(e){return Vg("SimpleDb","ADD",this.store.name,e,e),Mk(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Mk(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Vg("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Vg("SimpleDb","DELETE",this.store.name,e),Mk(this.store.delete(e))}},{key:"count",value:function(){return Vg("SimpleDb","COUNT",this.store.name),Mk(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ck((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ck((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Vg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Ck((function(n,r){t.onerror=function(e){var t=Uk(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Ck((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ok(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ck){var u=o.catch((function(e){return a.done(),Ck.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Ck.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Mk(e){return new Ck((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Uk(e.target.error);n(t)}}))}var Fk=!1;function Uk(e){var t=Dk.D(ka());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Qg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Fk||(Fk=!0,setTimeout((function(){throw r}),0)),r}}return e}var jk=function(){function e(t,n){gt(this,e),this.asyncQueue=t,this.et=n,this.task=null}return bt(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Vg("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Vg,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Pk(e.t4)){e.next=17;break}Vg("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Tk(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Vk=function(){function e(t,n){gt(this,e),this.localStore=t,this.persistence=n}return bt(e,[{key:"st",value:function(){var e=Ot(Nt().mark((function e(){var t,n=this,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ck.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Vg("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Vg("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=xk(t);Ek(r,n)>0&&(n=r)})),new _k(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Bk=function(){function e(t,n){var r=this;gt(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return bt(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function zk(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qk(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Kk(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Bk.at=-1;var Hk=function(){function e(t,n){gt(this,e),this.comparator=t,this.root=n||Gk.EMPTY}return bt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gk.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gk.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Wk(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Wk(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Wk(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Wk(this.root,e,this.comparator,!0)}}]),e}(),Wk=function(){function e(t,n,r,i){gt(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return bt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Gk=function(){function e(t,n,r,i,a){gt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return bt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Kg();if(this.right.isRed())throw Kg();var e=this.left.check();if(e!==this.right.check())throw Kg();return e+(this.isRed()?0:1)}}]),e}();Gk.EMPTY=null,Gk.RED=!0,Gk.BLACK=!1,Gk.EMPTY=new(function(){function e(){gt(this,e),this.size=0}return bt(e,[{key:"key",get:function(){throw Kg()}},{key:"value",get:function(){throw Kg()}},{key:"color",get:function(){throw Kg()}},{key:"left",get:function(){throw Kg()}},{key:"right",get:function(){throw Kg()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gk(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Qk=function(){function e(t){gt(this,e),this.comparator=t,this.data=new Hk(this.comparator)}return bt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Yk(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Yk(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Yk=function(){function e(t){gt(this,e),this.iter=t}return bt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Xk(e){return e.hasNext()?e.getNext():void 0}var $k=function(){function e(t){gt(this,e),this.fields=t,t.sort(pk.comparator)}return bt(e,[{key:"unionWith",value:function(t){var n,r=new Qk(pk.comparator),i=Ct(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Ct(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Ct(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return uk(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Jk=function(e){function t(e){gt(this,t),this.binaryString=e}return bt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ok(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Jk.EMPTY_BYTE_STRING=new Jk("");var Zk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eb(e){if(Hg(!!e),"string"==typeof e){var t=0,n=Zk.exec(e);if(Hg(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:tb(e.seconds),nanos:tb(e.nanos)}}function tb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nb(e){return"string"==typeof e?Jk.fromBase64String(e):Jk.fromUint8Array(e)}function rb(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ib(e){var t=e.mapValue.fields.__previous_value__;return rb(t)?ib(t):t}function ab(e){var t=eb(e.mapValue.fields.__local_write_time__.timestampValue);return new ck(t.seconds,t.nanos)}var ob=bt((function e(t,n,r,i,a,o,u,s){gt(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ub=function(){function e(t,n){gt(this,e),this.projectId=t,this.database=n||"(default)"}return bt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function sb(e){return null==e}function cb(e){return 0===e&&1/e==-1/0}function lb(e){return"number"==typeof e&&Number.isInteger(e)&&!cb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var fb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hb={nullValue:"NULL_VALUE"};function db(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rb(e)?4:Tb(e)?9007199254740991:10:Kg()}function pb(e,t){if(e===t)return!0;var n=db(e);if(n!==db(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ab(e).isEqual(ab(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=eb(e.timestampValue),r=eb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return nb(e.bytesValue).isEqual(nb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return tb(e.geoPointValue.latitude)===tb(t.geoPointValue.latitude)&&tb(e.geoPointValue.longitude)===tb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return tb(e.integerValue)===tb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=tb(e.doubleValue),r=tb(t.doubleValue);return n===r?cb(n)===cb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return uk(e.arrayValue.values||[],t.arrayValue.values||[],pb);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zk(n)!==zk(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!pb(n[i],r[i])))return!1;return!0}(e,t);default:return Kg()}}function vb(e,t){return void 0!==(e.values||[]).find((function(e){return pb(e,t)}))}function yb(e,t){if(e===t)return 0;var n=db(e),r=db(t);if(n!==r)return ok(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ok(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=tb(e.integerValue||e.doubleValue),r=tb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return mb(e.timestampValue,t.timestampValue);case 4:return mb(ab(e),ab(t));case 5:return ok(e.stringValue,t.stringValue);case 6:return function(e,t){var n=nb(e),r=nb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ok(n[i],r[i]);if(0!==a)return a}return ok(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ok(tb(e.latitude),tb(t.latitude));return 0!==n?n:ok(tb(e.longitude),tb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=yb(n[i],r[i]);if(a)return a}return ok(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===fb.mapValue&&t===fb.mapValue)return 0;if(e===fb.mapValue)return 1;if(t===fb.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ok(r[o],a[o]);if(0!==u)return u;var s=yb(n[r[o]],i[a[o]]);if(0!==s)return s}return ok(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Kg()}}function mb(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ok(e,t);var n=eb(e),r=eb(t),i=ok(n.seconds,r.seconds);return 0!==i?i:ok(n.nanos,r.nanos)}function gb(e){return kb(e)}function kb(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=eb(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,vk.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Ct(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=kb(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Ct(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(kb(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Kg();var t,n}function bb(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function wb(e){return!!e&&"integerValue"in e}function xb(e){return!!e&&"arrayValue"in e}function _b(e){return!!e&&"nullValue"in e}function Eb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ib(e){return!!e&&"mapValue"in e}function Sb(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return qk(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Sb(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Sb(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Tb(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ab(e){return"nullValue"in e?hb:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?bb(ub.empty(),vk.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Kg()}function Cb(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?bb(ub.empty(),vk.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?fb:Kg()}function Nb(e,t){var n=yb(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Db(e,t){var n=yb(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ob=function(){function e(t){gt(this,e),this.value=t}return bt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ib(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sb(t)}},{key:"setAll",value:function(e){var t=this,n=pk.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Sb(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ib(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return pb(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ib(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){qk(t,(function(t,n){return e[t]=n}));var r,i=Ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Sb(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Rb(e){var t=[];return qk(e.fields,(function(e,n){var r=new pk([e]);if(Ib(n)){var i=Rb(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Ct(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new $k(t)}var Pb=function(){function e(t,n,r,i,a,o){gt(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return bt(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ob.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ob.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=lk.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,lk.min(),lk.min(),Ob.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,lk.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,lk.min(),Ob.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,lk.min(),Ob.empty(),2)}}]),e}(),Lb=bt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;gt(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function Mb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Lb(e,t,n,r,i,a,o)}function Fb(e){var t=Wg(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+gb(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),sb(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return gb(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return gb(e)})).join(",")),t.ht=n}return t.ht}function Ub(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ew(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!pb(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!nw(e.startAt,t.startAt)&&nw(e.endAt,t.endAt)}function jb(e){return vk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Vb(e,t){return e.filters.filter((function(e){return e instanceof qb&&e.field.isEqual(t)}))}function Bb(e,t,n){var r,i=hb,a=!0,o=Ct(Vb(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=hb,c=!0;switch(u.op){case"<":case"<=":s=Ab(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=hb}Nb({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Nb({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function zb(e,t,n){var r,i=fb,a=!0,o=Ct(Vb(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=fb,c=!0;switch(u.op){case">=":case">":s=Cb(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=fb}Db({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Db({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var qb=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return bt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(yb(t,this.value)):null!==t&&db(this.value)===db(t)&&this.ft(yb(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Kg()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Kb(e,t,r):"array-contains"===t?new Qb(e,r):"in"===t?new Yb(e,r):"not-in"===t?new Xb(e,r):"array-contains-any"===t?new $b(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new Hb(e,n):new Wb(e,n)}}]),n}(function(){return bt((function e(){gt(this,e)}))}()),Kb=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this,e,r,i)).key=vk.fromName(i.referenceValue),a}return bt(n,[{key:"matches",value:function(e){var t=vk.comparator(e.key,this.key);return this.ft(t)}}]),n}(qb),Hb=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e,"in",r)).keys=Gb("in",r),i}return bt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(qb),Wb=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e,"not-in",r)).keys=Gb("not-in",r),i}return bt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(qb);function Gb(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return vk.fromName(e.referenceValue)}))}var Qb=function(e){xt(n,e);var t=At(n);function n(e,r){return gt(this,n),t.call(this,e,"array-contains",r)}return bt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return xb(t)&&vb(t.arrayValue,this.value)}}]),n}(qb),Yb=function(e){xt(n,e);var t=At(n);function n(e,r){return gt(this,n),t.call(this,e,"in",r)}return bt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&vb(this.value.arrayValue,t)}}]),n}(qb),Xb=function(e){xt(n,e);var t=At(n);function n(e,r){return gt(this,n),t.call(this,e,"not-in",r)}return bt(n,[{key:"matches",value:function(e){if(vb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!vb(this.value.arrayValue,t)}}]),n}(qb),$b=function(e){xt(n,e);var t=At(n);function n(e,r){return gt(this,n),t.call(this,e,"array-contains-any",r)}return bt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!xb(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return vb(t.value.arrayValue,e)}))}}]),n}(qb),Jb=bt((function e(t,n){gt(this,e),this.position=t,this.inclusive=n})),Zb=bt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";gt(this,e),this.field=t,this.dir=n}));function ew(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function tw(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?vk.comparator(vk.fromName(o.referenceValue),n.key):yb(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function nw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!pb(e.position[n],t.position[n]))return!1;return!0}var rw=bt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;gt(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function iw(e,t,n,r,i,a,o,u){return new rw(e,t,n,r,i,a,o,u)}function aw(e){return new rw(e)}function ow(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function uw(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function sw(e){var t,n=Ct(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function cw(e){return null!==e.collectionGroup}function lw(e){var t=Wg(e);if(null===t._t){t._t=[];var n=sw(t),r=uw(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new Zb(n)),t._t.push(new Zb(pk.keyField(),"asc"));else{var i,a=!1,o=Ct(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Zb(pk.keyField(),s))}}}return t._t}function fw(e){var t=Wg(e);if(!t.wt)if("F"===t.limitType)t.wt=Mb(t.path,t.collectionGroup,lw(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Ct(lw(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Zb(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Jb(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Jb(t.startAt.position,t.startAt.inclusive):null;t.wt=Mb(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function hw(e,t,n){return new rw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dw(e,t){return Ub(fw(e),fw(t))&&e.limitType===t.limitType}function pw(e){return"".concat(Fb(fw(e)),"|lt:").concat(e.limitType)}function vw(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(gb(t.value));var t})).join(", "),"]")),sb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return gb(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return gb(e)})).join(",")),"Target(".concat(t,")")}(fw(e)),"; limitType=").concat(e.limitType,")")}function yw(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vk.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Ct(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Ct(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=tw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,lw(e),t))&&!(e.endAt&&!function(e,t,n){var r=tw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,lw(e),t))}(e,t)}function mw(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gw(e){return function(t,n){var r,i=!1,a=Ct(lw(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=kw(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function kw(e,t,n){var r=e.field.isKeyField()?vk.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?yb(r,i):Kg()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Kg()}}function bw(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cb(t)?"-0":t}}function ww(e){return{integerValue:""+e}}function xw(e,t){return lb(t)?ww(t):bw(e,t)}var _w=bt((function e(){gt(this,e),this._=void 0}));function Ew(e,t,n){return e instanceof Tw?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Aw?Cw(e,t):e instanceof Nw?Dw(e,t):function(e,t){var n=Sw(e,t),r=Rw(n)+Rw(e.yt);return wb(n)&&wb(e.yt)?ww(r):bw(e.It,r)}(e,t)}function Iw(e,t,n){return e instanceof Aw?Cw(e,t):e instanceof Nw?Dw(e,t):n}function Sw(e,t){return e instanceof Ow?wb(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Tw=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n)}(_w),Aw=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this)).elements=e,r}return bt(n)}(_w);function Cw(e,t){var n,r=Pw(t),i=Ct(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return pb(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Nw=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this)).elements=e,r}return bt(n)}(_w);function Dw(e,t){var n,r=Pw(t),i=Ct(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!pb(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ow=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this)).It=e,i.yt=r,i}return bt(n)}(_w);function Rw(e){return tb(e.integerValue||e.doubleValue)}function Pw(e){return xb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Lw=bt((function e(t,n){gt(this,e),this.field=t,this.transform=n}));var Mw=bt((function e(t,n){gt(this,e),this.version=t,this.transformResults=n})),Fw=function(){function e(t,n){gt(this,e),this.updateTime=t,this.exists=n}return bt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Uw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var jw=bt((function e(){gt(this,e)}));function Vw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Jw(e.key,Fw.none()):new Hw(e.key,e.data,Fw.none());var n,r=e.data,i=Ob.empty(),a=new Qk(pk.comparator),o=Ct(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Ww(e.key,i,new $k(a.toArray()),Fw.none())}function Bw(e,t,n){e instanceof Hw?function(e,t,n){var r=e.value.clone(),i=Qw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ww?function(e,t,n){if(Uw(e.precondition,t)){var r=Qw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gw(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zw(e,t,n,r){return e instanceof Hw?function(e,t,n,r){if(!Uw(e.precondition,t))return n;var i=e.value.clone(),a=Yw(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ww?function(e,t,n,r){if(!Uw(e.precondition,t))return n;var i=Yw(e.fieldTransforms,r,t),a=t.data;return a.setAll(Gw(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Uw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qw(e,t){var n,r=null,i=Ct(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Sw(a.transform,o||null);null!=u&&(null===r&&(r=Ob.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Kw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&uk(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Aw&&t instanceof Aw||e instanceof Nw&&t instanceof Nw?uk(e.elements,t.elements,pb):e instanceof Ow&&t instanceof Ow?pb(e.yt,t.yt):e instanceof Tw&&t instanceof Tw}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Hw=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return gt(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return bt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jw),Ww=function(e){xt(n,e);var t=At(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return gt(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return bt(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(jw);function Gw(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Qw(e,t,n){var r=new Map;Hg(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Iw(o,u,n[i]))}return r}function Yw(e,t,n){var r,i=new Map,a=Ct(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ew(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Xw,$w,Jw=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return bt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jw),Zw=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return bt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jw),ex=bt((function e(t){gt(this,e),this.count=t}));function tx(e){switch(e){default:return Kg();case Gg.CANCELLED:case Gg.UNKNOWN:case Gg.DEADLINE_EXCEEDED:case Gg.RESOURCE_EXHAUSTED:case Gg.INTERNAL:case Gg.UNAVAILABLE:case Gg.UNAUTHENTICATED:return!1;case Gg.INVALID_ARGUMENT:case Gg.NOT_FOUND:case Gg.ALREADY_EXISTS:case Gg.PERMISSION_DENIED:case Gg.FAILED_PRECONDITION:case Gg.ABORTED:case Gg.OUT_OF_RANGE:case Gg.UNIMPLEMENTED:case Gg.DATA_LOSS:return!0}}function nx(e){if(void 0===e)return Bg("GRPC error has no .code"),Gg.UNKNOWN;switch(e){case Xw.OK:return Gg.OK;case Xw.CANCELLED:return Gg.CANCELLED;case Xw.UNKNOWN:return Gg.UNKNOWN;case Xw.DEADLINE_EXCEEDED:return Gg.DEADLINE_EXCEEDED;case Xw.RESOURCE_EXHAUSTED:return Gg.RESOURCE_EXHAUSTED;case Xw.INTERNAL:return Gg.INTERNAL;case Xw.UNAVAILABLE:return Gg.UNAVAILABLE;case Xw.UNAUTHENTICATED:return Gg.UNAUTHENTICATED;case Xw.INVALID_ARGUMENT:return Gg.INVALID_ARGUMENT;case Xw.NOT_FOUND:return Gg.NOT_FOUND;case Xw.ALREADY_EXISTS:return Gg.ALREADY_EXISTS;case Xw.PERMISSION_DENIED:return Gg.PERMISSION_DENIED;case Xw.FAILED_PRECONDITION:return Gg.FAILED_PRECONDITION;case Xw.ABORTED:return Gg.ABORTED;case Xw.OUT_OF_RANGE:return Gg.OUT_OF_RANGE;case Xw.UNIMPLEMENTED:return Gg.UNIMPLEMENTED;case Xw.DATA_LOSS:return Gg.DATA_LOSS;default:return Kg()}}($w=Xw||(Xw={}))[$w.OK=0]="OK",$w[$w.CANCELLED=1]="CANCELLED",$w[$w.UNKNOWN=2]="UNKNOWN",$w[$w.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$w[$w.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$w[$w.NOT_FOUND=5]="NOT_FOUND",$w[$w.ALREADY_EXISTS=6]="ALREADY_EXISTS",$w[$w.PERMISSION_DENIED=7]="PERMISSION_DENIED",$w[$w.UNAUTHENTICATED=16]="UNAUTHENTICATED",$w[$w.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$w[$w.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$w[$w.ABORTED=10]="ABORTED",$w[$w.OUT_OF_RANGE=11]="OUT_OF_RANGE",$w[$w.UNIMPLEMENTED=12]="UNIMPLEMENTED",$w[$w.INTERNAL=13]="INTERNAL",$w[$w.UNAVAILABLE=14]="UNAVAILABLE",$w[$w.DATA_LOSS=15]="DATA_LOSS";var rx=function(){function e(t,n){gt(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return bt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Ct(n);try{for(i.s();!(r=i.n()).done;){var a=vt(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){qk(this.inner,(function(t,n){var r,i=Ct(n);try{for(i.s();!(r=i.n()).done;){var a=vt(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Kk(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ix=new Hk(vk.comparator);function ax(){return ix}var ox=new Hk(vk.comparator);function ux(){for(var e=ox,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function sx(e){var t=ox;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function cx(){return fx()}function lx(){return fx()}function fx(){return new rx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var hx=new Hk(vk.comparator),dx=new Qk(vk.comparator);function px(){for(var e=dx,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var vx=new Qk(ok);function yx(){return vx}var mx=function(){function e(t,n,r,i,a){gt(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return bt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,gx.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(lk.min(),r,yx(),ax(),px())}}]),e}(),gx=function(){function e(t,n,r,i,a){gt(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return bt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Jk.EMPTY_BYTE_STRING,n,px(),px(),px())}}]),e}(),kx=bt((function e(t,n,r,i){gt(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),bx=bt((function e(t,n){gt(this,e),this.targetId=t,this.At=n})),wx=bt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jk.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;gt(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),xx=function(){function e(){gt(this,e),this.Rt=0,this.bt=Ix(),this.Pt=Jk.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return bt(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=px(),t=px(),n=px();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Kg()}})),new gx(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=Ix()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),_x=function(){function e(t){gt(this,e),this.Bt=t,this.Lt=new Map,this.Ut=ax(),this.qt=Ex(),this.Kt=new Qk(ok)}return bt(e,[{key:"Gt",value:function(e){var t,n=Ct(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=Ct(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:Kg()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(jb(i))if(0===n){var a=new vk(i.path);this.jt(t,a,Pb.newNoDocument(a,lk.min()))}else Hg(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&jb(a.target)){var o=new vk(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,Pb.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=px();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new mx(e,n,this.Kt,this.Ut,r);return this.Ut=ax(),this.qt=Ex(),this.Kt=new Qk(ok),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new xx,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new Qk(ok),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||Vg("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new xx),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ex(){return new Hk(vk.comparator)}function Ix(){return new Hk(vk.comparator)}var Sx={asc:"ASCENDING",desc:"DESCENDING"},Tx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ax=bt((function e(t,n){gt(this,e),this.databaseId=t,this.gt=n}));function Cx(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Nx(e,t){return e.gt?t.toBase64():t.toUint8Array()}function Dx(e,t){return Cx(e,t.toTimestamp())}function Ox(e){return Hg(!!e),lk.fromTimestamp(function(e){var t=eb(e);return new ck(t.seconds,t.nanos)}(e))}function Rx(e,t){return function(e){return new hk(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Px(e){var t=hk.fromString(e);return Hg(r_(t)),t}function Lx(e,t){return Rx(e.databaseId,t.path)}function Mx(e,t){var n=Px(t);if(n.get(1)!==e.databaseId.projectId)throw new Qg(Gg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qg(Gg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vk(Vx(n))}function Fx(e,t){return Rx(e.databaseId,t)}function Ux(e){var t=Px(e);return 4===t.length?hk.emptyPath():Vx(t)}function jx(e){return new hk(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vx(e){return Hg(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Bx(e,t,n){return{name:Lx(e,t),fields:n.value.mapValue.fields}}function zx(e,t,n){var r=Mx(e,t.name),i=Ox(t.updateTime),a=new Ob({mapValue:{fields:t.fields}}),o=Pb.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function qx(e,t){return"found"in t?function(e,t){Hg(!!t.found),t.found.name,t.found.updateTime;var n=Mx(e,t.found.name),r=Ox(t.found.updateTime),i=new Ob({mapValue:{fields:t.found.fields}});return Pb.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Hg(!!t.missing),Hg(!!t.readTime);var n=Mx(e,t.missing),r=Ox(t.readTime);return Pb.newNoDocument(n,r)}(e,t):Kg()}function Kx(e,t){var n;if(t instanceof Hw)n={update:Bx(e,t.key,t.value)};else if(t instanceof Jw)n={delete:Lx(e,t.key)};else if(t instanceof Ww)n={update:Bx(e,t.key,t.data),updateMask:n_(t.fieldMask)};else{if(!(t instanceof Zw))return Kg();n={verify:Lx(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Tw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Aw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ow)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw Kg()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Dx(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Kg()}(e,t.precondition)),n}function Hx(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Fw.updateTime(Ox(e.updateTime)):void 0!==e.exists?Fw.exists(e.exists):Fw.none()}(t.currentDocument):Fw.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Hg("REQUEST_TIME"===t.setToServerValue),n=new Tw;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Aw(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Nw(i)}else"increment"in t?n=new Ow(e,t.increment):Kg();var a=pk.fromServerFormat(t.fieldPath);return new Lw(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Mx(e,t.update.name),a=new Ob({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new $k(t.map((function(e){return pk.fromServerFormat(e)})))}(t.updateMask);return new Ww(i,a,o,n,r)}return new Hw(i,a,n,r)}if(t.delete){var u=Mx(e,t.delete);return new Jw(u,n)}if(t.verify){var s=Mx(e,t.verify);return new Zw(s,n)}return Kg()}function Wx(e,t){return{documents:[Fx(e,t.path)]}}function Gx(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Fx(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Fx(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Eb(e.value))return{unaryFilter:{field:Jx(e.field),op:"IS_NAN"}};if(_b(e.value))return{unaryFilter:{field:Jx(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Eb(e.value))return{unaryFilter:{field:Jx(e.field),op:"IS_NOT_NAN"}};if(_b(e.value))return{unaryFilter:{field:Jx(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jx(e.field),op:$x(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Jx(e.field),direction:Xx(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||sb(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Qx(e){var t=Ux(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Hg(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Yx(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Zb(Zx(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return sb(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Jb(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Jb(n,t)}(n.endAt)),iw(t,i,u,o,s,"F",c,l)}function Yx(e){return e?void 0!==e.unaryFilter?[t_(e)]:void 0!==e.fieldFilter?[e_(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Yx(e)})).reduce((function(e,t){return e.concat(t)})):Kg():[]}function Xx(e){return Sx[e]}function $x(e){return Tx[e]}function Jx(e){return{fieldPath:e.canonicalString()}}function Zx(e){return pk.fromServerFormat(e.fieldPath)}function e_(e){return qb.create(Zx(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kg()}}(e.fieldFilter.op),e.fieldFilter.value)}function t_(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Zx(e.unaryFilter.field);return qb.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Zx(e.unaryFilter.field);return qb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Zx(e.unaryFilter.field);return qb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Zx(e.unaryFilter.field);return qb.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Kg()}}function n_(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function r_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function i_(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=o_(t)),t=a_(e.get(n),t);return o_(t)}function a_(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function o_(e){return e+"\x01\x01"}function u_(e){var t=e.length;if(Hg(t>=2),2===t)return Hg("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),hk.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Kg(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Kg()}a=o+2}return new hk(r)}var s_=["userId","batchId"];function c_(e,t){return[e,i_(t)]}function l_(e,t,n){return[e,i_(t),n]}var f_={},h_=["prefixPath","collectionGroup","readTime","documentId"],d_=["prefixPath","collectionGroup","documentId"],p_=["collectionGroup","readTime","prefixPath","documentId"],v_=["canonicalId","targetId"],y_=["targetId","path"],m_=["path","targetId"],g_=["collectionId","parent"],k_=["indexId","uid"],b_=["uid","sequenceNumber"],w_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x_=["indexId","uid","orderedDocumentKey"],__=["userId","collectionPath","documentId"],E_=["userId","collectionPath","largestBatchId"],I_=["userId","collectionGroup","largestBatchId"],S_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),T_=[].concat(mt(S_),["documentOverlays"]),A_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],C_=A_,N_=[].concat(C_,["indexConfiguration","indexState","indexEntries"]),D_=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return bt(n)}(Sk);function O_(e,t){var n=Wg(e);return Dk.M(n.ie,t)}var R_=function(){function e(t,n,r,i){gt(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return bt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Bw(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Ct(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=zw(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Ct(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=zw(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=lx();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Vw(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(lk.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),px())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&uk(this.mutations,e.mutations,(function(e,t){return Kw(e,t)}))&&uk(this.baseMutations,e.baseMutations,(function(e,t){return Kw(e,t)}))}}]),e}(),P_=function(){function e(t,n,r,i){gt(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return bt(e,null,[{key:"from",value:function(t,n,r){Hg(t.mutations.length===r.length);for(var i=hx,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),L_=function(){function e(t,n){gt(this,e),this.largestBatchId=t,this.mutation=n}return bt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),M_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:lk.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:lk.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Jk.EMPTY_BYTE_STRING;gt(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return bt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),F_=bt((function e(t){gt(this,e),this.re=t}));function U_(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:j_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Lx(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Cx(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:V_(t.version)};else{if(!t.isUnknownDocument())return Kg();r.unknownDocument={path:n.path.toArray(),version:V_(t.version)}}return r}function j_(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function V_(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function B_(e){var t=new ck(e.seconds,e.nanoseconds);return lk.fromTimestamp(t)}function z_(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Hx(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Hx(e.re,t)})),u=ck.fromMillis(t.localWriteTimeMs);return new R_(t.batchId,u,n,o)}function q_(e){var t,n,r=B_(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?B_(e.lastLimboFreeSnapshotVersion):lk.min();return void 0!==e.query.documents?(Hg(1===(n=e.query).documents.length),t=fw(aw(Ux(n.documents[0])))):t=function(e){return fw(Qx(e))}(e.query),new M_(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Jk.fromBase64String(e.resumeToken))}function K_(e,t){var n,r=V_(t.snapshotVersion),i=V_(t.lastLimboFreeSnapshotVersion);n=jb(t.target)?Wx(e.re,t.target):Gx(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Fb(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function H_(e){var t=Qx({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hw(t,t.limit,"L"):t}function W_(e,t){return new L_(t.largestBatchId,Hx(e.re,t.overlayMutation))}function G_(e,t){var n=t.path.lastSegment();return[e,i_(t.path.popLast()),n]}function Q_(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:V_(r.readTime),documentKey:i_(r.documentKey.path),largestBatchId:r.largestBatchId}}var Y_=function(){function e(){gt(this,e)}return bt(e,[{key:"getBundleMetadata",value:function(e,t){return X_(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:B_(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return X_(e).put({bundleId:(n=t).id,createTime:V_(Ox(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return $_(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:H_(t.bundledQuery),readTime:B_(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return $_(e).put(function(e){return{name:e.name,readTime:V_(Ox(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function X_(e){return O_(e,"bundles")}function $_(e){return O_(e,"namedQueries")}var J_=function(){function e(t,n){gt(this,e),this.It=t,this.userId=n}return bt(e,[{key:"getOverlay",value:function(e,t){var n=this;return Z_(e).get(G_(this.userId,t)).next((function(e){return e?W_(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=cx();return Ck.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new L_(t,a);i.push(r.ue(e,o))})),Ck.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(i_(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Z_(e).Y("collectionPathOverlayIndex",i))})),Ck.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=cx(),a=i_(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Z_(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Ct(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=W_(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=cx(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Z_(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=W_(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return Z_(e).put(function(e,t,n){var r=vt(G_(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Kx(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Z_(e){return O_(e,"documentOverlays")}var eE=function(){function e(){gt(this,e)}return bt(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(tb(e.integerValue));else if("doubleValue"in e){var n=tb(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),cb(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(nb(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Tb(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Kg()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=Ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),vk.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function tE(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function nE(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=tE(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}eE.Te=new eE;var rE=function(){function e(){gt(this,e),this.buffer=new Uint8Array(1024),this.position=0}return bt(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=Ct(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=Ct(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=nE(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=nE(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),iE=function(){function e(t){gt(this,e),this.Be=t}return bt(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),aE=function(){function e(t){gt(this,e),this.Be=t}return bt(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),oE=function(){function e(){gt(this,e),this.Be=new rE,this.Le=new iE(this.Be),this.Ue=new aE(this.Be)}return bt(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),uE=function(){function e(t,n,r,i){gt(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return bt(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function sE(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=cE(e.arrayValue,t.arrayValue))?n:0!==(n=cE(e.directionalValue,t.directionalValue))?n:vk.comparator(e.documentKey,t.documentKey)}function cE(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var lE=function(){function e(t){gt(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=Ct(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return bt(e,[{key:"We",value:function(e){var t=mk(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=gk(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=Ct(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),fE=function(){function e(){gt(this,e),this.Ye=new hE}return bt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),Ck.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ck.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ck.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ck.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ck.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ck.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ck.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ck.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ck.resolve(_k.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ck.resolve(_k.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ck.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ck.resolve()}}]),e}(),hE=function(){function e(){gt(this,e),this.index={}}return bt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qk(hk.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Qk(hk.comparator)).toArray()}}]),e}(),dE=new Uint8Array(0),pE=function(){function e(t,n){gt(this,e),this.user=t,this.databaseId=n,this.Xe=new hE,this.Ze=new rx((function(e){return Fb(e)}),(function(e,t){return Ub(e,t)})),this.uid=t.uid||""}return bt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:i_(i)};return vE(e).put(a)}return Ck.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[sk(t),""],!1,!0);return vE(e).W(r).next((function(e){var r,i=Ct(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(u_(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=mE(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=gE(e);return a.next((function(e){o.put(Q_(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=mE(e),r=gE(e),i=yE(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=yE(e),i=!0,a=new Map;return Ck.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=px(),o=[];return Ck.forEach(a,(function(i,a){var u;Vg("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Fb(t)));var s=function(e,t){var n=mk(t);if(void 0===n)return null;var r,i=Ct(Vb(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Ct(gk(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Ct(Vb(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Ct(gk(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Bb(e,o.fieldPath,e.startAt):zb(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Jb(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Ct(gk(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?zb(e,o.fieldPath,e.endAt):Bb(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Jb(r,i)}(a,i),h=n.nn(i,a,l),d=n.nn(i,a,f),p=n.sn(i,a,c),v=n.rn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Ck.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=vk.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ck.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.on(t[s/c]):dE,h=u.un(e,f,n[s%c],r),d=u.cn(e,f,i[s%c],a),p=o.map((function(t){return u.un(e,f,t,!0)}));l.push.apply(l,mt(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"un",value:function(e,t,n,r){var i=new uE(e,vk.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new uE(e,vk.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new lE(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Ct(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Ck.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Qk(pk.comparator),r=!1,i=Ct(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Ct(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new oE,i=Ct(gk(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);eE.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new oE;return eE.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new oE;return eE.Te.ce(bb(this.databaseId,t),n.qe(function(e){var t=gk(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new oE);var i,a=0,o=Ct(gk(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Ct(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.ln(t,s.fieldPath)&&xb(c))r=this.fn(r,s,c);else{var h=f.qe(s.kind);eE.Te.ce(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=mt(e),a=[],o=Ct(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Ct(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new oE;f.seed(l.$e()),eE.Te.ce(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof qb&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=mE(e),i=gE(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Ck.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new bk(t.sequenceNumber,new _k(B_(t.readTime),new vk(u_(t.documentKey)),t.largestBatchId)):bk.empty(),r=e.fields.map((function(e){var t=vt(e,2),n=t[0],r=t[1];return new kk(pk.fromServerFormat(n),r)}));return new yk(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ok(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=mE(e),a=gE(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ck.forEach(t,(function(t){return a.put(Q_(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ck.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ck.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ck.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?Ck.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return yE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return yE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=yE(e),i=new Qk(sE);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new uE(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new Qk(sE),r=this.an(t,e);if(null==r)return n;var i=mk(t);if(null!=i){var a=e.data.field(i.fieldPath);if(xb(a)){var o,u=Ct(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new uE(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new uE(t.indexId,e.key,dE,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;Vg("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Xk(a),s=Xk(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Xk(o)):l?(i(u),u=Xk(a)):(u=Xk(a),s=Xk(o))}}(r,i,sE,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),Ck.waitFor(o)}},{key:"_n",value:function(e){var t=1;return gE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return sE(e,t)})).filter((function(e,t,n){return!t||0!==sE(e,n[t-1])}));var r=[];r.push(e);var i,a=Ct(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=sE(o,e),s=sE(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,dE,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,dE,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(kE)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ck.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||Kg()}))})).next(kE)}}]),e}();function vE(e){return O_(e,"collectionParents")}function yE(e){return O_(e,"indexEntries")}function mE(e){return O_(e,"indexConfiguration")}function gE(e){return O_(e,"indexState")}function kE(e){Hg(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Ek(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _k(t.readTime,t.documentKey,n)}var bE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wE=function(){function e(t,n,r){gt(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return bt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function xE(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Hg(1===u)})));var c,l=[],f=Ct(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=l_(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Ck.waitFor(a).next((function(){return l}))}function _E(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Kg();t=e.noDocument}return JSON.stringify(t).length}wE.DEFAULT_COLLECTION_PERCENTILE=10,wE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wE.DEFAULT=new wE(41943040,wE.DEFAULT_COLLECTION_PERCENTILE,wE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wE.DISABLED=new wE(-1,0,0);var EE=function(){function e(t,n,r,i){gt(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return bt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return SE(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=TE(e),o=SE(e);return o.add({}).next((function(u){Hg("number"==typeof u);var s,c=new R_(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Kx(e.re,t)})),i=n.mutations.map((function(t){return Kx(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),f=[],h=new Qk((function(e,t){return ok(e.canonicalString(),t.canonicalString())})),d=Ct(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=l_(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,f_))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Ck.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return SE(e).get(t).next((function(e){return e?(Hg(e.userId===n.userId),z_(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Ck.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return SE(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Hg(t.batchId>=r),a=z_(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return SE(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return SE(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return z_(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=c_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return TE(e).Z({range:i},(function(r,i,o){var u=vt(r,3),s=u[0],c=u[1],l=u[2],f=u_(c);if(s===n.userId&&t.path.isEqual(f))return SE(e).get(l).next((function(e){if(!e)throw Kg();Hg(e.userId===n.userId),a.push(z_(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qk(ok),i=[];return t.forEach((function(t){var a=c_(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=TE(e).Z({range:o},(function(e,i,a){var o=vt(e,3),u=o[0],s=o[1],c=o[2],l=u_(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Ck.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=c_(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Qk(ok);return TE(e).Z({range:o},(function(e,t,a){var o=vt(e,3),s=o[0],c=o[1],l=o[2],f=u_(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(SE(e).get(t).next((function(e){if(null===e)throw Kg();Hg(e.userId===n.userId),r.push(z_(n.It,e))})))})),Ck.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return xE(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Ck.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ck.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return TE(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=u_(e[1]);i.push(a)}else r.done()})).next((function(){Hg(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return IE(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return AE(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return Hg(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function IE(e,t,n){var r=c_(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return TE(e).Z({range:a,X:!0},(function(e,n,r){var a=vt(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function SE(e){return O_(e,"mutations")}function TE(e){return O_(e,"documentMutations")}function AE(e){return O_(e,"mutationQueues")}var CE=function(){function e(t){gt(this,e),this.bn=t}return bt(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),NE=function(){function e(t,n){gt(this,e),this.referenceDelegate=t,this.It=n}return bt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new CE(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return lk.fromTimestamp(new ck(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return DE(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Hg(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return DE(e).Z((function(o,u){var s=q_(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ck.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return DE(e).Z((function(e,n){var r=q_(n);t(r)}))}},{key:"Vn",value:function(e){return OE(e).get("targetGlobalKey").next((function(e){return Hg(null!==e),e}))}},{key:"Sn",value:function(e,t){return OE(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return DE(e).put(K_(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Fb(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return DE(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=q_(n);Ub(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=RE(e);return t.forEach((function(t){var o=i_(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ck.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=RE(e);return Ck.forEach(t,(function(t){var a=i_(t.path);return Ck.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=RE(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=RE(e),i=px();return r.Z({range:n,X:!0},(function(e,t,n){var r=u_(e[1]),a=new vk(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=i_(t.path),r=IDBKeyRange.bound([n],[sk(n)],!1,!0),i=0;return RE(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=vt(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return DE(e).get(t).next((function(e){return e?q_(e):null}))}}]),e}();function DE(e){return O_(e,"targets")}function OE(e){return O_(e,"targetGlobal")}function RE(e){return O_(e,"targetDocuments")}function PE(e,t){var n=vt(e,2),r=n[0],i=n[1],a=vt(t,2),o=a[0],u=a[1],s=ok(r,o);return 0===s?ok(i,u):s}var LE=function(){function e(t){gt(this,e),this.xn=t,this.buffer=new Qk(PE),this.Nn=0}return bt(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();PE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),ME=function(){function e(t,n,r){gt(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return bt(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;Vg("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Pk(e.t0)){e.next=12;break}Vg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Tk(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),FE=function(){function e(t,n){gt(this,e),this.$n=t,this.params=n}return bt(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ck.resolve(Bk.at);var r=new LE(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Vg("LruGarbageCollector","Garbage collection skipped; disabled"),Ck.resolve(bE)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Vg("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),bE):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Vg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),jg()<=Qa.DEBUG&&Vg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ck.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),UE=function(){function e(t,n){gt(this,e),this.db=t,this.garbageCollector=function(e,t){return new FE(e,t)}(this,n)}return bt(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return jE(e,n)}},{key:"removeReference",value:function(e,t,n){return jE(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return jE(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return AE(e).tt((function(r){return IE(e,r,t).next((function(e){return e&&(n=!0),Ck.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,lk.min()),RE(e).delete([0,i_(o.path)])}))}));i.push(s)}})).next((function(){return Ck.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return jE(e,t)}},{key:"Kn",value:function(e,t){var n,r=RE(e),i=Bk.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=vt(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Bk.at&&t(new vk(u_(n)),i),i=s,n=u):i=Bk.at})).next((function(){i!==Bk.at&&t(new vk(u_(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function jE(e,t){return RE(e).put(function(e,t){return{targetId:0,path:i_(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var VE=function(){function e(){gt(this,e),this.changes=new rx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return bt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Pb.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ck.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),BE=function(){function e(t){gt(this,e),this.It=t}return bt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return HE(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return HE(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],j_(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Pb.newInvalidDocument(t);return HE(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(WE(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:Pb.newInvalidDocument(t)};return HE(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(WE(t))},(function(e,i){r={document:n.jn(t,i),size:_E(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ax();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=ax(),i=new Hk(vk.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,_E(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Ck.resolve();var r=new Qk(QE);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(WE(r.first()),WE(r.last())),a=r.getIterator(),o=a.getNext();return HE(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=vk.fromSegments([].concat(mt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&QE(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(WE(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),j_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return HE(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=ax(),i=Ct(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(vk.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ax(),o=GE(t,n),u=GE(t,_k.max());return HE(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(vk.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new qE(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return KE(e).get("remoteDocumentGlobalKey").next((function(e){return Hg(!!e),e}))}},{key:"Qn",value:function(e,t){return KE(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=zx(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=vk.fromSegments(t.noDocument.path),i=B_(t.noDocument.readTime);n=Pb.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Kg();var a=vk.fromSegments(t.unknownDocument.path),o=B_(t.unknownDocument.version);n=Pb.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new ck(e[0],e[1]);return lk.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(lk.min()))return n}return Pb.newInvalidDocument(e)}}]),e}();function zE(e){return new BE(e)}var qE=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new rx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return bt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Qk((function(e,t){return ok(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=U_(t.Yn.It,o);i=i.add(a.path.popLast());var c=_E(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=U_(t.Yn.It,o.convertToNoDocument(lk.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Ck.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(VE);function KE(e){return O_(e,"remoteDocumentGlobal")}function HE(e){return O_(e,"remoteDocumentsV14")}function WE(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function GE(e,t){var n=t.documentKey.path.toArray();return[e,j_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function QE(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ok(n[a],r[a]))return i;return(i=ok(n.length,r.length))||((i=ok(n[n.length-2],r[r.length-2]))||ok(n[n.length-1],r[r.length-1]))}var YE=bt((function e(t,n){gt(this,e),this.overlayedDocument=t,this.mutatedFields=n})),XE=function(){function e(t,n,r,i){gt(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return bt(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&zw(r.mutation,e,$k.empty(),ck.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,px()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:px(),i=cx();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ux();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=cx();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,px())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ax(),a=fx(),o=fx();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ww)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),zw(o.mutation,t,o.mutation.getFieldMask(),ck.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new YE(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=fx(),i=new Hk((function(e,t){return e-t})),a=px();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Ct(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||$k.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||px()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=lx();c.forEach((function(e){if(!a.has(e)){var n=Vw(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ck.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return vk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ck.resolve(cx()),u=-1,s=a;return o.next((function(t){return Ck.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ck.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,px())})).next((function(e){return{batchId:u,changes:sx(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new vk(t)).next((function(e){var t=ux();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ux();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ck.forEach(o,(function(o){var u=function(e,t){return new rw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Pb.newInvalidDocument(n)))}));var n=ux();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&zw(a.mutation,i,$k.empty(),ck.now()),yw(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Ck.resolve(Pb.newInvalidDocument(t))}}]),e}(),$E=function(){function e(t){gt(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return bt(e,[{key:"getBundleMetadata",value:function(e,t){return Ck.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Ox(n.createTime)}),Ck.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ck.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:H_(e.bundledQuery),readTime:Ox(e.readTime)}}(t)),Ck.resolve()}}]),e}(),JE=function(){function e(){gt(this,e),this.overlays=new Hk(vk.comparator),this.es=new Map}return bt(e,[{key:"getOverlay",value:function(e,t){return Ck.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=cx();return Ck.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),Ck.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Ck.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=cx(),i=t.length+1,a=new vk(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ck.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Hk((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=cx(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=cx(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ck.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new L_(t,n));var a=this.es.get(t);void 0===a&&(a=px(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),ZE=function(){function e(){gt(this,e),this.ns=new Qk(eI.ss),this.rs=new Qk(eI.os)}return bt(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new eI(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new eI(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new vk(new hk([])),r=new eI(n,e),i=new eI(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new vk(new hk([])),n=new eI(t,e),r=new eI(t,e+1),i=px();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new eI(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),eI=function(){function e(t,n){gt(this,e),this.key=t,this._s=n}return bt(e,null,[{key:"ss",value:function(e,t){return vk.comparator(e.key,t.key)||ok(e._s,t._s)}},{key:"os",value:function(e,t){return ok(e._s,t._s)||vk.comparator(e.key,t.key)}}]),e}(),tI=function(){function e(t,n){gt(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Qk(eI.ss)}return bt(e,[{key:"checkEmpty",value:function(e){return Ck.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new R_(i,t,n,r);this.mutationQueue.push(a);var o,u=Ct(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new eI(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ck.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ck.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Ck.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ck.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Ck.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new eI(t,0),i=new eI(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Ck.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qk(ok);return t.forEach((function(e){var t=new eI(e,0),i=new eI(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Ck.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;vk.isDocumentKey(i)||(i=i.child(""));var a=new eI(new vk(i),0),o=new Qk(ok);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Ck.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Hg(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Ck.forEach(t.mutations,(function(i){var a=new eI(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new eI(t,0),r=this.gs.firstAfterOrEqual(n);return Ck.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ck.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),nI=function(){function e(t){gt(this,e),this.Es=t,this.docs=new Hk(vk.comparator),this.size=0}return bt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ck.resolve(n?n.document.mutableCopy():Pb.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ax();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Pb.newInvalidDocument(e))})),Ck.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=ax(),i=new vk(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Ek(xk(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Ck.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Kg()}},{key:"As",value:function(e,t){return Ck.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new rI(this)}},{key:"getSize",value:function(e){return Ck.resolve(this.size)}}]),e}(),rI=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this)).Yn=e,r}return bt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Ck.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(VE),iI=function(){function e(t){gt(this,e),this.persistence=t,this.Rs=new rx((function(e){return Fb(e)}),Ub),this.lastRemoteSnapshotVersion=lk.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ZE,this.targetCount=0,this.vs=CE.Pn()}return bt(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Ck.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ck.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ck.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Ck.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Ck.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new CE(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Ck.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Ck.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Ck.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ck.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ck.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Ck.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Ck.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ck.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Ck.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Ck.resolve(n)}},{key:"containsKey",value:function(e,t){return Ck.resolve(this.Ps.containsKey(t))}}]),e}(),aI=function(){function e(t,n){var r=this;gt(this,e),this.Vs={},this.overlays={},this.Ss=new Bk(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new iI(this),this.indexManager=new fE,this.remoteDocumentCache=new nI((function(e){return r.referenceDelegate.xs(e)})),this.It=new F_(n),this.Ns=new $E(this.It)}return bt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new JE,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new tI(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Vg("MemoryPersistence","Starting transaction:",e);var i=new oI(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Ck.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),oI=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return bt(n)}(Sk),uI=function(){function e(t){gt(this,e),this.persistence=t,this.Fs=new ZE,this.$s=null}return bt(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Kg()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Ck.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Ck.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Ck.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ck.forEach(this.Ls,(function(r){var i=vk.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,lk.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return Ck.or([function(){return Ck.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),sI=function(){function e(t){gt(this,e),this.It=t}return bt(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Nk("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",s_,{unique:!0}),e.createObjectStore("documentMutations")}(e),cI(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ck.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),cI(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:lk.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",s_,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ck.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:__});t.createIndex("collectionPathOverlayIndex",E_,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",I_,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:h_});t.createIndex("documentKeyIndex",d_),t.createIndex("collectionGroupIndex",p_)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:k_}).createIndex("sequenceNumberIndex",b_,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:w_}).createIndex("documentKeyIndex",x_,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=_E(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Ck.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Ck.forEach(r,(function(r){Hg(r.userId===n.userId);var i=z_(t.It,r);return xE(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new hk(n),o=function(e){return[0,i_(e)]}(a);r.push(t.get(o).next((function(n){return n?Ck.resolve():function(n){return t.put({targetId:0,path:i_(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ck.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:g_});var n=t.store("collectionParents"),r=new hE,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:i_(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new hk(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=vt(e,3),r=(n[0],n[1]),a=(n[2],u_(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=q_(r),a=K_(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new vk(hk.fromString(i.document.name).popFirst(5)):i.noDocument?vk.fromSegments(i.noDocument.path):i.unknownDocument?vk.fromSegments(i.unknownDocument.path):Kg()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ck.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=zE(this.It),a=new aI(uI.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:px();z_(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ck.forEach(r,(function(e,r){var o=new Mg(r),u=J_.oe(n.It,o),s=a.getIndexManager(o),c=EE.oe(o,n.It,s,a.referenceDelegate);return new XE(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new D_(t,Bk.at),e).next()}))}))}}]),e}();function cI(e){e.createObjectStore("targetDocuments",{keyPath:y_}).createIndex("documentTargetsIndex",m_,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",v_,{unique:!0}),e.createObjectStore("targetGlobal")}var lI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fI=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(gt(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Qg(Gg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UE(this,i),this.ii=n+"main",this.It=new F_(s),this.ri=new Dk(this.ii,this.Xs,new sI(this.It)),this.Cs=new NE(this.referenceDelegate,this.It),this.remoteDocumentCache=zE(this.It),this.Ns=new Y_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Bg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return bt(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Qg(Gg.FAILED_PRECONDITION,lI);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Bk(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Ot(Nt().mark((function n(r){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Ot(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return dI(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Pk(t))return Vg("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Vg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return hI(e).get("owner").next((function(e){return Ck.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return dI(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r,i,a=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=O_(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ck.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=Ct(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Ck.resolve(!0):hI(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Qg(Gg.FAILED_PRECONDITION,lI);return!1}}return!(!t.networkEnabled||!t.inForeground)||dI(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Vg("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ot(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new D_(e,Bk.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return dI(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return EE.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new pE(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return J_.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Vg("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?N_:14===i?C_:13===i?A_:12===i?T_:11===i?S_:void Kg();return this.ri.runTransaction(e,o,u,(function(i){return a=new D_(i,r.Ss?r.Ss.next():Bk.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Bg("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Qg(Gg.FAILED_PRECONDITION,Ik);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return hI(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Qg(Gg.FAILED_PRECONDITION,lI)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hI(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=hI(e);return n.get("owner").next((function(e){return t.mi(e)?(Vg("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ck.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Bg("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!ba()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Vg("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Bg("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(A){Bg("Failed to set zombie client id.",A)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(A){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Dk.C()}}]),e}();function hI(e){return O_(e,"owner")}function dI(e){return O_(e,"clientMetadata")}function pI(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var vI=function(){function e(t,n,r,i){gt(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return bt(e,null,[{key:"Ci",value:function(t,n){var r,i=px(),a=px(),o=Ct(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),yI=function(){function e(){gt(this,e),this.xi=!1}return bt(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(ow(t))return Ck.resolve(null);var r=fw(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=hw(t,null,"F"),r=fw(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=px.apply(void 0,mt(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,hw(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return ow(t)||r.isEqual(lk.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(jg()<=Qa.DEBUG&&Vg("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vw(t)),i.Bi(e,o,t,wk(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Qk(gw(e));return t.forEach((function(t,r){yw(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return jg()<=Qa.DEBUG&&Vg("QueryEngine","Using full collection scan to execute query:",vw(t)),this.Ni.getDocumentsMatchingQuery(e,t,_k.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),mI=function(){function e(t,n,r,i){gt(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new Hk(ok),this.qi=new rx((function(e){return Fb(e)}),Ub),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return bt(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XE(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function gI(e,t,n,r){return new mI(e,t,n,r)}function kI(e,t){return bI.apply(this,arguments)}function bI(){return bI=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wg(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=px(),s=Ct(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Ct(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Ct(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Ct(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),bI.apply(this,arguments)}function wI(e,t){var n=Wg(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ck.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Hg(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=px(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function xI(e){var t=Wg(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function _I(e,t){var n=Wg(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Jk.EMPTY_BYTE_STRING,lk.min()).withLastLimboFreeSnapshotVersion(lk.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=ax(),s=px();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(EI(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(lk.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ck.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function EI(e,t,n){var r=px(),i=px();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ax();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(lk.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Vg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function II(e,t){var n=Wg(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function SI(e,t){var n=Wg(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Ck.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new M_(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function TI(e,t,n){return AI.apply(this,arguments)}function AI(){return AI=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Wg(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Pk(e.t1)){e.next=12;break}throw e.t1;case 12:Vg("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),AI.apply(this,arguments)}function CI(e,t,n){var r=Wg(e),i=lk.min(),a=px();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Wg(e),i=r.qi.get(n);return void 0!==i?Ck.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,fw(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:lk.min(),n?a:px())})).next((function(e){return OI(r,mw(t),e),{documents:e,Hi:a}}))}))}function NI(e,t){var n=Wg(e),r=Wg(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function DI(e,t){var n=Wg(e),r=n.Ki.get(t)||lk.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,wk(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return OI(n,t,e),e}))}function OI(e,t,n){var r=e.Ki.get(t)||lk.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function RI(e,t,n,r){return PI.apply(this,arguments)}function PI(){return PI=Ot(Nt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Wg(t),o=px(),u=ax(),s=Ct(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,SI(a,function(e){return fw(aw(hk.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return EI(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),PI.apply(this,arguments)}function LI(e,t){return MI.apply(this,arguments)}function MI(){return MI=Ot(Nt().mark((function e(t,n){var r,i,a,o=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:px(),e.next=3,SI(t,fw(H_(n.bundledQuery)));case 3:return i=e.sent,a=Wg(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ox(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Jk.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),MI.apply(this,arguments)}function FI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function UI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function jI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var VI=function(){function e(t,n,r,i){gt(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return bt(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Qg(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Bg("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),BI=function(){function e(t,n,r){gt(this,e),this.targetId=t,this.state=n,this.error=r}return bt(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Qg(i.error.code,i.error.message))),a?new e(t,i.state,r):(Bg("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),zI=function(){function e(t,n){gt(this,e),this.clientId=t,this.activeTargetIds=n}return bt(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=yx(),o=0;i&&o<r.activeTargetIds.length;++o)i=lb(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Bg("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),qI=function(){function e(t,n){gt(this,e),this.clientId=t,this.onlineState=n}return bt(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Bg("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),KI=function(){function e(){gt(this,e),this.activeTargetIds=yx()}return bt(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),HI=function(){function e(t,n,r,i,a){gt(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Hk(ok),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=FI(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new KI),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return bt(e,[{key:"start",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=Ct(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(FI(this.persistenceKey,i)))&&(o=zI.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=Ct(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(jI(this.persistenceKey,e));if(n){var r=BI.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(jI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Vg("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Vg("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Vg("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Vg("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Bg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Ot(Nt().mark((function e(){var r,i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Bk.at;if(null!=e)try{var n=JSON.parse(e);Hg("number"==typeof n),t=n}catch(e){Bg("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Bk.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new VI(this.currentUser,e,t,n),i=UI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=UI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=jI(this.persistenceKey,e),i=new BI(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return zI.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return VI.Zi(new Mg(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return BI.Zi(r,t)}},{key:"yr",value:function(e){return qI.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Vg("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=yx();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),WI=function(){function e(){gt(this,e),this.Lr=new KI,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return bt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new KI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),GI=function(){function e(){gt(this,e)}return bt(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),QI=function(){function e(){var t=this;gt(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return bt(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Vg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Ct(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Vg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Ct(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},XI=function(){function e(t){gt(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return bt(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),$I=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return bt(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Pg;o.listenOnce(Cg.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Ag.NO_ERROR:var t=o.getResponseJson();Vg("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ag.TIMEOUT:Vg("Connection",'RPC "'+e+'" timed out'),a(new Qg(Gg.DEADLINE_EXCEEDED,"Request time out"));break;case Ag.HTTP_ERROR:var n=o.getStatus();if(Vg("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Gg).indexOf(t)>=0?t:Gg.UNKNOWN}(r.status);a(new Qg(u,r.message))}else a(new Qg(Gg.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Qg(Gg.UNAVAILABLE,"Connection failed."));break;default:Kg()}}finally{Vg("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Sg(),a=Tg(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Og({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");Vg("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new XI({Hr:function(e){l?Vg("Connection","Not sending because WebChannel is closed:",e):(c||(Vg("Connection","Opening WebChannel transport."),s.open(),c=!0),Vg("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Rg.EventType.OPEN,(function(){l||Vg("Connection","WebChannel transport opened.")})),h(s,Rg.EventType.CLOSE,(function(){l||(l=!0,Vg("Connection","WebChannel transport closed"),f.io())})),h(s,Rg.EventType.ERROR,(function(e){l||(l=!0,zg("Connection","WebChannel transport errored:",e),f.io(new Qg(Gg.UNAVAILABLE,"The operation could not be completed")))})),h(s,Rg.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Hg(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Vg("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Xw[e];if(void 0!==t)return nx(t)}(a),u=i.message;void 0===o&&(o=Gg.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Qg(o,u)),s.close()}else Vg("Connection","WebChannel received:",n),f.ro(n)}})),h(a,Ng.STAT_EVENT,(function(e){e.stat===Dg.PROXY?Vg("Connection","Detected buffering proxy"):e.stat===Dg.NOPROXY&&Vg("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){gt(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return bt(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Vg("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Vg("RestConnection","Received: ",e),e}),(function(t){throw zg("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=YI[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function JI(){return"undefined"!=typeof window?window:null}function ZI(){return"undefined"!=typeof document?document:null}function eS(e){return new Ax(e,!0)}var tS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;gt(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return bt(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Vg("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),nS=function(){function e(t,n,r,i,a,o,u,s){gt(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new tS(t,n)}return bt(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Oo()}},{key:"Oo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Oo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===Gg.RESOURCE_EXHAUSTED?(Bg(n.toString()),Bg("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===Gg.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=vt(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new Qg(Gg.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.xo=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.Oo()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Mo",value:function(){var e=this;this.state=5,this.No.Ro(Ot(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return Vg("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.Do===e?n():(Vg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),rS=function(e){xt(n,e);var t=At(n);function n(e,r,i,a,o,u){var s;return gt(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return bt(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Kg()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(Hg(void 0===t||"string"==typeof t),Jk.fromBase64String(t||"")):(Hg(void 0===t||t instanceof Uint8Array),Jk.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Gg.UNKNOWN:nx(e.code);return new Qg(t,e.message||"")}(o);n=new wx(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Mx(e,s.document.name),l=Ox(s.document.updateTime),f=new Ob({mapValue:{fields:s.document.fields}}),h=Pb.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new kx(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Mx(e,v.document),m=v.readTime?Ox(v.readTime):lk.min(),g=Pb.newNoDocument(y,m),k=v.removedTargetIds||[];n=new kx([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Mx(e,b.document),x=b.removedTargetIds||[];n=new kx([],x,w,null)}else{if(!("filter"in t))return Kg();t.filter;var _=t.filter;_.targetId;var E=_.count||0,I=new ex(E),S=_.targetId;n=new bx(S,I)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return lk.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?lk.min():t.readTime?Ox(t.readTime):lk.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=jx(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=jb(r)?{documents:Wx(e,r)}:{query:Gx(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Nx(e,t.resumeToken):t.snapshotVersion.compareTo(lk.min())>0&&(n.readTime=Cx(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Kg()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=jx(this.It),t.removeTarget=e,this.Lo(t)}}]),n}(nS),iS=function(e){xt(n,e);var t=At(n);function n(e,r,i,a,o,u){var s;return gt(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Yo=!1,s}return bt(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,yu(_t(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Hg(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(Hg(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ox(e.updateTime):Ox(t);return n.isEqual(lk.min())&&(n=Ox(t)),new Mw(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ox(e.commitTime);return this.listener.tu(n,t)}return Hg(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=jx(this.It),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Kx(t.It,e)}))};this.Lo(n)}}]),n}(nS),aS=function(e){xt(n,e);var t=At(n);function n(e,r,i,a){var o;return gt(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.It=a,o.su=!1,o}return bt(n,[{key:"iu",value:function(){if(this.su)throw new Qg(Gg.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=vt(i,2),o=a[0],u=a[1];return r.So.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Gg.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Qg(Gg.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=vt(a,2),u=o[0],s=o[1];return i.So._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Gg.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Qg(Gg.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return bt((function e(){gt(this,e)}))}());var oS=function(){function e(t,n){gt(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return bt(e,[{key:"cu",value:function(){var e=this;0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.au("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.au("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}},{key:"au",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(Bg(t),this.uu=!1):Vg("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),uS=bt((function e(t,n,r,i,a){var o=this;gt(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.qr((function(e){r.enqueueAndForget(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=gS(o),!e.t0){e.next=5;break}return Vg("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Wg(t)).wu.add(4),e.next=4,lS(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,sS(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new oS(r,i)}));function sS(e){return cS.apply(this,arguments)}function cS(){return cS=Ot(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gS(t)){e.next=18;break}n=Ct(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),cS.apply(this,arguments)}function lS(e){return fS.apply(this,arguments)}function fS(){return fS=Ot(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ct(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),fS.apply(this,arguments)}function hS(e,t){var n=Wg(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),mS(n)?yS(n):GS(n).Oo()&&pS(n,t))}function dS(e,t){var n=Wg(e),r=GS(n);n._u.delete(t),r.Oo()&&vS(n,t),0===n._u.size&&(r.Oo()?r.$o():gS(n)&&n.yu.set("Unknown"))}function pS(e,t){e.pu.Mt(t.targetId),GS(e).Ho(t)}function vS(e,t){e.pu.Mt(t),GS(e).Jo(t)}function yS(e){e.pu=new _x({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e._u.get(t)||null}}),GS(e).start(),e.yu.cu()}function mS(e){return gS(e)&&!GS(e).ko()&&e._u.size>0}function gS(e){return 0===Wg(e).wu.size}function kS(e){e.pu=void 0}function bS(e){return wS.apply(this,arguments)}function wS(){return wS=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){pS(t,e)}));case 1:case"end":return e.stop()}}),e)}))),wS.apply(this,arguments)}function xS(e,t){return _S.apply(this,arguments)}function _S(){return _S=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kS(t),mS(t)?(t.yu.lu(n),yS(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),_S.apply(this,arguments)}function ES(e,t,n){return IS.apply(this,arguments)}function IS(){return IS=Ot(Nt().mark((function e(t,n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof wx&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ot(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Ct(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Vg("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,SS(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof kx?t.pu.Gt(n):n instanceof bx?t.pu.Yt(n):t.pu.Wt(n),r.isEqual(lk.min())){e.next=29;break}return e.prev=14,e.next=17,xI(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Jk.EMPTY_BYTE_STRING,n.snapshotVersion)),vS(e,t);var r=new M_(n.target,t,1,n.sequenceNumber);pS(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Vg("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,SS(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),IS.apply(this,arguments)}function SS(e,t,n){return TS.apply(this,arguments)}function TS(){return TS=Ot(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pk(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,lS(t);case 5:t.yu.set("Offline"),r||(r=function(){return xI(t.localStore)}),t.asyncQueue.enqueueRetryable(Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vg("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,sS(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),TS.apply(this,arguments)}function AS(e,t){return t().catch((function(n){return SS(e,n,t)}))}function CS(e){return NS.apply(this,arguments)}function NS(){return NS=Ot(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Wg(t),r=QS(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!DS(n)){e.next=19;break}return e.prev=3,e.next=6,II(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,OS(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,SS(n,e.t0);case 17:e.next=2;break;case 19:RS(n)&&PS(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),NS.apply(this,arguments)}function DS(e){return gS(e)&&e.du.length<10}function OS(e,t){e.du.push(t);var n=QS(e);n.Oo()&&n.Xo&&n.Zo(t.mutations)}function RS(e){return gS(e)&&!QS(e).ko()&&e.du.length>0}function PS(e){QS(e).start()}function LS(e){return MS.apply(this,arguments)}function MS(){return MS=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:QS(t).nu();case 1:case"end":return e.stop()}}),e)}))),MS.apply(this,arguments)}function FS(e){return US.apply(this,arguments)}function US(){return US=Ot(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=QS(t),r=Ct(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),US.apply(this,arguments)}function jS(e,t,n){return VS.apply(this,arguments)}function VS(){return VS=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=P_.from(i,n,r),e.next=3,AS(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,CS(t);case 5:case"end":return e.stop()}}),e)}))),VS.apply(this,arguments)}function BS(e,t){return zS.apply(this,arguments)}function zS(){return zS=Ot(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&QS(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ot(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tx(i=n.code)||i===Gg.ABORTED){e.next=7;break}return r=t.du.shift(),QS(t).Fo(),e.next=5,AS(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,CS(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:RS(t)&&PS(t);case 5:case"end":return e.stop()}}),e)}))),zS.apply(this,arguments)}function qS(e,t){return KS.apply(this,arguments)}function KS(){return KS=Ot(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Wg(t)).asyncQueue.verifyOperationInProgress(),Vg("RemoteStore","RemoteStore received new credentials"),i=gS(r),r.wu.add(3),e.next=6,lS(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,sS(r);case 12:case"end":return e.stop()}}),e)}))),KS.apply(this,arguments)}function HS(e,t){return WS.apply(this,arguments)}function WS(){return WS=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wg(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,sS(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,lS(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),WS.apply(this,arguments)}function GS(e){return e.Iu||(e.Iu=function(e,t,n){var r=Wg(e);return r.iu(),new rS(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:bS.bind(null,e),Zr:xS.bind(null,e),zo:ES.bind(null,e)}),e.mu.push(function(){var t=Ot(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),mS(e)?yS(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:kS(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function QS(e){return e.Tu||(e.Tu=function(e,t,n){var r=Wg(e);return r.iu(),new iS(t,r.So,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:LS.bind(null,e),Zr:BS.bind(null,e),eu:FS.bind(null,e),tu:jS.bind(null,e)}),e.mu.push(function(){var t=Ot(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,CS(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(Vg("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var YS=function(){function e(t,n,r,i,a){gt(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Yg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return bt(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qg(Gg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function XS(e,t){if(Bg("AsyncQueue","".concat(t,": ").concat(e)),Pk(e))return new Qg(Gg.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var $S=function(){function e(t){gt(this,e),this.comparator=t?function(e,n){return t(e,n)||vk.comparator(e.key,n.key)}:function(e,t){return vk.comparator(e.key,t.key)},this.keyedMap=ux(),this.sortedSet=new Hk(this.comparator)}return bt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),JS=function(){function e(){gt(this,e),this.Eu=new Hk(vk.comparator)}return bt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Kg():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),ZS=function(){function e(t,n,r,i,a,o,u,s){gt(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return bt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,$S.emptySet(n),a,r,i,!0,!1)}}]),e}(),eT=bt((function e(){gt(this,e),this.Ru=void 0,this.listeners=[]})),tT=bt((function e(){gt(this,e),this.queries=new rx((function(e){return pw(e)}),dw),this.onlineState="Unknown",this.bu=new Set}));function nT(e,t){return rT.apply(this,arguments)}function rT(){return rT=Ot(Nt().mark((function e(t,n){var r,i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wg(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new eT),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=XS(e.t0,"Initialization of query '".concat(vw(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.vu(o.Ru)&&sT(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),rT.apply(this,arguments)}function iT(e,t){return aT.apply(this,arguments)}function aT(){return aT=Ot(Nt().mark((function e(t,n){var r,i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wg(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),aT.apply(this,arguments)}function oT(e,t){var n,r=Wg(e),i=!1,a=Ct(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Ct(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&sT(r)}function uT(e,t,n){var r=Wg(e),i=r.queries.get(t);if(i){var a,o=Ct(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function sT(e){e.bu.forEach((function(e){e.next()}))}var cT=function(){function e(t,n,r){gt(this,e),this.query=t,this.Vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return bt(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Ct(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ZS(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.Vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=ZS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.Vu.next(e)}}]),e}(),lT=function(){function e(t,n){gt(this,e),this.payload=t,this.byteLength=n}return bt(e,[{key:"Ou",value:function(){return"metadata"in this.payload}}]),e}(),fT=function(){function e(t){gt(this,e),this.It=t}return bt(e,[{key:"Ji",value:function(e){return Mx(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?zx(this.It,e.document,!1):Pb.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Ox(e)}}]),e}(),hT=function(){function e(t,n,r){gt(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dT(t)}return bt(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=hk.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new fT(this.It),i=Ct(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=Ct(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||px()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RI(this.localStore,new fT(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=Ct(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,LI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function dT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var pT=bt((function e(t){gt(this,e),this.key=t})),vT=bt((function e(t){gt(this,e),this.key=t})),yT=function(){function e(t,n){gt(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=px(),this.mutatedKeys=px(),this.Gu=gw(t),this.Qu=new $S(this.Gu)}return bt(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new JS,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=yw(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kg()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new ZS(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new JS,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=px(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new vT(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new pT(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=px();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return ZS.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),mT=bt((function e(t,n,r){gt(this,e),this.query=t,this.targetId=n,this.view=r})),gT=bt((function e(t){gt(this,e),this.key=t,this.nc=!1})),kT=function(){function e(t,n,r,i,a,o){gt(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new rx((function(e){return pw(e)}),dw),this.rc=new Map,this.oc=new Set,this.uc=new Hk(vk.comparator),this.cc=new Map,this.ac=new ZE,this.hc={},this.lc=new Map,this.fc=CE.vn(),this.onlineState="Unknown",this.dc=void 0}return bt(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function bT(e,t){return wT.apply(this,arguments)}function wT(){return wT=Ot(Nt().mark((function e(t,n){var r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=dA(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,SI(r.localStore,fw(n));case 8:return u=e.sent,r.isPrimaryClient&&hS(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,xT(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),wT.apply(this,arguments)}function xT(e,t,n,r){return _T.apply(this,arguments)}function _T(){return _T=Ot(Nt().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Ot(Nt().mark((function e(t,n,r,i){var a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,CI(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(qT(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,CI(t.localStore,n,!0);case 3:return a=e.sent,o=new yT(n,a.Hi),u=o.Wu(a.documents),s=gx.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),qT(t,r,c.Xu),l=new mT(n,r,o),e.abrupt("return",(t.ic.set(n,l),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),_T.apply(this,arguments)}function ET(e,t){return IT.apply(this,arguments)}function IT(){return IT=Ot(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wg(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!dw(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,TI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),dS(r.remoteStore,i.targetId),BT(r,i.targetId)})).catch(Tk);case 9:e.next=14;break;case 11:return BT(r,i.targetId),e.next=14,TI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),IT.apply(this,arguments)}function ST(e,t,n){return TT.apply(this,arguments)}function TT(){return TT=Ot(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pA(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Wg(e),a=ck.now(),o=t.reduce((function(e,t){return e.add(t.key)}),px());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ax(),s=px();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Ct(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=qw(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Ww(c.key,l,Rb(l.value.mapValue),Fw.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:sx(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new Hk(ok)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,WT(i,a.changes);case 9:return e.next=11,CS(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=XS(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),TT.apply(this,arguments)}function AT(e,t){return CT.apply(this,arguments)}function CT(){return CT=Ot(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wg(t),e.prev=1,e.next=4,_I(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Hg(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Hg(n.nc):e.removedDocuments.size>0&&(Hg(n.nc),n.nc=!1))})),e.next=8,WT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Tk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),CT.apply(this,arguments)}function NT(e,t,n){var r=Wg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Wg(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Ct(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&sT(n)}(r.eventManager,t),i.length&&r.sc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function DT(e,t,n){return OT.apply(this,arguments)}function OT(){return OT=Ot(Nt().mark((function e(t,n,r){var i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Wg(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Hk(vk.comparator)).insert(o,Pb.newNoDocument(o,lk.min())),s=px().add(o),c=new mx(lk.min(),new Map,new Qk(ok),u,s),e.next=9,AT(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),HT(i),e.next=16;break;case 14:return e.next=16,TI(i.localStore,n,!1).then((function(){return BT(i,n,r)})).catch(Tk);case 16:case"end":return e.stop()}}),e)}))),OT.apply(this,arguments)}function RT(e,t){return PT.apply(this,arguments)}function PT(){return PT=Ot(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wg(t),i=n.batch.batchId,e.prev=1,e.next=4,wI(r.localStore,n);case 4:return a=e.sent,VT(r,i,null),jT(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,WT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Tk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),PT.apply(this,arguments)}function LT(e,t,n){return MT.apply(this,arguments)}function MT(){return MT=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wg(t),e.prev=1,e.next=4,function(e,t){var n=Wg(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Hg(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,VT(i,n,r),jT(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,WT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Tk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),MT.apply(this,arguments)}function FT(e,t){return UT.apply(this,arguments)}function UT(){return UT=Ot(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gS((r=Wg(t)).remoteStore)||Vg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Wg(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=XS(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),UT.apply(this,arguments)}function jT(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function VT(e,t,n){var r=Wg(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function BT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Ct(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||zT(e,t)}))}function zT(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(dS(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),HT(e))}function qT(e,t,n){var r,i=Ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof pT?(e.ac.addReference(a.key,t),KT(e,a)):a instanceof vT?(Vg("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||zT(e,a.key)):Kg()}}catch(o){i.e(o)}finally{i.f()}}function KT(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Vg("SyncEngine","New document in limbo: "+n),e.oc.add(r),HT(e))}function HT(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new vk(hk.fromString(t)),r=e.fc.next();e.cc.set(r,new gT(n)),e.uc=e.uc.insert(n,r),hS(e.remoteStore,new M_(fw(aw(n.path)),r,2,Bk.at))}}function WT(e,t,n){return GT.apply(this,arguments)}function GT(){return GT=Ot(Nt().mark((function e(t,n,r){var i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Wg(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=vI.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.zo(a),e.next=9,function(){var e=Ot(Nt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wg(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ck.forEach(n,(function(t){return Ck.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ck.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Pk(e.t0)){e.next=10;break}throw e.t0;case 10:Vg("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Ct(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),GT.apply(this,arguments)}function QT(e,t){return YT.apply(this,arguments)}function YT(){return YT=Ot(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Wg(t)).currentUser.isEqual(n)){e.next=11;break}return Vg("SyncEngine","User change. New user:",n.toKey()),e.next=5,kI(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Qg(Gg.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,WT(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),YT.apply(this,arguments)}function XT(e,t){var n=Wg(e),r=n.cc.get(t);if(r&&r.nc)return px().add(r.key);var i=px(),a=n.rc.get(t);if(!a)return i;var o,u=Ct(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function $T(e,t){return JT.apply(this,arguments)}function JT(){return JT=Ot(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wg(t),e.next=3,CI(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&qT(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),JT.apply(this,arguments)}function ZT(e,t){return eA.apply(this,arguments)}function eA(){return eA=Ot(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wg(t),e.abrupt("return",DI(r.localStore,n).then((function(e){return WT(r,e)})));case 2:case"end":return e.stop()}}),e)}))),eA.apply(this,arguments)}function tA(e,t,n,r){return nA.apply(this,arguments)}function nA(){return nA=Ot(Nt().mark((function e(t,n,r,i){var a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Wg(t),e.next=3,function(e,t){var n=Wg(e),r=Wg(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ck.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,CS(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(VT(a,n,i||null),jT(a,n),function(e,t){Wg(Wg(e).mutationQueue).An(t)}(a.localStore,n)):Kg();case 11:return e.next=13,WT(a,o);case 13:e.next=16;break;case 15:Vg("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),nA.apply(this,arguments)}function rA(e,t){return iA.apply(this,arguments)}function iA(){return iA=Ot(Nt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dA(r=Wg(t)),pA(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,aA(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,HS(r.remoteStore,!0);case 9:o=Ct(a);try{for(o.s();!(u=o.n()).done;)s=u.value,hS(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return BT(r,t),TI(r.localStore,t,!0)})),dS(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,aA(r,c);case 21:return function(e){var t=Wg(e);t.cc.forEach((function(e,n){dS(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new Hk(vk.comparator)}(r),r.dc=!1,e.next=25,HS(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),iA.apply(this,arguments)}function aA(e,t,n){return oA.apply(this,arguments)}function oA(){return oA=Ot(Nt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Wg(t),a=[],o=[],u=Ct(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,SI(i.localStore,fw(f[0]));case 11:l=e.sent,h=Ct(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,$T(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,NI(i.localStore,c);case 36:return m=e.sent,e.next=39,SI(i.localStore,m);case 39:return l=e.sent,e.next=42,xT(i,uA(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),oA.apply(this,arguments)}function uA(e){return iw(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sA(e){var t=Wg(e);return Wg(Wg(t.localStore).persistence).vi()}function cA(e,t,n,r){return lA.apply(this,arguments)}function lA(){return lA=Ot(Nt().mark((function e(t,n,r,i){var a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Wg(t)).dc){e.next=3;break}return e.abrupt("return",void Vg("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,DI(a.localStore,mw(o[0]));case 10:return u=e.sent,s=mx.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,WT(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,TI(a.localStore,n,!0);case 17:return BT(a,n,i),e.abrupt("break",20);case 19:Kg();case 20:case"end":return e.stop()}}),e)}))),lA.apply(this,arguments)}function fA(e,t,n){return hA.apply(this,arguments)}function hA(){return hA=Ot(Nt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=dA(t)).dc){e.next=45;break}a=Ct(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return Vg("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,NI(i.localStore,u);case 12:return s=e.sent,e.next=15,SI(i.localStore,s);case 15:return c=e.sent,e.next=18,xT(i,uA(s),c.targetId,!1);case 18:hS(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Ct(r),e.prev=30,h=Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,TI(i.localStore,t,!1).then((function(){dS(i.remoteStore,t),BT(i,t)})).catch(Tk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),hA.apply(this,arguments)}function dA(e){var t=Wg(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=AT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=XT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=DT.bind(null,t),t.sc.zo=oT.bind(null,t.eventManager),t.sc.wc=uT.bind(null,t.eventManager),t}function pA(e){var t=Wg(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=RT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=LT.bind(null,t),t}function vA(e,t,n){var r=Wg(e);(function(){var e=Ot(Nt().mark((function e(t,n,r){var i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Wg(e),r=Ox(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(dT(i)),a=new hT(i,t.localStore,n.It),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,WT(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Wg(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(zg("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var yA=function(){function e(){gt(this,e),this.synchronizeTabs=!1}return bt(e,[{key:"initialize",value:function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=eS(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return gI(this.persistence,new yI,e.initialUser,this.It)}},{key:"yc",value:function(e){return new aI(uI.Bs,this.It)}},{key:"gc",value:function(e){return new WI}},{key:"terminate",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),mA=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return bt(n,[{key:"initialize",value:function(){var e=Ot(Nt().mark((function e(t){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(_t(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,pA(this.Ac.syncEngine);case 6:return e.next=8,CS(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return gI(this.persistence,new yI,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new ME(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new Vk(t,this.persistence);return new jk(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=pI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?wE.withCacheSize(this.cacheSizeBytes):wE.DEFAULT;return new fI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,JI(),ZI(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new WI}}]),n}(yA),gA=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return bt(n,[{key:"initialize",value:function(){var e=Ot(Nt().mark((function e(t){var r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yu(_t(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof HI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:tA.bind(null,r),$r:cA.bind(null,r),Br:fA.bind(null,r),vi:sA.bind(null,r),Mr:ZT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rA(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=JI();if(!HI.C(t))throw new Qg(Gg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=pI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new HI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(mA),kA=function(){function e(){gt(this,e)}return bt(e,[{key:"initialize",value:function(){var e=Ot(Nt().mark((function e(t,n){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return NT(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=QT.bind(null,this.syncEngine),e.next=12,HS(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new tT}},{key:"createDatastore",value:function(e){var t,n=eS(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new $I(t));return function(e,t,n,r){return new aS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return NT(o.syncEngine,e,0)},a=QI.C()?new QI:new GI,new uS(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new kT(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wg(t),Vg("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,lS(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function bA(e,t,n){if(!n)throw new Qg(Gg.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wA(e,t,n,r){if(!0===t&&!0===r)throw new Qg(Gg.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function xA(e){if(!vk.isDocumentKey(e))throw new Qg(Gg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _A(e){if(vk.isDocumentKey(e))throw new Qg(Gg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function EA(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Kg()}function IA(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qg(Gg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=EA(e);throw new Qg(Gg.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function SA(e,t){if(t<=0)throw new Qg(Gg.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var TA=new Map,AA=function(){function e(t){var n;if(gt(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Qg(Gg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qg(Gg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,wA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return bt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),CA=function(){function e(t,n,r,i){gt(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AA({}),this._settingsFrozen=!1}return bt(e,[{key:"app",get:function(){if(!this._app)throw new Qg(Gg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Qg(Gg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AA(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $g;switch(e.type){case"gapi":var t=e.client;return new tk(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Qg(Gg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=TA.get(e);t&&(Vg("ComponentProvider","Removing Datastore"),TA.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function NA(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=IA(e,CA))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&zg("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Mg.MOCK_USER;else{o=Ca(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Qg(Gg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mg(s)}e._authCredentials=new Jg(new Xg(o,u))}}var DA=function(){function e(t,n,r){gt(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return bt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new RA(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),OA=function(){function e(t,n,r){gt(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return bt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),RA=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this,e,r,aw(i)))._path=i,a.type="collection",a}return bt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new DA(this.firestore,null,new vk(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(OA);function PA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qa(e),bA("collection","path",t),e instanceof CA){var a=hk.fromString.apply(hk,[t].concat(r));return _A(a),new RA(e,null,a)}if(!(e instanceof DA||e instanceof RA))throw new Qg(Gg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hk.fromString.apply(hk,[t].concat(r)));return _A(o),new RA(e.firestore,null,o)}function LA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=qa(e),1===arguments.length&&(t=ak.R()),bA("doc","path",t),e instanceof CA){var a=hk.fromString.apply(hk,[t].concat(r));return xA(a),new DA(e,null,new vk(a))}if(!(e instanceof DA||e instanceof RA))throw new Qg(Gg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hk.fromString.apply(hk,[t].concat(r)));return xA(o),new DA(e.firestore,e instanceof RA?e.converter:null,new vk(o))}function MA(e,t){return e=qa(e),t=qa(t),(e instanceof DA||e instanceof RA)&&(t instanceof DA||t instanceof RA)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function FA(e,t){return e=qa(e),t=qa(t),e instanceof OA&&t instanceof OA&&e.firestore===t.firestore&&dw(e._query,t._query)&&e.converter===t.converter}function UA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ot(Nt().mark((function r(){var i;return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var jA=function(){function e(t){gt(this,e),this.observer=t,this.muted=!1}return bt(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Bg("Uncaught Error in snapshot listener:",e)}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),VA=function(){function e(t,n){var r=this;gt(this,e),this.Pc=t,this.It=n,this.metadata=new Yg,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return bt(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=Ot(Nt().mark((function e(){var t,n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new lT(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=Ot(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=Ot(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BA=function(){function e(t){gt(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return bt(e,[{key:"lookup",value:function(){var e=Ot(Nt().mark((function e(t){var n,r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Qg(Gg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ot(Nt().mark((function e(t,n){var r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wg(t),i=jx(r.It)+"/documents",a={documents:n.map((function(e){return Lx(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=qx(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Hg(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Jw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ot(Nt().mark((function e(){var t,n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=vk.fromPath(t);n.mutations.push(new Zw(r,n.precondition(r)))})),e.next=7,function(){var e=Ot(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wg(t),i=jx(r.It)+"/documents",a={writes:n.map((function(e){return Kx(r.It,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Kg();t=lk.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Qg(Gg.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(lk.min())?Fw.exists(!1):Fw.updateTime(t):Fw.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(lk.min()))throw new Qg(Gg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fw.updateTime(t)}return Fw.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),zA=function(){function e(t,n,r,i,a){gt(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.No=new tS(this.asyncQueue,"transaction_retry")}return bt(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.No.Ro(Ot(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new BA(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!sb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!tx(t)}return!1}}]),e}(),qA=function(){function e(t,n,r,i){var a=this;gt(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mg.UNAUTHENTICATED,this.clientId=ak.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vg("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Vg("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return bt(e,[{key:"getConfiguration",value:function(){var e=Ot(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Qg(Gg.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Yg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ot(Nt().mark((function n(){var r;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=XS(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function KA(e,t){return HA.apply(this,arguments)}function HA(){return HA=Ot(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Vg("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,kI(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),HA.apply(this,arguments)}function WA(e,t){return GA.apply(this,arguments)}function GA(){return GA=Ot(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,QA(t);case 3:return r=e.sent,Vg("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return qS(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return qS(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function QA(e){return YA.apply(this,arguments)}function YA(){return YA=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Vg("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,KA(t,new yA);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),YA.apply(this,arguments)}function XA(e){return $A.apply(this,arguments)}function $A(){return $A=Ot(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Vg("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,WA(t,new kA);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),$A.apply(this,arguments)}function JA(e){return QA(e).then((function(e){return e.persistence}))}function ZA(e){return QA(e).then((function(e){return e.localStore}))}function eC(e){return XA(e).then((function(e){return e.remoteStore}))}function tC(e){return XA(e).then((function(e){return e.syncEngine}))}function nC(e){return XA(e).then((function(e){return e.datastore}))}function rC(e){return iC.apply(this,arguments)}function iC(){return iC=Ot(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,XA(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=bT.bind(null,n.syncEngine),r.onUnlisten=ET.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),iC.apply(this,arguments)}function aC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Yg;return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function i(){return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new jA({next:function(a){t.enqueueAndForget((function(){return iT(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Qg(Gg.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Qg(Gg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new cT(aw(n.path),a,{includeMetadataChanges:!0,ku:!0});return nT(e,o)},i.next=3,rC(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function oC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Yg;return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function i(){return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new jA({next:function(n){t.enqueueAndForget((function(){return iT(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Qg(Gg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new cT(n,a,{includeMetadataChanges:!0,ku:!0});return nT(e,o)},i.next=3,rC(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var uC=function(){function e(){var t=this;gt(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new tS(this,"async_queue_retry"),this.Wc=function(){var e=ZI();e&&Vg("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=ZI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return bt(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=ZI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new Yg;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=Ot(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Pk(e.t0)){e.next=12;break}throw e.t0;case 12:Vg("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.No.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Bg("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=YS.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&Kg()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Ot(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=Ct(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Ct(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function sC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Ct(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var cC=function(){function e(){gt(this,e),this._progressObserver={},this._taskCompletionResolver=new Yg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return bt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),lC=function(e){xt(n,e);var t=At(n);function n(e,r,i,a){var o;return gt(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new uC,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return bt(n,[{key:"_terminate",value:function(){return this._firestoreClient||hC(this),this._firestoreClient.terminate()}}]),n}(CA);function fC(e){return e._firestoreClient||hC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function hC(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ob(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new qA(e._authCredentials,e._appCheckCredentials,e._queue,r)}function dC(e,t,n){var r=new Yg;return e.asyncQueue.enqueue(Ot(Nt().mark((function i(){var a;return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,KA(e,n);case 3:return i.next=5,WA(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Gg.FAILED_PRECONDITION||e.code===Gg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:zg("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function pC(e){return function(e){return e.asyncQueue.enqueue(Ot(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JA(e);case 2:return n=t.sent,t.next=5,eC(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Wg(e);return t.wu.delete(0),sS(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(fC(e=IA(e,lC)))}function vC(e){return function(e){return e.asyncQueue.enqueue(Ot(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JA(e);case 2:return n=t.sent,t.next=5,eC(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Wg(t)).wu.add(0),e.next=4,lS(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(fC(e=IA(e,lC)))}function yC(e,t){var n=fC(e=IA(e,lC)),r=new cC;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new VA(e,t)}(function(e,t){if(e instanceof Uint8Array)return UA(e,t);if(e instanceof ArrayBuffer)return UA(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,eS(t));e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vA,t.next=3,tC(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function mC(e,t){return function(e,t){return e.asyncQueue.enqueue(Ot(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Wg(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,ZA(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(fC(e=IA(e,lC)),t).then((function(t){return t?new OA(e,null,t.query):null}))}function gC(e){if(e._initialized||e._terminated)throw new Qg(Gg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kC=function(){function e(t){gt(this,e),this._byteString=t}return bt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Jk.fromBase64String(t))}catch(t){throw new Qg(Gg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Jk.fromUint8Array(t))}}]),e}(),bC=function(){function e(){gt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pk(n)}return bt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var wC=bt((function e(t){gt(this,e),this._methodName=t})),xC=function(){function e(t,n){if(gt(this,e),!isFinite(t)||t<-90||t>90)throw new Qg(Gg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Qg(Gg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return bt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ok(this._lat,e._lat)||ok(this._long,e._long)}}]),e}(),_C=/^__.*__$/,EC=function(){function e(t,n,r){gt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return bt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ww(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hw(e,this.data,t,this.fieldTransforms)}}]),e}(),IC=function(){function e(t,n,r){gt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return bt(e,[{key:"toMutation",value:function(e,t){return new Ww(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function SC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kg()}}var TC=function(){function e(t,n,r,i,a,o){gt(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return bt(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return GC(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(SC(this.sa)&&_C.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),AC=function(){function e(t,n,r){gt(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||eS(t)}return bt(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new TC({sa:e,methodName:t,fa:n,path:pk.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function CC(e){var t=e._freezeSettings(),n=eS(e._databaseId);return new AC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function NC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);qC("Data must be an object, but it was:",o,r);var u,s,c=BC(r,o);if(a.merge)u=new $k(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Ct(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=KC(t,d,n);if(!o.contains(p))throw new Qg(Gg.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));QC(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new $k(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new EC(new Ob(c),u,s)}var DC=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(wC);function OC(e,t,n){return new TC({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var RC=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n,[{key:"_toFieldTransform",value:function(e){return new Lw(e.path,new Tw)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(wC),PC=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e))._a=r,i}return bt(n,[{key:"_toFieldTransform",value:function(e){var t=OC(this,e,!0),n=this._a.map((function(e){return VC(e,t)})),r=new Aw(n);return new Lw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(wC),LC=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e))._a=r,i}return bt(n,[{key:"_toFieldTransform",value:function(e){var t=OC(this,e,!0),n=this._a.map((function(e){return VC(e,t)})),r=new Nw(n);return new Lw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(wC),MC=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e)).wa=r,i}return bt(n,[{key:"_toFieldTransform",value:function(e){var t=new Ow(e.It,xw(e.It,this.wa));return new Lw(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(wC);function FC(e,t,n,r){var i=e.da(1,t,n);qC("Data must be an object, but it was:",i,r);var a=[],o=Ob.empty();qk(r,(function(e,r){var u=WC(t,e,n);r=qa(r);var s=i.ca(u);if(r instanceof DC)a.push(u);else{var c=VC(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new $k(a);return new IC(o,u,i.fieldTransforms)}function UC(e,t,n,r,i,a){var o=e.da(1,t,n),u=[KC(t,r,n)],s=[i];if(a.length%2!=0)throw new Qg(Gg.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(KC(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ob.empty(),h=u.length-1;h>=0;--h)if(!QC(l,u[h])){var d=u[h],p=s[h];p=qa(p);var v=o.ca(d);if(p instanceof DC)l.push(d);else{var y=VC(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new $k(l);return new IC(f,m,o.fieldTransforms)}function jC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return VC(n,e.da(r?4:3,t))}function VC(e,t){if(zC(e=qa(e)))return qC("Unsupported field value:",t,e),BC(e,t);if(e instanceof wC)return function(e,t){if(!SC(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Ct(e);try{for(a.s();!(n=a.n()).done;){var o=VC(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=qa(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xw(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ck.fromDate(e);return{timestampValue:Cx(t.It,n)}}if(e instanceof ck){var r=new ck(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cx(t.It,r)}}if(e instanceof xC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kC)return{bytesValue:Nx(t.It,e._byteString)};if(e instanceof DA){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Rx(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(EA(e)))}(e,t)}function BC(e,t){var n={};return Kk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qk(e,(function(e,r){var i=VC(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ck||e instanceof xC||e instanceof kC||e instanceof DA||e instanceof wC)}function qC(e,t,n){if(!zC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=EA(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function KC(e,t,n){if((t=qa(t))instanceof bC)return t._internalPath;if("string"==typeof t)return WC(e,t);throw GC("Field path arguments must be of type string or ",e,!1,void 0,n)}var HC=new RegExp("[~\\*/\\[\\]]");function WC(e,t,n){if(t.search(HC)>=0)throw GC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Rt(bC,mt(t.split(".")))._internalPath}catch(L){throw GC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function GC(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Qg(Gg.INVALID_ARGUMENT,u+e+s)}function QC(e,t){return e.some((function(e){return e.isEqual(t)}))}var YC=function(){function e(t,n,r,i,a){gt(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return bt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new DA(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new XC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field($C("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),XC=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n,[{key:"data",value:function(){return yu(_t(n.prototype),"data",this).call(this)}}]),n}(YC);function $C(e,t){return"string"==typeof t?WC(e,t):t instanceof bC?t._internalPath:t._delegate._internalPath}function JC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Qg(Gg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ZC=bt((function e(){gt(this,e)}));function eN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var tN=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return bt(n,[{key:"_apply",value:function(e){var t=CC(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){hN(o,a);var s,c=[],l=Ct(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(fN(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=fN(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||hN(o,a),u=jC(n,"where",o,"in"===a||"not-in"===a);var h=qb.create(i,a,u);return function(e,t){if(t.dt()){var n=sw(e);if(null!==n&&!n.isEqual(t.field))throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=uw(e);null!==r&&dN(e,t.field,r)}var i=function(e,t){var n,r=Ct(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Qg(Gg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Qg(Gg.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new OA(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new rw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(ZC);var nN=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return bt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Zb(t,n);return function(e,t){if(null===uw(e)){var n=sw(e);null!==n&&dN(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new OA(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new rw(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(ZC);var rN=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return bt(n,[{key:"_apply",value:function(e){return new OA(e.firestore,e.converter,hw(e._query,this.Ia,this.Ta))}}]),n}(ZC);var iN=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return bt(n,[{key:"_apply",value:function(e){var t=lN(e,this.type,this.Ea,this.Aa);return new OA(e.firestore,e.converter,function(e,t){return new rw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(ZC);function aN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iN("startAt",t,!0)}function oN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iN("startAfter",t,!1)}var uN=function(e){xt(n,e);var t=At(n);function n(e,r,i){var a;return gt(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return bt(n,[{key:"_apply",value:function(e){var t=lN(e,this.type,this.Ea,this.Aa);return new OA(e.firestore,e.converter,function(e,t){return new rw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(ZC);function sN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uN("endBefore",t,!1)}function cN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uN("endAt",t,!0)}function lN(e,t,n,r){if(n[0]=qa(n[0]),n[0]instanceof YC)return function(e,t,n,r,i){if(!r)throw new Qg(Gg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Ct(lw(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(bb(t,r.key));else{var c=r.data.field(s.field);if(rb(c))throw new Qg(Gg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Jb(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=CC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Qg(Gg.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!cw(e)&&-1!==c.indexOf("/"))throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(hk.fromString(c));if(!vk.isDocumentKey(l))throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new vk(l);u.push(bb(t,f))}else{var h=jC(n,r,c);u.push(h)}}return new Jb(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function fN(e,t,n){if("string"==typeof(n=qa(n))){if(""===n)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cw(t)&&-1!==n.indexOf("/"))throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(hk.fromString(n));if(!vk.isDocumentKey(r))throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return bb(e,new vk(r))}if(n instanceof DA)return bb(e,n._key);throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(EA(n),"."))}function hN(e,t){if(!Array.isArray(e)||0===e.length)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function dN(e,t,n){if(!n.isEqual(t))throw new Qg(Gg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var pN=function(){function e(){gt(this,e)}return bt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(db(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Kg()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return qk(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new xC(tb(e.latitude),tb(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ib(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ab(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=eb(e);return new ck(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=hk.fromString(e);Hg(r_(n));var r=new ub(n.get(1),n.get(3)),i=new vk(n.popFirst(5));return r.isEqual(t)||Bg("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function vN(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var yN=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this)).firestore=e,r}return bt(n,[{key:"convertBytes",value:function(e){return new kC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new DA(this.firestore,null,t)}}]),n}(pN),mN=function(){function e(t,n){gt(this,e),this.hasPendingWrites=t,this.fromCache=n}return bt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),gN=function(e){xt(n,e);var t=At(n);function n(e,r,i,a,o,u){var s;return gt(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return bt(n,[{key:"exists",value:function(){return yu(_t(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new kN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field($C("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(YC),kN=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yu(_t(n.prototype),"data",this).call(this,e)}}]),n}(gN),bN=function(){function e(t,n,r,i){gt(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new mN(i.hasPendingWrites,i.fromCache),this.query=r}return bt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new kN(n._firestore,n._userDataWriter,r.key,r,new mN(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qg(Gg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new kN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new kN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:wN(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function wN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kg()}}function xN(e,t){return e instanceof gN&&t instanceof gN?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof bN&&t instanceof bN&&e._firestore===t._firestore&&FA(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var _N=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this)).firestore=e,r}return bt(n,[{key:"convertBytes",value:function(e){return new kC(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new DA(this.firestore,null,t)}}]),n}(pN);function EN(e){e=IA(e,DA);var t=IA(e.firestore,lC),n=fC(t),r=new _N(t);return function(e,t){var n=new Yg;return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ot(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Wg(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Qg(Gg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=XS(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ZA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new gN(t,r,e._key,n,new mN(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function IN(e){e=IA(e,OA);var t=IA(e.firestore,lC),n=fC(t),r=new _N(t);return function(e,t){var n=new Yg;return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ot(Nt().mark((function e(t,n,r){var i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,CI(t,n,!0);case 3:i=e.sent,a=new yT(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=XS(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ZA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new bN(t,r,e,n)}))}function SN(e,t,n){e=IA(e,DA);var r=IA(e.firestore,lC),i=vN(e.converter,t,n);return NN(r,[NC(CC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fw.none())])}function TN(e,t,n){e=IA(e,DA);for(var r=IA(e.firestore,lC),i=CC(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return NN(r,[("string"==typeof(t=qa(t))||t instanceof bC?UC(i,"updateDoc",e._key,t,n,o):FC(i,"updateDoc",e._key,t)).toMutation(e._key,Fw.exists(!0))])}function AN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=qa(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||sC(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(sC(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof DA)l=IA(e.firestore,lC),f=aw(e._key.path),c={next:function(t){n[s]&&n[s](DN(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=IA(e,OA);l=IA(p.firestore,lC),f=p._query;var v=new _N(l);c={next:function(e){n[s]&&n[s](new bN(l,v,p,e))},error:n[s+1],complete:n[s+2]},JC(e._query)}return function(e,t,n,r){var i=new jA(r),a=new cT(t,i,n);return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=nT,t.next=3,rC(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=iT,t.next=3,rC(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(fC(l),f,h,c)}function CN(e,t){return function(e,t){var n=new jA(t);return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Wg(e).bu.add(t),t.next()},t.next=3,rC(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Wg(e).bu.delete(t)},t.next=3,rC(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(fC(e=IA(e,lC)),sC(t)?t:{next:t})}function NN(e,t){return function(e,t){var n=new Yg;return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ST,r.next=3,tC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(fC(e),t)}function DN(e,t,n){var r=n.docs.get(t._key),i=new _N(e);return new gN(e,i,t._key,r,new mN(n.hasPendingWrites,n.fromCache),t.converter)}var ON={maxAttempts:5},RN=function(){function e(t,n){gt(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=CC(t)}return bt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=PN(e,this._firestore),i=vN(r.converter,t,n),a=NC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Fw.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=PN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=qa(t))||t instanceof bC?UC(this._dataReader,"WriteBatch.update",i._key,t,n,o):FC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Fw.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=PN(e,this._firestore);return this._mutations=this._mutations.concat(new Jw(t._key,Fw.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Qg(Gg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function PN(e,t){if((e=qa(e)).firestore!==t)throw new Qg(Gg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var LN=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e,r))._firestore=e,i}return bt(n,[{key:"get",value:function(e){var t=this,r=PN(e,this._firestore),i=new _N(this._firestore);return yu(_t(n.prototype),"get",this).call(this,e).then((function(e){return new gN(t._firestore,i,r._key,e._document,new mN(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){gt(this,e),this._firestore=t,this._transaction=n,this._dataReader=CC(t)}return bt(e,[{key:"get",value:function(e){var t=this,n=PN(e,this._firestore),r=new yN(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Kg();var i=e[0];if(i.isFoundDocument())return new YC(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new YC(t._firestore,r,n._key,null,n.converter);throw Kg()}))}},{key:"set",value:function(e,t,n){var r=PN(e,this._firestore),i=vN(r.converter,t,n),a=NC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=PN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=qa(t))||t instanceof bC?UC(this._dataReader,"Transaction.update",i._key,t,n,o):FC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=PN(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function MN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PC("arrayUnion",t)}function FN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Fg=e}(Uo),Do(new Ka("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new lC(new Zg(e.getProvider("auth-internal")),new rk(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Qg(Gg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ub(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ko(Lg,"3.6.0",e),Ko(Lg,"3.6.0","esm2017")}();function UN(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Qg("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function jN(){if("undefined"===typeof Uint8Array)throw new Qg("unimplemented","Uint8Arrays are not available in this environment.")}function VN(){if("undefined"==typeof atob)throw new Qg("unimplemented","Blobs are unavailable in Firestore in this environment.")}var BN=function(){function e(t){gt(this,e),this._delegate=t}return bt(e,[{key:"toBase64",value:function(){return VN(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return jN(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return VN(),new e(kC.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return jN(),new e(kC.fromUint8Array(t))}}]),e}();function zN(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Ct(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var qN=function(){function e(){gt(this,e)}return bt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){gC(e=IA(e,lC));var n=fC(e),r=e._freezeSettings(),i=new kA;return dC(n,i,new mA(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){gC(e=IA(e,lC));var t=fC(e),n=e._freezeSettings(),r=new kA;return dC(t,r,new gA(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Qg(Gg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Yg;return e._queue.enqueueAndForgetEvenWhileRestricted(Ot(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ot(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dk.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Dk.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(pI(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),KN=function(){function e(t,n,r){var i=this;gt(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ub||(this._appCompat=t)}return bt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||zg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};NA(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return pC(this._delegate)}},{key:"disableNetwork",value:function(){return vC(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&wA("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Yg;return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=FT,n.next=3,tC(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(fC(e=IA(e,lC)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return CN(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Qg("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new iD(this,PA(this._delegate,e))}catch(t){throw XN(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new YN(this,LA(this._delegate,e))}catch(t){throw XN(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new tD(this,function(e,t){if(e=IA(e,CA),bA("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Qg(Gg.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new OA(e,null,function(e){return new rw(hk.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw XN(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=IA(e,lC);var r=Object.assign(Object.assign({},ON),n);return function(e){if(e.maxAttempts<1)throw new Qg(Gg.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Yg;return e.asyncQueue.enqueueAndForget(Ot(Nt().mark((function i(){var a;return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,nC(e);case 2:a=i.sent,new zA(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(fC(e),(function(n){return t(new LN(e,n))}),r)}(this._delegate,(function(n){return e(new WN(t,n))}))}},{key:"batch",value:function(){var e=this;return fC(this._delegate),new GN(new RN(this._delegate,(function(t){return NN(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return yC(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return mC(this._delegate,e).then((function(e){return e?new tD(t,e):null}))}}]),e}(),HN=function(e){xt(n,e);var t=At(n);function n(e){var r;return gt(this,n),(r=t.call(this)).firestore=e,r}return bt(n,[{key:"convertBytes",value:function(e){return new BN(new kC(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return YN.forKey(t,this.firestore,null)}}]),n}(pN);var WN=function(){function e(t,n){gt(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new HN(t)}return bt(e,[{key:"get",value:function(e){var t=this,n=aD(e);return this._delegate.get(n).then((function(e){return new ZN(t._firestore,new gN(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=aD(e);return n?(UN("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=aD(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=aD(e);return this._delegate.delete(t),this}}]),e}(),GN=function(){function e(t){gt(this,e),this._delegate=t}return bt(e,[{key:"set",value:function(e,t,n){var r=aD(e);return n?(UN("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=aD(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=aD(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),QN=function(){function e(t,n,r){gt(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return bt(e,[{key:"fromFirestore",value:function(e,t){var n=new kN(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eD(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new HN(t),n),i.set(n,a)),a}}]),e}();QN.INSTANCES=new WeakMap;var YN=function(){function e(t,n){gt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new HN(t)}return bt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new iD(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new iD(this.firestore,PA(this._delegate,e))}catch(t){throw XN(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=qa(e))instanceof DA&&MA(this._delegate,e)}},{key:"set",value:function(e,t){t=UN("DocumentReference.set",t);try{return t?SN(this._delegate,e,t):SN(this._delegate,e)}catch(n){throw XN(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?TN(this._delegate,e):TN.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw XN(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return NN(IA(e.firestore,lC),[new Jw(e._key,Fw.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$N(n),a=JN(n,(function(t){return new ZN(e.firestore,new gN(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return AN(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?EN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=IA(e,DA);var t=IA(e.firestore,lC);return aC(fC(t),e._key,{source:"server"}).then((function(n){return DN(t,e,n)}))}(this._delegate):function(e){e=IA(e,DA);var t=IA(e.firestore,lC);return aC(fC(t),e._key).then((function(n){return DN(t,e,n)}))}(this._delegate),t.then((function(e){return new ZN(n.firestore,new gN(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(QN.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Qg("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new DA(n._delegate,r,new vk(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new DA(n._delegate,r,t))}}]),e}();function XN(e,t,n){return e.message=e.message.replace(t,n),e}function $N(e){var t,n=Ct(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!zN(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function JN(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=zN(e[0])?e[0]:zN(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ZN=function(){function e(t,n){gt(this,e),this._firestore=t,this._delegate=n}return bt(e,[{key:"ref",get:function(){return new YN(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return xN(this._delegate,e._delegate)}}]),e}(),eD=function(e){xt(n,e);var t=At(n);function n(){return gt(this,n),t.apply(this,arguments)}return bt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Kg()}(void 0!==t),t}}]),n}(ZN),tD=function(){function e(t,n){gt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new HN(t)}return bt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,eN(this._delegate,function(e,t,n){var r=t,i=$C("where",e);return new tN(i,r,n)}(t,n,r)))}catch(i){throw XN(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,eN(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=$C("orderBy",e);return new nN(n,t)}(t,n)))}catch(r){throw XN(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,eN(this._delegate,function(e){return SA("limit",e),new rN("limit",e,"F")}(t)))}catch(n){throw XN(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,eN(this._delegate,function(e){return SA("limitToLast",e),new rN("limitToLast",e,"L")}(t)))}catch(n){throw XN(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,eN(this._delegate,aN.apply(void 0,arguments)))}catch(t){throw XN(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,eN(this._delegate,oN.apply(void 0,arguments)))}catch(t){throw XN(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,eN(this._delegate,sN.apply(void 0,arguments)))}catch(t){throw XN(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,eN(this._delegate,cN.apply(void 0,arguments)))}catch(t){throw XN(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return FA(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?IN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=IA(e,OA);var t=IA(e.firestore,lC),n=fC(t),r=new _N(t);return oC(n,e._query,{source:"server"}).then((function(n){return new bN(t,r,e,n)}))}(this._delegate):function(e){e=IA(e,OA);var t=IA(e.firestore,lC),n=fC(t),r=new _N(t);return JC(e._query),oC(n,e._query).then((function(n){return new bN(t,r,e,n)}))}(this._delegate),t.then((function(e){return new rD(n.firestore,new bN(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=$N(n),a=JN(n,(function(t){return new rD(e.firestore,new bN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return AN(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(QN.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),nD=function(){function e(t,n){gt(this,e),this._firestore=t,this._delegate=n}return bt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new eD(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),rD=function(){function e(t,n){gt(this,e),this._firestore=t,this._delegate=n}return bt(e,[{key:"query",get:function(){return new tD(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new eD(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new nD(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new eD(n._firestore,r))}))}},{key:"isEqual",value:function(e){return xN(this._delegate,e._delegate)}}]),e}(),iD=function(e){xt(n,e);var t=At(n);function n(e,r){var i;return gt(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return bt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new YN(this.firestore,e):null}},{key:"doc",value:function(e){try{return new YN(this.firestore,void 0===e?LA(this._delegate):LA(this._delegate,e))}catch(t){throw XN(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=IA(e.firestore,lC),r=LA(e),i=vN(e.converter,t);return NN(n,[NC(CC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Fw.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new YN(t.firestore,e)}))}},{key:"isEqual",value:function(e){return MA(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(QN.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(tD);function aD(e){return IA(e,DA)}var oD=function(){function e(){gt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Rt(bC,n)}return bt(e,[{key:"isEqual",value:function(e){return(e=qa(e))instanceof bC&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(pk.keyField().canonicalString())}}]),e}(),uD=function(){function e(t){gt(this,e),this._delegate=t}return bt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new RC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new DC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=MN.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=FN.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new MC("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),sD={Firestore:KN,GeoPoint:xC,Timestamp:ck,Blob:BN,Transaction:WN,WriteBatch:GN,DocumentReference:YN,DocumentSnapshot:ZN,Query:tD,QueryDocumentSnapshot:eD,QuerySnapshot:rD,CollectionReference:iD,FieldPath:oD,FieldValue:uD,setLogLevel:function(e){!function(e){Ug.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ka("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},sD)))}(e,(function(e,t){return new KN(e,t,new qN)})),e.registerVersion("@firebase/firestore-compat","0.1.26")}(pu);var cD=pu.initializeApp({apiKey:"AIzaSyBfb7P7Tv4kxflQFLUT3YpBMiKR3Djo6Yk",authDomain:"netflix-clone-4c28d.firebaseapp.com",projectId:"netflix-clone-4c28d",storageBucket:"netflix-clone-4c28d.appspot.com",messagingSenderId:"270309474555",appId:"1:270309474555:web:fc57f132ddf30250a2f05e"}).firestore(),lD=pu.auth(),fD=cD;var hD=function(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,Ir.jsx)("div",{className:"signupScreen ",children:(0,Ir.jsxs)("form",{children:[(0,Ir.jsx)("h1",{children:"Sign In"}),(0,Ir.jsx)("input",{ref:e,placeholder:"Email",type:"email"}),(0,Ir.jsx)("input",{ref:n,placeholder:"Password",type:"password"}),(0,Ir.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),lD.signInWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.message)}))},children:"Sign In"}),(0,Ir.jsxs)("h4",{children:[(0,Ir.jsx)("span",{className:"signupScreen__gray",children:"New to Netflix? "}),(0,Ir.jsx)("span",{className:"signupScreen__link",onClick:function(t){t.preventDefault(),lD.createUserWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.message)}))},children:"Sign Up Now."})]})]})})};var dD=function(){var e=vt((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,Ir.jsxs)("div",{className:"loginScreen",children:[(0,Ir.jsxs)("div",{className:"loginScreen__background",children:[(0,Ir.jsx)("img",{className:"loginScreen_logo",src:"https://upload.wikimedia.org/wikipedia/commons/7/7a/Logonetflix.png",alt:""}),(0,Ir.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen__button",children:"Sign In"}),(0,Ir.jsx)("div",{className:"loginScreen__gradient"})]}),(0,Ir.jsx)("div",{className:"loginScreen__body",children:n?(0,Ir.jsx)(hD,{}):(0,Ir.jsxs)(Ir.Fragment,{children:[(0,Ir.jsx)("h1",{children:"Unlimited movies, TV shows, and more."}),(0,Ir.jsx)("h2",{children:"Watch anywhere. Cancel anytime."}),(0,Ir.jsx)("h3",{children:"Ready to watch? Enter your email to create or restart your membership. "}),(0,Ir.jsx)("div",{className:"loginScreen__input",children:(0,Ir.jsxs)("form",{children:[(0,Ir.jsx)("input",{type:"email",placeholder:"Email Address"}),(0,Ir.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen_getStarted",children:"Get Started"})]})})]})})]})};var pD,vD;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(pD||(pD={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(vD||(vD={}));var yD=function(){var e=y(ct);return(0,Ir.jsxs)("div",{className:"profileScreen",children:[(0,Ir.jsx)(Sr,{}),(0,Ir.jsxs)("div",{className:"profileScreen__body",children:[(0,Ir.jsx)("h1",{children:"Edit Profile"}),(0,Ir.jsxs)("div",{className:"profileScreen__info",children:[(0,Ir.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEUNfoD///8Ae30AeHoAdXcAdnl6q6z2+/vo8vLx+Ph1sbIAdHfu9PQHfH8AgYPl8vI7kJKRvr+hx8jO4+PJ3d4eioxppqja6eni7OxdoqRSnqC42dqXxsaw09Ntra8ph4l/uLmGtrdapqeozc02lZdMmZuuzM3A2NnU4+SRvL2fy8xSmZpEkZO+1NV1qaqNxlfBAAAEIElEQVR4nO3bXXeiOhQGYNgJg6AiiIiggtbP0U7//8+beJzjoCYtSAQ7630uetVmvZuEEOnWMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAvjNi3Ii8rkWtpuiLGCyKxA/dOchIZ3FPmGc5tVckGf4iPMUIA9/QGYNoEZr/c4Y+0zh2FSydX2KY00RfDDJ2ZlEnbadEa+EUYziBrlkkPzav2W4rJc5vYphzTQPTbYGixBZmkc/uYphDPTG29yObHb/p7YYSSQxzqSEGJbZs6FX9kavJQ1mMQV6/RDaVjWzaDU8i/ZDGMBf116knH1nH0FUoLrQ5qR2D3hQVhl0dwUvjihh2VHctsZVqaC3By6K1IoaZ1a2Qj5QXr68leznKpWQu6y5Tfv8wbKXC7HkV7hQjN1xh+rQKmeQkca6w0acFRaoKa9+HyosXci3Ry7Kk5w4de6lhKCps+nl4d+w+q/88VD0uHA3HpSpoLJ/ErH6FdHRkIw+b3GdOPOljK841DE2yvWaiYflXjLGWTKLtaolB9w8Me938uxq+uC8x0LMZUHRboqNh9T+QY3lb4ErXrUL92dXli6N23tPwt04xRsfV+MCi5O+Hl8Gy4W20EMMvXOrhRut1Jsrd+WQy2c82Wt9TVo7hpatY5FhlhvbXtsQsLmh/11w9x0vEAAAAAAAAAAAAAAAAgH8KMc/4l/8HRXyz3e2GLf07uqD/nO+fkLHZ2eeWgnZnkVi0ifSvJOLJpUXKTtoskfxdp9fZb7TWSETprtA50XCD3RWW/Qky19dUQCx3b7r2PV1jV+dd+sU6M88iDc0v1I2Cu5bextuzLqyrdrGgdhOHmL6xrGM/0hP3EfurIM42YY/fkMRYOpR2ZDvt3Yfe/iaLPVn4j7TBiL0l9xexooe24UbXIkvWL7n7uSGryh1JjEfjofQrQefV/7T8X2OuNFIvnq3FmisxlyR+zYoWo4Fi9oRB1kAhapbyytvT4OM9OpUpr1PUZhnR8SOYqosT4sxq99AmHvifxBuEo2G2iXiXc1bEeddYp8vtaN/55K9P9bntH0qJZV+kFHrh9HAI3P8sDodVqL7nCuzwrc0Wwr9YFEjbxGuy5+MWv1F+jcgPPr2XHtAL3l9j/v4Qny+CUguvHGfnvt7n3r44LSu+IFnVIDgarW8vUsSjmepQUnr24iB65dZZYt54NXi8vtEw9V64vDOx/fmHuPre6vSmWa6/r/s5xDls7W7D8lU64fZn6vFvUt4ZMcrfk2D69VnAmQbj95xefm3KiHMn73prN/g1CuO441zm1HacQRyHo19Btva6vMz5/JWd6jQ83z8mx48fZ8kx2fi5R9++tiKiPl1rOxEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALy43/ipMgzSotaqAAAAAElFTkSuQmCC",alt:""}),(0,Ir.jsxs)("div",{className:"profileScreen__details",children:[(0,Ir.jsx)("h2",{children:e.email}),(0,Ir.jsxs)("div",{className:"profileScreen__plans",children:[(0,Ir.jsx)("h3",{children:"Plans"}),(0,Ir.jsx)("button",{onClick:function(){return fD.signOut()},className:"profileScreen__signOut",children:"Sign Out"})]})]})]})]})]})},mD=function(e,t){var n,r;return dn({basename:null==t?void 0:t.basename,history:(r={window:null==t?void 0:t.window},void 0===r&&(r={}),zt((function(e,t){var n=e.location;return jt("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Vt(t)}),null,r)),hydrationData:(null==t?void 0:t.hydrationData)||(null==(n=window)?void 0:n.__staticRouterHydrationData),routes:Er(e)}).initialize()}([{path:"/",element:(0,Ir.jsx)(da,{})},{path:"/profile",element:(0,Ir.jsx)(yD,{})}]);var gD=function(){var e=y(ct),n=I();return(0,t.useEffect)((function(){return lD.onAuthStateChanged((function(e){n(e?ut({uid:e.uid,email:e.email}):st)}))}),[n]),(0,Ir.jsx)("div",{className:"app",children:e?(0,Ir.jsx)(gr,{router:mD}):(0,Ir.jsx)(dD,{})})},kD=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},bD=document.getElementById("root");(0,i.s)(bD).render((0,Ir.jsx)(t.StrictMode,{children:(0,Ir.jsx)(b,{store:lt,children:(0,Ir.jsx)(gD,{})})})),kD()}()}();
//# sourceMappingURL=main.341c94cf.js.map